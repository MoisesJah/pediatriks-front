import{o as c}from"./chunk-MFZOMSUD.js";import{Aa as u,F as i,X as s,oa as a,ua as l}from"./chunk-JQJUQ5FW.js";var m={production:!0,apiUrl:"https://api.pediatriks.pe/api"};var U=(()=>{let r=class r{constructor(t){this.http=t,this.apiUrl=m.apiUrl}register({name:t,email:o,dni:e,password:g}){return this.http.post(`${this.apiUrl}/register`,{name:t,email:o,dni:e,password:g}).pipe(s(p=>(console.error("Error en el registro",p),i(p))))}login({email:t,password:o}){return this.http.post(`${this.apiUrl}/login`,{email:t,password:o}).pipe(a(e=>{localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user))}),s(e=>(console.error("Error en el login",e),i(e))))}logout(){return this.http.post(`${this.apiUrl}/logout`,{}).pipe(a(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}),s(t=>(console.error("Error en el logout",t),i(t))))}user(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}isAuthenticated(){return!!localStorage.getItem("token")}isAdmin(){let t=this.user();return t?t.tipo_user==="administrador":!1}isPaciente(){let t=this.user();return t?t.tipo_user==="paciente":!1}isTerapista(){let t=this.user();return t?t.tipo_user==="terapista":!1}getToken(){return localStorage.getItem("token")}};r.\u0275fac=function(o){return new(o||r)(u(c))},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();export{m as a,U as b};
