import{a as R,b}from"./chunk-GOCV7MVT.js";import{a as g,b as v,c as f}from"./chunk-RA3TJD6Z.js";import{a as y}from"./chunk-MJY4KJR5.js";import{a as l}from"./chunk-BIMAMPZW.js";import{a as p}from"./chunk-KNEUCQQI.js";import"./chunk-GKZUPR7X.js";import{i as m}from"./chunk-ZM3MROS5.js";import"./chunk-DP3M2V7L.js";import{Aa as u,Gc as d,Ub as c,dc as n,f as h,wa as i}from"./chunk-B7JMKZ3I.js";var S=h(g()),r=h(R());var A=h(b());var N=(()=>{class s{constructor(){this.fichaResultService=i(y),this.activeRoute=i(m),this.authService=i(l),this.resultId=this.activeRoute.snapshot.paramMap.get("resultId"),this.theme=i(p)}ngOnInit(){this.getResult(),console.log(this.resultId)}getResult(){this.fichaResultService.getOne(this.resultId).subscribe(t=>{let e=JSON.parse(t.data.ficha.body);e.mode=this.authService.isTerapista()?void 0:"display",this.survey=new S.SurveyModel(JSON.stringify(e)),this.survey.locale="es",this.survey.applyTheme(this.theme.getThemeMode()==="dark"?r.DefaultDark:r.DefaultLight),this.survey.mergeData(t.data.body),this.survey.data=JSON.parse(t.data.body),this.survey.completedHtml="<h3>Ficha Actualizada!</h3>",this.survey.onComplete.add((a,o)=>{o.showSaveInProgress(),this.fichaResultService.update(this.resultId,{body:JSON.stringify(a.data)}).subscribe({next:()=>{o.showSaveSuccess("Ficha Actualizada!")},error:()=>{o.showSaveError()}})})})}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=u({type:s,selectors:[["app-fichas-result"]],standalone:!0,features:[d],decls:1,vars:1,consts:[[2,"min-height","100dvh",3,"model"]],template:function(e,a){e&1&&n(0,"survey",0),e&2&&c("model",a.survey)},dependencies:[f,v]})}}return s})();export{N as FichasResultComponent};
