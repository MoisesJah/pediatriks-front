import{a as c}from"./chunk-GKZUPR7X.js";import{b as u}from"./chunk-QUGPZPJP.js";import{S as i,ka as n,qa as l,wa as p,z as s}from"./chunk-H565K2KG.js";var k=(()=>{class e{constructor(t){this.http=t,this.apiUrl=c.apiUrl}register({name:t,email:o,dni:r,password:h}){return this.http.post(`${this.apiUrl}/register`,{name:t,email:o,dni:r,password:h}).pipe(i(a=>(console.error("Error en el registro",a),s(a))))}login({email:t,password:o}){return this.http.post(`${this.apiUrl}/login`,{email:t,password:o}).pipe(n(r=>{localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user))}),i(r=>(console.error("Error en el login",r),s(r))))}logout(){return this.http.post(`${this.apiUrl}/logout`,{}).pipe(n(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}),i(t=>(console.error("Error en el logout",t),s(t))))}sentResetLink(t){return this.http.post(`${this.apiUrl}/reset-link`,{email:t})}resetPassword(t){return this.http.post(`${this.apiUrl}/reset-password`,t)}user(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}isAuthenticated(){return!!localStorage.getItem("token")}isAdmin(){let t=this.user();return t?t.tipo_user==="administrador":!1}isPaciente(){let t=this.user();return t?t.tipo_user==="paciente":!1}isTerapista(){let t=this.user();return t?t.tipo_user==="terapista":!1}getToken(){return localStorage.getItem("token")}static{this.\u0275fac=function(o){return new(o||e)(p(u))}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{k as a};
