import{a as ee}from"./chunk-OBNLLSUG.js";import{a as S}from"./chunk-X7PO4PNB.js";import{a as Z}from"./chunk-4JZDPN5V.js";import{a as Y,b as N}from"./chunk-FKRAWMO5.js";import{a as X}from"./chunk-MYRVSVX3.js";import{t as J,v as Q}from"./chunk-FWMYVGKL.js";import{a as K}from"./chunk-PQDQNIDX.js";import{b as W}from"./chunk-OIXA5WM3.js";import{A as p,b as V,d as q,i as $,k as v,v as x,x as y}from"./chunk-MFZOMSUD.js";import{Ab as m,Ac as g,B as k,Ba as c,C as A,Fa as E,Fc as G,Ga as h,Hc as U,I as _,Lc as T,Mc as M,Ob as P,Pa as F,Qa as L,Sb as I,Ub as z,Xb as b,bd as C,ec as r,fc as a,gc as u,hc as O,ic as B,kc as H,qc as R,rc as w,t as D,va as f,zb as j}from"./chunk-JQJUQ5FW.js";var re=()=>[$,import("./chunk-RHBLOMFZ.js").then(t=>t.AgGridAngular)],ae=t=>[t];function ne(t,e){if(t&1){let i=H();r(0,"ag-grid-angular",18),T(1,"async"),T(2,"async"),R("gridReady",function(o){F(i);let s=w();return L(s.gridReady(o))}),a()}if(t&2){let i=w();b("rowData",M(1,7,i.citasPaciente))("columnDefs",i.colDefs)("loading",M(2,9,i.isLoading))("localeText",i.localeText)("enableCellTextSelection",!0)("ariaHidden",!0)("pagination",!0)}}function oe(t,e){t&1&&(r(0,"div",19)(1,"div",20)(2,"span",21),g(3,"Loading..."),a()()())}var n,d=(n=class{constructor(e,i,l,o){this.route=e,this.changeDetector=i,this.router=l,this.citaService=o,this.localeText=X,this.isLoading=c(K).isLoading,this.theme=c(J),this.authService=c(W),this.pacienteService=c(Z),this.pacientesList=new D,this.citasPaciente=new D,this.user=this.authService.user(),this.colDefs=[{field:"paciente",headerName:"Paciente",filter:!0},{field:"tipocita",headerName:"Tipo de Cita",filter:!0},{field:"sede",headerName:"Sede",filter:!0},{field:"fecha_sesion",headerName:"Fecha de Cita",valueFormatter:s=>V(s.value,"dd/MM/yyyy","en"),cellRenderer:s=>(console.log(s),`<span class="d-flex gap-2 align-items-center"><i class="ki-outline ki-calendar text-gray-900 fs-2"></i>${s.valueFormatted}</span>`),filter:"agDateColumnFilter"},{field:"hora_inicio",headerName:"Hora de Cita",filter:!0,cellRenderer:s=>`<span class="d-flex gap-2 align-items-center"><i class="ki-outline ki-time text-gray-900 fs-2"></i>${s.value}</span>`},{field:"terapia",headerName:"Terapia",filter:!0},{field:"terapista",headerName:"Terapista",filter:!0},{field:"status",headerName:"Estado",filter:!0,cellRenderer:ee}]}ngOnInit(){if(this.user){console.log("Usuario logueado:",this.user);let e=this.user.id.toString();this.loadCitasPaciente(e)}}loadPacientes(){this.pacientesList=this.pacienteService.getAll().pipe(_(e=>e.data),N(this))}refreshList(){this.loadCitasPaciente(this.user?.id.toString())}loadCitasPaciente(e){this.citasPaciente=this.citaService.getCitasByUser(e).pipe(_(i=>i.data),N(this))}gridReady(e){this.gridApi=e.api}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}},n.\u0275fac=function(i){return new(i||n)(m(x),m(C),m(y),m(S))},n.\u0275cmp=E({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[G],decls:25,vars:3,consts:[["header-title",""],[1,"d-flex","text-gray-900","fw-bold","align-items-center","gap-2"],[1,"ki-duotone","ki-calendar","text-white","fs-2tx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"",2,"color","white"],["href","https://api.whatsapp.com/send?phone=51993723593","target","_blank",1,"float"],[1,"my-float"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],[2,"height","350px",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","loading","localeText","enableCellTextSelection","ariaHidden","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,l){i&1&&(r(0,"app-header"),O(1,0),r(2,"h1",1)(3,"i",2),u(4,"span",3)(5,"span",4),a(),r(6,"span",5),g(7,"Mis Citas"),a(),r(8,"a",6),u(9,"i",7),a()(),B(),a(),r(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"button",13),R("click",function(){return l.refreshList()}),r(16,"span",14),u(17,"span",15),r(18,"span",16),g(19,"Actualizar"),a()()()()(),r(20,"div",17),P(21,ne,3,11)(22,oe,4,0),I(23,21,re,22),z(),a()()()()),i&2&&(j(20),b("ngClass",U(1,ae,l.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[v,q,Q]}),n);d=k([Y({checkProperties:!0}),A("design:paramtypes",[x,C,y,S])],d);var se=[{path:"",component:d},{path:"reservar-cita/:tag",loadChildren:()=>import("./chunk-DPMWTNUA.js").then(t=>t.ReservarCitaModule)}],ie=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=h({type:e}),e.\u0275inj=f({imports:[p.forChild(se),p]});let t=e;return t})();var le=[{path:"",component:d}],ze=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=h({type:e}),e.\u0275inj=f({imports:[v,ie,p.forChild(le)]});let t=e;return t})();export{ze as DashboardModule};
