import{a as j}from"./chunk-EJQSY4D3.js";import{a as B}from"./chunk-PQDQNIDX.js";import{b as _}from"./chunk-OIXA5WM3.js";import{A as v,D as A,E as p,F as D,G as O,H as T,I as y,J as P,M as G,P as R,X as z,f as I,i as F,k as E,m as k,x as L,y as M}from"./chunk-MFZOMSUD.js";import{Ac as a,Ba as f,Bc as N,Fa as S,Ga as u,Lc as h,Mc as x,Ob as b,Xb as l,ec as r,fc as n,gc as d,qc as w,rc as C,va as c,zb as s}from"./chunk-JQJUQ5FW.js";function Z(t,e){if(t&1&&(r(0,"div",24),a(1),n()),t&2){let J=C();s(),N(J.errors.error)}}function H(t,e){t&1&&d(0,"span",25)}var g=(()=>{let e=class e{constructor(){this.authService=f(_),this.isLoading=f(B).isLoading,this.router=f(L),this.errors={error:""},this.loginForm=new T({email:new y("",{nonNullable:!0,validators:[p.email,p.required]}),password:new y("",{nonNullable:!0,validators:[p.required,p.minLength(8)]})})}storeCredentials(i,o){localStorage.setItem("token",i),localStorage.setItem("user",JSON.stringify(o))}redirectToDashboard(i){switch(this.storeCredentials(i.token,i.user),i.user.tipo_user){case"administrador":this.router.navigate(["/admin/dashboard"]);break;case"paciente":this.router.navigate(["/dashboard"]);break;case"terapista":this.router.navigate(["/terapista/dashboard"]);break;default:break}}handleSubmit(){this.errors={},this.authService.login({email:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:i=>{this.redirectToDashboard(i)},error:i=>{this.errors=i.error}})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=S({type:e,selectors:[["app-login"]],decls:31,vars:8,consts:[["id","body",1,"min-vh-100","d-flex","align-items-center","auth-bg","bgi-size-cover","bgi-attachment-fixed","bgi-position-center","bgi-no-repeat"],[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-column","flex-column-fluid","flex-lg-row"],[1,"d-flex","flex-center","w-lg-50","pt-15","pt-lg-0","px-10"],[1,"d-flex","flex-center","flex-lg-center","flex-column"],["alt","Logo","height","771","width","1600","ngSrc","assets/media/logos/file.png","priority","",2,"width","350px","height","auto","display","flex","align-items","center"],[1,"text","text-center",2,"color","white","text-wrap","balance"],[1,"d-flex","flex-column-fluid","flex-lg-row-auto","justify-content-center","justify-content-lg-end","p-12"],[1,"bg-body","d-flex","flex-column","align-items-stretch","flex-center","rounded-4","w-md-600px","p-20"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","px-lg-10"],[1,"form","w-100",3,"ngSubmit","formGroup"],[1,"text-center","mb-11"],[1,"text-gray-900","fw-bolder","mb-3"],[1,"fv-row","mb-8"],["type","text","formControlName","email","placeholder","Correo","autocomplete","off",1,"form-control","bg-transparent"],[1,"fv-row","mb-3"],["type","password","formControlName","password","placeholder","Contrase\xF1a","name","password","autocomplete","off",1,"form-control","bg-transparent"],["class","text-danger mx-1",4,"ngIf"],[1,"d-grid","my-10"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-primary",3,"disabled"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-gray-700","text-center","fw-semibold","fs-6"],["routerLink","/registrate",1,"link-primary"],[1,"text-danger","mx-1"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,m){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),r(6,"h2",6),a(7,"CENTRO ESPECIALIZADO EN TERAPIAS INFANTILES"),n()()(),r(8,"div",7)(9,"div",8)(10,"div",9)(11,"form",10),w("ngSubmit",function(){return m.handleSubmit()}),r(12,"div",11)(13,"h1",12),a(14,"Iniciar Sesi\xF3n"),n()(),r(15,"div",13),d(16,"input",14),n(),r(17,"div",15),d(18,"input",16),n(),b(19,Z,2,1,"div",17),r(20,"div",18)(21,"button",19),h(22,"async"),r(23,"span",20),a(24,"Iniciar Sesi\xF3n"),n(),b(25,H,1,0,"span",21),h(26,"async"),n()(),r(27,"div",22),a(28,"\xBFNo eres un miembro todav\xEDa? "),r(29,"a",23),a(30,"Reg\xEDstrate"),n()()()()()()()()()),o&2&&(s(11),l("formGroup",m.loginForm),s(8),l("ngIf",m.errors.error),s(2),l("disabled",!m.loginForm.valid||x(22,4,m.isLoading)),s(4),l("ngIf",x(26,6,m.isLoading)))},dependencies:[I,M,P,A,D,O,G,R,k,F],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]:not(form){border:1.25px solid #a94442}",`#body[_ngcontent-%COMP%] { background-image: url('assets/media/auth/bg4.jpg'); } [data-bs-theme="dark"][_ngcontent-%COMP%]   #body[_ngcontent-%COMP%] { background-image: url('assets/media/auth/bg4-dark.jpg'); }`]});let t=e;return t})();var K=[{path:"",component:g,canActivate:[j]}],q=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=u({type:e}),e.\u0275inj=c({imports:[v.forChild(K),v]});let t=e;return t})();var ue=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=u({type:e,bootstrap:[g]}),e.\u0275inj=c({imports:[E,q,z]});let t=e;return t})();export{ue as LoginModule};
