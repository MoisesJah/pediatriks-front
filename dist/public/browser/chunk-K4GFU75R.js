import{a as le,b as se,c as me}from"./chunk-U7CF4JFT.js";import{a as pe}from"./chunk-RIN4FRUE.js";import"./chunk-ZDSHMRI2.js";import{a as I}from"./chunk-DR7YQVCV.js";import{a as re}from"./chunk-E6U7EDCE.js";import"./chunk-TJFBSUUK.js";import"./chunk-GT4JH6HJ.js";import"./chunk-EBZKSOFQ.js";import{b as ae}from"./chunk-7KNNJSCE.js";import"./chunk-FMZGRIZ6.js";import{o as E}from"./chunk-KLLKZ3UM.js";import{A as ne,c as X,e as Y,f as Z,i as ee,k as te,n as ie}from"./chunk-MGQU4BYR.js";import{c as oe}from"./chunk-XKOQY6PJ.js";import{a as N}from"./chunk-U2EAJGNN.js";import{a as D}from"./chunk-RQ4VGEOD.js";import{a as L,b as M}from"./chunk-PIACHCSP.js";import{a as F}from"./chunk-J6P2CT7J.js";import"./chunk-GKZUPR7X.js";import"./chunk-APQUY7ND.js";import{m as H,n as J,o as K,r as Q,t as k,w}from"./chunk-JS4ZJV2L.js";import{Ba as y,C as b,D as V,Fc as o,Gc as S,Hc as z,La as x,Ma as _,Mb as A,Oc as T,Qc as u,Vb as s,Vc as f,Wc as h,fc as t,gc as n,ha as q,hc as l,ic as W,jc as $,lc as U,n as B,r as G,uc as d,v,vc as C,wb as r,xa as p}from"./chunk-B762IU3Y.js";var fe=m=>[m],P=class O{constructor(){this.terapiaService=p(I),this.isLoading=p(D).isLoading,this.theme=p(F),this.modal=p(E),this.id_terapia="",this.pacientesList=new B,this.localeText=N,this.colDefs=[{field:"nombre",headerName:"Nombre",filter:!0},{field:"dni",headerName:"DNI",filter:!0,resizable:!0},{field:"fecha_nacimiento",headerName:"Fecha Nacimiento",filter:"agDateColumnFilter",resizable:!0}]}ngOnInit(){this.fetchPacientes()}fetchPacientes(){this.pacientesList=this.terapiaService.getPacientesByTerapia(this.id_terapia).pipe(b(e=>e.data),M(this))}getLista(){this.fetchPacientes()}gridReady(e){this.gridApi=e.api}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("terapia-search").value)}close(){this.modal.dismissAll()}static{this.\u0275fac=function(i){return new(i||O)}}static{this.\u0275cmp=y({type:O,selectors:[["app-lista-pacientes"]],standalone:!0,features:[T],decls:18,vars:12,consts:[[1,"modal-body"],[1,"d-flex","py-4","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-sm","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"path1"],[1,"path2"],["id","myGrid",2,"height","calc(100dvh - 281px)",3,"ngClass"],[2,"width","100%","height","100%",3,"localeText","pagination","loading","rowData","columnDefs"]],template:function(i,a){i&1&&(t(0,"div",0)(1,"div",1)(2,"h3"),o(3,"Pacientes"),n(),t(4,"div",2)(5,"button",3),d("click",function(){return a.getLista()}),t(6,"span",4),l(7,"span",5),t(8,"span",6),o(9,"Actualizar"),n()()(),t(10,"button",7),d("click",function(){return a.close()}),t(11,"i",8),l(12,"span",9)(13,"span",10),n()()()(),t(14,"div",11),l(15,"ag-grid-angular",12),f(16,"async"),f(17,"async"),n()()),i&2&&(r(14),s("ngClass",u(10,fe,a.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")),r(),s("localeText",a.localeText)("pagination",!0)("loading",h(16,6,a.isLoading))("rowData",h(17,8,a.pacientesList))("columnDefs",a.colDefs))},dependencies:[oe,w,H,k],encapsulation:2})}};P=v([L()],P);var he=m=>({"background-color":m}),j=m=>({color:m});function ge(m,e){m&1&&(t(0,"div",24)(1,"div",25)(2,"span",26),o(3,"Loading..."),n()()())}function be(m,e){if(m&1){let i=U();t(0,"div",27)(1,"div",28),l(2,"div",29),t(3,"div",30)(4,"h3"),o(5),n(),t(6,"p"),o(7),n(),t(8,"div",31)(9,"div",32)(10,"i",33),l(11,"span",10)(12,"span",11)(13,"span",34),n(),t(14,"span",35),o(15),n(),t(16,"span"),o(17,"Precio"),n()(),t(18,"div",36),d("click",function(){let c=x(i).$implicit,g=C();return _(g.openPacientesModal(c.id_terapia))}),t(19,"i",37),l(20,"span",10)(21,"span",11)(22,"span",34)(23,"span",38)(24,"span",39),n(),t(25,"span",40),o(26),n(),t(27,"span"),o(28,"Pacientes"),n()(),t(29,"div",41)(30,"i",42),l(31,"span",10)(32,"span",11),n(),t(33,"span",40),o(34),n(),t(35,"span"),o(36,"Duraci\xF3n"),n()()(),t(37,"div",43)(38,"button",44),d("click",function(){let c=x(i).$implicit,g=C();return _(g.openEditModal(c))}),l(39,"span",45),t(40,"span",17),o(41,"Editar"),n()(),t(42,"button",46),d("click",function(){let c=x(i).$implicit,g=C();return _(g.openDeleteModal(c))}),l(43,"span",47),t(44,"span",17),o(45,"Eliminar"),n()()()()()()}if(m&2){let i=e.$implicit;r(2),s("ngStyle",u(9,he,i.color)),r(3),S(i.nombre),r(2),S(i.descripcion),r(3),s("ngStyle",u(11,j,i.color)),r(5),z("S/",i.precio,""),r(4),s("ngStyle",u(13,j,i.color)),r(7),S(i.pacientes),r(4),s("ngStyle",u(15,j,i.color)),r(4),z("",i.duracion.split(":")[1]," min")}}var ce=class R{constructor(){this.modal=p(E),this.terapias=p(I),this.theme=p(F),this.isLoading=p(D).isLoading,this.localeText=N,this.searchControl=new ee(""),this.inventarioSubject=new G([]),this.terapiasList=V([this.inventarioSubject.asObservable(),this.searchControl.valueChanges.pipe(q(this.searchControl.value))]).pipe(b(([e,i])=>i?e.filter(a=>a.nombre.toLowerCase().includes(i.toLowerCase())):e)),this.colDefs=[{headerName:"Color",field:"color",maxWidth:75,filter:!1,cellRenderer:e=>`<div class="h-20px w-20px mt-3 rounded-circle" style="background-color: ${e.value}"></div>`},{field:"nombre",headerName:"Nombre",filter:!0,resizable:!0},{field:"descripcion",headerName:"Descripci\xF3n",filter:!0,resizable:!0},{field:"precio",headerName:"Precio",maxWidth:120,filter:"agNumberColumnFilter",cellClass:"fw-bold",valueFormatter:e=>re(e.value),resizable:!0},{headerName:"Duraci\xF3n",field:"duracion",maxWidth:150,filter:"agNumberColumnFilter",valueFormatter:e=>e.value?`${e.value.substring(0,5)} min`:"",resizable:!0},{headerName:"Acciones",cellRenderer:pe,cellRendererParams:{onEdit:e=>this.openEditModal(e),onDelete:e=>this.openDeleteModal(e)},maxWidth:100,resizable:!1}]}ngOnInit(){this.fetchTerapias()}fetchTerapias(){this.terapias.getAll().pipe(b(e=>e.data),M(this)).subscribe(e=>{this.inventarioSubject.next(e)})}gridReady(e){this.gridApi=e.api,this.sizeColumnsToFit()}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("terapia-search").value)}ngOnDestroy(){}loadTabla(){this.fetchTerapias()}openCreateModal(){this.modal.open(le,{size:"300px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openEditModal(e){let i=this.modal.open(se,{size:"300px",animation:!0,centered:!0});i.componentInstance.terapiaId=e.id_terapia,i.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openDeleteModal(e){let i=this.modal.open(me,{size:"300px",animation:!0,centered:!0});i.componentInstance.terapiaId=e.id_terapia,i.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openPacientesModal(e){let i=this.modal.open(P,{centered:!0});i.componentInstance.id_terapia=e}static{this.\u0275fac=function(i){return new(i||R)}}static{this.\u0275cmp=y({type:R,selectors:[["app-terapias"]],standalone:!0,features:[T],decls:31,vars:7,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","terapia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"formControl"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],["class","d-flex justify-content-center align-items-center","style","height: 100%",4,"ngIf"],[1,"row",2,"row-gap","1rem"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-md-6","col-lg-4"],[1,"card"],[1,"h-10px","rounded-top-3",3,"ngStyle"],[1,"card-body"],[1,"d-flex","my-3","justify-content-between","align-items-center","gap-2"],[1,"rounded-2","px-3","py-2","bg-gray-200","d-flex","gap-1","flex-column","justify-content-center","align-items-center"],[1,"ki-duotone","ki-tag","fs-1",3,"ngStyle"],[1,"path3"],[1,"fw-bold","text-truncate"],[1,"rounded-2","cursor-pointer","hover-bg-gray-200","px-3","py-2","bg-gray-200","gap-1","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"ki-duotone","ki-people","fs-1",3,"ngStyle"],[1,"path4"],[1,"path5"],[1,"fw-bold"],[1,"rounded-2","p-2","bg-gray-200","gap-1","d-flex","flex-column","justify-content-center","align-items-center"],[1,"ki-duotone","ki-time","fs-1",3,"ngStyle"],[1,"d-flex","justify-content-end","mt-5","gap-2"],[1,"btn","btn-sm","btn-outline","btn-outline-success",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-sm","btn-outline","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(i,a){i&1&&(t(0,"app-header"),W(1,0),t(2,"h1",1)(3,"span",2),o(4,"Terapias"),n()(),$(),n(),t(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),l(10,"input",8),t(11,"i",9),l(12,"span",10)(13,"span",11),n(),l(14,"input",12),n(),t(15,"div",13)(16,"button",14),d("click",function(){return a.loadTabla()}),t(17,"span",15),l(18,"span",16),t(19,"span",17),o(20,"Actualizar"),n()()(),t(21,"button",18),d("click",function(){return a.openCreateModal()}),t(22,"span",15),l(23,"span",19),t(24,"span",20),o(25,"A\xF1adir"),n()()()()(),A(26,ge,4,0,"div",21),f(27,"async"),t(28,"div",22),A(29,be,46,17,"div",23),f(30,"async"),n()()()()),i&2&&(r(14),s("formControl",a.searchControl),r(12),s("ngIf",h(27,3,a.isLoading)),r(3),s("ngForOf",h(30,5,a.terapiasList)))},dependencies:[w,J,K,Q,k,ae,ne,te,X,Y,Z,ie],styles:["table[_ngcontent-%COMP%]   td[id=descripcion][_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}"]})}};ce=v([L({checkProperties:!0})],ce);export{ce as TerapiasComponent};
