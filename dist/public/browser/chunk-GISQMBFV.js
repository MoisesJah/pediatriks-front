import{a as T}from"./chunk-64AMK5BZ.js";import{c as oe,d as re}from"./chunk-W5IB7EHJ.js";import{a as J}from"./chunk-U2EAJGNN.js";import{a as ne,b as Ve}from"./chunk-ESGQTXWU.js";import{o as y,p as Me,q as Te,r as Fe,s as Ne,t as De,u as we,v as Ae,w as Le}from"./chunk-SZA4NEXD.js";import{a as S}from"./chunk-5ZMKPZZY.js";import"./chunk-3IC3XWDF.js";import{a as j,b as Be}from"./chunk-T3S5D2ZO.js";import{a as H}from"./chunk-H7V4WWIX.js";import"./chunk-GKZUPR7X.js";import{A as ie,C as Ee,D as U,G as $,N as k,P as M,r as A,s as I,t as L,u as B,x as xe,z as V}from"./chunk-DA7F7PFS.js";import{m as Q,n as ke,o as E,t as _,v as C}from"./chunk-IVHFDWNE.js";import{Ac as Se,Ba as b,Bc as l,C as G,Cc as de,D as be,Dc as Ie,Jc as h,La as N,Lc as P,Ma as D,Mb as f,Qb as X,Qc as v,Rc as g,Sb as Y,Ua as w,Vb as d,ec as n,fc as i,gc as s,ha as he,hc as Ce,ic as ye,kc as z,n as K,qb as _e,qc as p,r as ge,rc as x,uc as me,v as F,w as q,wb as m,xa as c,xb as R,xc as Z,yc as ee,zc as te}from"./chunk-MKY54U27.js";var ze=["fileInput"];function Pe(r,o){r&1&&(n(0,"div")(1,"small",25),l(2,"El stock debe ser mayor que 0."),i()())}function Qe(r,o){r&1&&s(0,"span",26)}var ae=class ce{constructor(o){this.fb=o,this.modal=c(y),this.inventarioService=c(T),this.loadingService=c(S),this.isLoading=this.loadingService.isLoading,this.onSaveComplete=new w,this.inventarioForm=this.fb.group({nombre:["",I.required],descripcion:[""],stock:["",[I.required,I.min(1)]],banner_url:[""]})}evtSelectFile(o){let e=o.target.files;this.inventarioForm.get("banner_url")?.setValue(e?.item(0))}ngOnInit(){}close(){this.modal.dismissAll()}save(){let o=new FormData;Object.keys(this.inventarioForm.value).forEach(e=>{let t=this.inventarioForm.get(e);Array.isArray(t?.value)?o.append(e,JSON.stringify(t?.value)):o.append(e,t?.value)}),this.inventarioService.create(o).subscribe({next:()=>{this.modal.dismissAll(),this.onSaveComplete.emit()},error:e=>{console.log(e)}})}static{this.\u0275fac=function(e){return new(e||ce)(R(k))}}static{this.\u0275cmp=b({type:ce,selectors:[["app-crear-modal"]],viewQuery:function(e,t){if(e&1&&Z(ze,5),e&2){let a;ee(a=te())&&(t.fileInput=a.first)}},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:39,vars:8,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre",1,"required","form-label"],["type","text","id","nombre","formControlName","nombre","placeholder","Ingresa Nombre del Item",1,"form-control"],["for","",1,"required","form-label"],["type","file","id","imagen","accept","image/*",1,"form-control",3,"change"],["for","descripcion",1,"form-label"],["cols","3","rows","2","id","descripcion","formControlName","descripcion","placeholder","Ingresa Descripci\xF3n del Paquete",1,"form-control"],["for","stock",1,"form-label"],["id","stock","formControlName","stock","type","number","placeholder","Ingresa el stock",1,"form-control"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){if(e&1&&(n(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),s(4,"span",4)(5,"span",5)(6,"span",6),i()(),l(7," A\xF1adir Inventario "),i(),n(8,"button",7),p("click",function(){return t.close()}),n(9,"i",8),s(10,"span",4)(11,"span",5),i()()(),n(12,"div",9)(13,"form",10),p("ngSubmit",function(){return t.save()}),n(14,"div",11)(15,"label",12),l(16,"Nombre del Item"),i(),s(17,"input",13),i(),n(18,"div",11)(19,"label",14),l(20,"Imagen"),i(),n(21,"input",15),p("change",function(u){return t.evtSelectFile(u)}),i()(),n(22,"div",11)(23,"label",16),l(24,"Descripci\xF3n"),i(),s(25,"textarea",17),i(),n(26,"div",11)(27,"label",18),l(28,"Stock"),i(),s(29,"input",19),f(30,Pe,3,0,"div",20),i()()(),n(31,"div",21)(32,"button",22),p("click",function(){return t.close()}),l(33,"Cancelar"),i(),n(34,"button",23),v(35,"async"),p("click",function(){return t.save()}),l(36," Guardar "),f(37,Qe,1,0,"span",24),v(38,"async"),i()()),e&2){let a;m(13),d("formGroup",t.inventarioForm),m(17),d("ngIf",((a=t.inventarioForm.get("stock"))==null?null:a.invalid)&&(((a=t.inventarioForm.get("stock"))==null?null:a.touched)||((a=t.inventarioForm.get("stock"))==null?null:a.dirty))),m(4),d("disabled",t.inventarioForm.invalid||g(35,4,t.isLoading)),m(3),d("ngIf",g(38,6,t.isLoading))}},dependencies:[M,V,A,ie,L,B,U,$,C,E,_]})}};ae=F([j({checkProperties:!0}),q("design:paramtypes",[k])],ae);function Ue(r,o){r&1&&s(0,"span",13)}var je=(()=>{class r{constructor(){this.modal=c(y),this.inventarioService=c(T),this.isLoading=c(S).isLoading,this.inventarioId="",this.onSaveComplete=new w}close(){this.modal.dismissAll()}delete(){let e=typeof this.inventarioId=="string"?this.inventarioId:this.inventarioId.id;e?this.inventarioService.delete(e).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.dismissAll()},error:t=>{console.error("Error al eliminar inventario:",t)}}):console.error("ID del inventario no proporcionado o en formato incorrecto")}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=b({type:r,selectors:[["app-borrar-modal"]],inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),s(4,"span",3)(5,"span",4)(6,"span",5),i()(),l(7," Eliminar Inventario "),i(),n(8,"button",6),p("click",function(){return a.close()}),n(9,"i",7),s(10,"span",3)(11,"span",4),i()()(),n(12,"div",8)(13,"p"),l(14,"\xBFEst\xE1s seguro de eliminar este registro de inventario?"),i(),n(15,"p"),l(16,"Toda la informaci\xF3n relacionada con este \xEDtem se perder\xE1."),i()(),n(17,"div",9)(18,"button",10),p("click",function(){return a.close()}),l(19," Cancelar "),i(),n(20,"button",11),v(21,"async"),p("click",function(){return a.delete()}),l(22," Eliminar "),f(23,Ue,1,0,"span",12),v(24,"async"),i()()),t&2&&(m(20),d("disabled",g(21,2,a.isLoading)),m(3),d("ngIf",g(24,4,a.isLoading)))},dependencies:[M,C,E,_]})}}return r})();var $e=["fileInput"];function He(r,o){r&1&&s(0,"span",20)}var le=class ue{constructor(o){this.fb=o,this.modal=c(y),this.inventarioService=c(T),this.isLoading=c(S).isLoading,this.inventarioId="",this.onSaveComplete=new w,this.inventarioForm=this.fb.group({nombre:["",I.required],descripcion:["",I.required],banner_url:[""]})}ngOnInit(){typeof this.inventarioId=="string"?this.loadInventarioData():typeof this.inventarioId=="object"&&this.inventarioId.id?this.loadInventarioData(this.inventarioId.id):console.error("ID del inventario no proporcionado o no es una cadena",this.inventarioId)}close(){this.modal.dismissAll()}save(){if(this.inventarioForm.valid){let o=new FormData;o.append("nombre",this.inventarioForm.get("nombre")?.value||""),o.append("descripcion",this.inventarioForm.get("descripcion")?.value||"");let e=this.inventarioForm.get("banner_url")?.value;e&&o.append("banner_url",e),console.log("Datos enviados:",o.get("nombre"),o.get("descripcion"),o.get("banner_url"));let t=typeof this.inventarioId=="string"?this.inventarioId:this.inventarioId.id;t&&this.inventarioService.update(t,o).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.dismissAll()},error:a=>{console.error("Error al actualizar inventario:",a.message),alert("No se pudo actualizar el inventario. Intenta nuevamente.")}})}}loadInventarioData(o){let e=o||(typeof this.inventarioId=="object"?this.inventarioId.id:this.inventarioId);e?this.inventarioService.getById(e).subscribe({next:t=>{this.inventarioForm.patchValue(t.data)},error:t=>{console.error("Error al cargar datos del inventario:",t)}}):console.error("ID del inventario no proporcionado")}evtSelectFile(o){let e=o.target.files?.[0];e&&this.inventarioForm.get("banner_url")?.setValue(e)}static{this.\u0275fac=function(e){return new(e||ue)(R(k))}}static{this.\u0275cmp=b({type:ue,selectors:[["app-editar-modal"]],viewQuery:function(e,t){if(e&1&&Z($e,5),e&2){let a;ee(a=te())&&(t.fileInput=a.first)}},inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:33,vars:7,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","top"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","imagen",1,"required","form-label"],["type","file","id","imagen","accept","image/*",1,"form-control",3,"change"],["for","nombre",1,"required","form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","descripcion",1,"required","form-label"],["rows","2","id","descripcion","formControlName","descripcion",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),s(4,"span",3)(5,"span",4),i()(),l(6," Editar Item "),i(),n(7,"button",5),p("click",function(){return t.close()}),n(8,"i",6),s(9,"span",3)(10,"span",4),i()()(),n(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),l(15,"Imagen"),i(),n(16,"input",11),p("change",function(u){return t.evtSelectFile(u)}),i()(),n(17,"div",9)(18,"label",12),l(19,"Nombre del Item"),i(),s(20,"input",13),i(),n(21,"div",9)(22,"label",14),l(23,"Descripci\xF3n"),i(),s(24,"textarea",15),i()()(),n(25,"div",16)(26,"button",17),p("click",function(){return t.close()}),l(27," Cancelar "),i(),n(28,"button",18),v(29,"async"),p("click",function(){return t.save()}),l(30," Guardar "),f(31,He,1,0,"span",19),v(32,"async"),i()()),e&2&&(m(12),d("formGroup",t.inventarioForm),m(16),d("disabled",t.inventarioForm.invalid||g(29,3,t.isLoading)),m(3),d("ngIf",g(32,5,t.isLoading)))},dependencies:[M,V,A,L,B,U,$,C,E,_]})}};le=F([j({checkProperties:!0}),q("design:paramtypes",[k])],le);function Je(r,o){r&1&&(n(0,"div")(1,"small",21),l(2,"El stock debe ser mayor que 0."),i()())}function We(r,o){r&1&&(n(0,"div")(1,"small",21),l(2,"El costo del stock debe ser un n\xFAmero."),i()())}function Ke(r,o){r&1&&s(0,"span",22)}var se=class fe{constructor(o){this.fb=o,this.modal=c(y),this.inventarioService=c(T),this.loadingService=c(S),this.isLoading=this.loadingService.isLoading,this.inventarioId="",this.onSaveComplete=new w,this.inventarioForm=this.fb.group({stock:["",[I.required,I.min(1)]],costo_stock:["",[I.required,I.min(0)]]})}ngOnInit(){typeof this.inventarioId=="string"?this.loadInventarioData():typeof this.inventarioId=="object"&&this.inventarioId.id?this.loadInventarioData(this.inventarioId.id):console.error("ID del inventario no proporcionado o no es una cadena",this.inventarioId)}loadInventarioData(o){let e=o||(typeof this.inventarioId=="object"?this.inventarioId.id:this.inventarioId);e?this.inventarioService.getById(e).subscribe({next:t=>{this.inventarioForm.patchValue({costo_stock:"",stock:""})},error:t=>{console.error("Error al cargar datos del inventario:",t)}}):console.error("ID del inventario no proporcionado")}close(){this.modal.dismissAll()}save(){if(!this.inventarioId){console.error("El inventario no tiene un ID v\xE1lido.");return}if(this.inventarioForm.invalid){console.error("El formulario no es v\xE1lido.");return}let o={id:this.inventarioId.toString(),stock:this.inventarioForm.get("stock")?.value,costo_stock:this.inventarioForm.get("costo_stock")?.value};this.inventarioService.addStock(o).subscribe({next:e=>{console.log("Stock agregado exitosamente:",e),this.close(),this.onSaveComplete.emit()},error:e=>{console.error("Error al agregar stock:",e)}})}static{this.\u0275fac=function(e){return new(e||fe)(R(k))}}static{this.\u0275cmp=b({type:fe,selectors:[["app-agregar-modal"]],inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:32,vars:9,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],[1,"form-group"],["for","stock",1,"form-label"],["id","stock","formControlName","stock","type","number","placeholder","Ingresa el stock",1,"form-control"],[4,"ngIf"],["for","costo_stock",1,"required","form-label"],["id","costo_stock","formControlName","costo_stock","type","number","step","0.01","placeholder","Ingresa el costo del stock",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){if(e&1&&(n(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),s(4,"span",4)(5,"span",5)(6,"span",6),i()(),l(7," A\xF1adir Stock "),i(),n(8,"button",7),p("click",function(){return t.close()}),n(9,"i",8),s(10,"span",4)(11,"span",5),i()()(),n(12,"div",9)(13,"form",10),p("ngSubmit",function(){return t.save()}),n(14,"div",11)(15,"label",12),l(16,"Stock"),i(),s(17,"input",13),f(18,Je,3,0,"div",14),i(),n(19,"div",11)(20,"label",15),l(21,"Costo del Stock"),i(),s(22,"input",16),f(23,We,3,0,"div",14),i()()(),n(24,"div",17)(25,"button",18),p("click",function(){return t.close()}),l(26,"Cancelar"),i(),n(27,"button",19),v(28,"async"),p("click",function(){return t.save()}),l(29," Guardar "),f(30,Ke,1,0,"span",20),v(31,"async"),i()()),e&2){let a,u;m(13),d("formGroup",t.inventarioForm),m(5),d("ngIf",((a=t.inventarioForm.get("stock"))==null?null:a.invalid)&&(((a=t.inventarioForm.get("stock"))==null?null:a.touched)||((a=t.inventarioForm.get("stock"))==null?null:a.dirty))),m(5),d("ngIf",((u=t.inventarioForm.get("costo_stock"))==null?null:u.invalid)&&(((u=t.inventarioForm.get("costo_stock"))==null?null:u.touched)||((u=t.inventarioForm.get("costo_stock"))==null?null:u.dirty))),m(4),d("disabled",t.inventarioForm.invalid||g(28,5,t.isLoading)),m(3),d("ngIf",g(31,7,t.isLoading))}},dependencies:[M,V,A,ie,L,B,U,$,C,E,_]})}};se=F([j({checkProperties:!0}),q("design:paramtypes",[k])],se);var Ye=()=>[_,oe],Ze=r=>[r];function et(r,o){if(r&1){let e=z();n(0,"ag-grid-angular",2),v(1,"async"),v(2,"async"),p("gridReady",function(a){N(e);let u=x();return D(u.gridReady(a))}),i()}if(r&2){let e=x();d("rowData",g(1,6,e.solicitudesList))("loading",g(2,8,e.isLoading))("columnDefs",e.colDefs)("enableCellTextSelection",!0)("localeText",e.localeText)("pagination",!0)}}function tt(r,o){r&1&&(n(0,"div",3)(1,"div",4)(2,"span",5),l(3,"Loading..."),i()()())}var Ge=(()=>{class r{constructor(){this.solicitudInventarioService=c(ne),this.isLoading=c(S).isLoading,this.theme=c(H),this.modal=c(y),this.localeText=J,this.solicitudesList=new K,this.colDefs=[{field:"personal_solicita.nombre",headerName:"Terapista",filter:!0},{field:"terapia.nombre",headerName:"Terapia",filter:!0},{field:"item.nombre",headerName:"Item",filter:!0},{field:"cantidad",headerName:"Cantidad",filter:!0},{field:"fecha_solicitud",headerName:"Fecha",filter:!0,valueFormatter:e=>new Date(e.value).toLocaleDateString("es-ES")},{field:"estado.nombre",headerName:"Estado",filter:!0}]}ngOnInit(){this.loadTabla()}fetchSolicitudes(){this.solicitudesList=this.solicitudInventarioService.cargarTodasLasSolicitudes().pipe(G(e=>e.data))}loadTabla(){this.fetchSolicitudes()}close(){this.modal.dismissAll()}gridReady(e){this.gridApi=e.api}ngOnDestroy(){}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=b({type:r,selectors:[["app-tabla-inventario"]],standalone:!0,features:[h],decls:6,vars:3,consts:[[1,"d-flex","flex-column","py-3","flex-column-fluid"],["id","myGrid",2,"height","calc(100dvh - 281px)",3,"ngClass"],[2,"width","100%","height","100%",3,"gridReady","rowData","loading","columnDefs","enableCellTextSelection","localeText","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1),f(2,et,3,10)(3,tt,4,0),X(4,2,Ye,3),Y(),i()()),t&2&&(m(),d("ngClass",P(1,Ze,a.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[C,Q,re]})}}return r})();var it=()=>[oe,_],nt=r=>[r];function ot(r,o){if(r&1&&(s(0,"ag-grid-angular",2),v(1,"async"),v(2,"async")),r&2){let e=x();d("rowData",g(1,6,e.stockTerapistas))("loading",g(2,8,e.isLoading))("columnDefs",e.colDefs)("enableCellTextSelection",!0)("localeText",e.localeText)("pagination",!0)}}function rt(r,o){r&1&&(n(0,"div",3)(1,"div",4)(2,"span",5),l(3,"Loading..."),i()()())}var Oe=(()=>{class r{constructor(){this.solicitudService=c(ne),this.stockTerapistas=new K,this.isLoading=c(S).isLoading,this.theme=c(H),this.localeText=J,this.colDefs=[{field:"nombre",headerName:"Terapista",filter:!0,cellClass:"fw-bold"},{field:"terapia",headerName:"Terapia",filter:!0},{field:"item",headerName:"Item",filter:"agNumberColumnFilter",cellClass:"fw-bold"},{field:"stock",headerName:"Stock Actual",filter:"agNumberColumnFilter"}]}ngOnInit(){this.fecthSolicitudes()}fecthSolicitudes(){this.stockTerapistas=this.solicitudService.stockTerapista({}).pipe(G(e=>e.data))}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=b({type:r,selectors:[["app-stock-terapistas"]],standalone:!0,features:[h],decls:6,vars:3,consts:[[1,"d-flex","flex-column","py-3","flex-column-fluid"],["id","myGrid",2,"height","calc(100dvh - 281px)",3,"ngClass"],[2,"width","100%","height","100%",3,"rowData","loading","columnDefs","enableCellTextSelection","localeText","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1),f(2,ot,3,10)(3,rt,4,0),X(4,2,it,3),Y(),i()()),t&2&&(m(),d("ngClass",P(1,nt,a.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[re,C,Q],encapsulation:2})}}return r})();function at(r,o){r&1&&s(0,"app-tabla-inventario")}function lt(r,o){r&1&&s(0,"app-stock-terapistas")}var qe=(()=>{class r{constructor(){this.modal=c(y)}close(){this.modal.dismissAll()}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=b({type:r,selectors:[["app-main-modal"]],standalone:!0,features:[h],decls:26,vars:3,consts:[["nav","ngbNav"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-parcel","text-gray-900","fs-2x",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],[1,"path4"],[1,"path5"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],["ngbNav","",1,"nav","nav-tabs","fw-medium","nav-line-tabs","nav-line-tabs-2x","fs-6"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"]],template:function(t,a){if(t&1){let u=z();n(0,"div",1)(1,"h4",2)(2,"span")(3,"i",3),s(4,"span",4)(5,"span",5)(6,"span",6)(7,"span",7)(8,"span",8),i()(),l(9," Manejo de Inventario "),i(),n(10,"button",9),p("click",function(){return N(u),D(a.close())}),n(11,"i",10),s(12,"span",4)(13,"span",5),i()()(),n(14,"div",11)(15,"ul",12,0)(17,"li",13)(18,"a",14),l(19,"Solictudes de Inventario"),i(),f(20,at,1,0,"ng-template",15),i(),n(21,"li",13)(22,"a",14),l(23,"Stock Terapistas"),i(),f(24,lt,1,0,"ng-template",15),i()(),s(25,"div",16),i()}if(t&2){let u=Se(16);m(17),d("ngbNavItem",1),m(4),d("ngbNavItem",2),m(4),d("ngbNavOutlet",u)}},dependencies:[Le,Me,Ne,Fe,Te,we,De,Ae,Ge,Oe]})}}return r})();var st=r=>({"img-inventory":r});function mt(r,o){r&1&&(n(0,"div",25)(1,"div",26)(2,"span",27),l(3,"Cargando..."),i()()())}function dt(r,o){if(r&1){let e=z();n(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),s(4,"img",32),i()(),n(5,"div",33)(6,"h5",34),l(7),i(),n(8,"p",35),l(9),i(),n(10,"p",35)(11,"strong"),l(12,"Stock:"),i(),l(13),i(),n(14,"div",36)(15,"button",37),p("click",function(){let a=N(e).$implicit,u=x();return D(u.openAgregarModal(a))}),s(16,"span",38),l(17," Agregar "),i(),n(18,"div",39)(19,"button",40),p("click",function(){let a=N(e).$implicit,u=x();return D(u.openEditarModal(a))}),s(20,"span",41),i(),n(21,"button",42),p("click",function(){let a=N(e).$implicit,u=x();return D(u.openBorrarModal(a))}),s(22,"span",43),i()()()()()()}if(r&2){let e=o.$implicit,t=x();m(3),d("ngClass",P(6,st,e.banner_url==null?null:e.banner_url.includes("default.png"))),m(),me("src",e.banner_url!=null&&e.banner_url.includes("default.png")?t.banner_url:e.banner_url,_e),me("alt",e.nombre),m(3),de(e.nombre),m(2),de(e.descripcion),m(4),Ie(" ",e.stock,"")}}var Re=class ve{constructor(){this.inventarioService=c(T),this.isLoading=c(S).isLoading,this.theme=c(H),this.modal=c(y),this.banner_url="https://cdn-icons-png.flaticon.com/512/9573/9573235.png",this.localeText=J,this.searchControl=new xe(""),this.inventarioSubject=new ge([]),this.inventarioList=be([this.inventarioSubject.asObservable(),this.searchControl.valueChanges.pipe(he(this.searchControl.value))]).pipe(G(([o,e])=>e?o.filter(t=>t.nombre.toLowerCase().includes(e.toLowerCase())):o))}ngOnInit(){this.loadTabla()}loadTabla(){this.inventarioService.getAll().pipe(G(o=>o.data),Be(this)).subscribe(o=>{this.inventarioSubject.next(o)})}openCrearModal(){this.modal.open(ae,{size:"350px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.loadTabla()})}openEditarModal(o){let e=this.modal.open(le,{centered:!0});e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.loadTabla()})}openBorrarModal(o){if(!o.id)return;let e=this.modal.open(je,{size:"300px",animation:!0,centered:!0});e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.loadTabla()})}openAgregarModal(o){if(!o.id)return;let e=this.modal.open(se,{size:"300px",animation:!0,centered:!0});e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.loadTabla()})}openTablaInventarioModal(){this.modal.open(qe,{size:"xl",animation:!0,centered:!0})}ngOnDestroy(){}static{this.\u0275fac=function(e){return new(e||ve)}}static{this.\u0275cmp=b({type:ve,selectors:[["app-inventario"]],standalone:!0,features:[h],decls:34,vars:7,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"d-flex","flex-wrap","gap-3","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative","flex-grow-1","flex-md-grow-0"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","item-search","name","search","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"formControl"],[1,"d-flex","flex-grow-1","flex-md-grow-0","justify-content-between","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],[1,"btn","btn-secondary",3,"click"],[1,"ki-solid","ki-abstract-28","fs-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],["class","loading-container d-flex justify-content-center align-items-center",4,"ngIf"],[1,"row","my-5","gap-4"],["class","col-md-4 border",4,"ngFor","ngForOf"],[1,"loading-container","d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-md-4","border"],[1,"card"],[1,"position-relative"],[1,"image-container",2,"overflow","hidden",3,"ngClass"],[1,"card-img-top",2,"width","100%","height","auto",3,"src","alt"],[1,"p-6"],[1,"card-title","fs-1"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center","gap-2"],["type","button",1,"btn","btn-light-primary","btn-lg","d-flex","justify-content-center","align-items-center",3,"click"],[1,"ki-solid","ki-plus","fs-4"],[1,"d-flex","gap-1","align-items-center"],["type","button",1,"btn","btn-icon","btn-sm","bg-success",2,"margin-right","5px",3,"click"],[1,"ki-solid","ki-pencil","text-white"],["type","button",1,"btn","btn-icon","btn-sm","btn-danger",3,"click"],[1,"ki-solid","ki-trash","text-white"]],template:function(e,t){e&1&&(n(0,"app-header"),Ce(1,0),n(2,"h1",1)(3,"span",2),l(4,"Inventario"),i()(),ye(),i(),n(5,"div",3)(6,"div",4)(7,"div",5)(8,"form",6),s(9,"input",7),n(10,"i",8),s(11,"span",9)(12,"span",10),i(),s(13,"input",11),i(),n(14,"div",12)(15,"button",13),p("click",function(){return t.loadTabla()}),n(16,"span",14),s(17,"span",15),n(18,"span",16),l(19,"Actualizar"),i()()(),n(20,"button",17),p("click",function(){return t.openTablaInventarioModal()}),s(21,"span",18),n(22,"span",16),l(23,"Registros"),i()(),n(24,"button",19),p("click",function(){return t.openCrearModal()}),n(25,"span",14),s(26,"span",20),n(27,"span",21),l(28,"A\xF1adir"),i()()()()(),f(29,mt,4,0,"div",22),v(30,"async"),n(31,"div",23),f(32,dt,23,8,"div",24),v(33,"async"),i()()()),e&2&&(m(13),d("formControl",t.searchControl),m(16),d("ngIf",g(30,3,t.isLoading)),m(3),d("ngForOf",g(33,5,t.inventarioList)))},dependencies:[C,Q,ke,E,_,Ve,M,V,A,L,B,Ee]})}};Re=F([j()],Re);export{Re as InventarioComponent};
