import{a as H,b as V,c as U,d as W}from"./chunk-67I2BP6H.js";import"./chunk-VXDGRBU5.js";import{a as j}from"./chunk-C62D5LBB.js";import"./chunk-QHO6RQLH.js";import"./chunk-POZRL2CU.js";import"./chunk-SX6LGTBN.js";import"./chunk-FLXP5CLU.js";import"./chunk-C3PJ6G3N.js";import"./chunk-GT4JH6HJ.js";import"./chunk-EBZKSOFQ.js";import{a as q}from"./chunk-U2EAJGNN.js";import{b as O}from"./chunk-ESGQTXWU.js";import{o as I}from"./chunk-SZA4NEXD.js";import{a as z}from"./chunk-5ZMKPZZY.js";import"./chunk-3IC3XWDF.js";import{a as B,b as G}from"./chunk-T3S5D2ZO.js";import{a as L}from"./chunk-H7V4WWIX.js";import"./chunk-GKZUPR7X.js";import"./chunk-DA7F7PFS.js";import{j as w,m as N,t as F,v as R}from"./chunk-IVHFDWNE.js";import{Ba as C,Bc as m,C as x,Jc as k,La as b,Lc as A,Ma as y,Mb as S,Qb as D,Qc as f,Rc as u,Sb as P,Vb as c,ec as n,fc as i,gc as l,hc as T,ic as E,kc as M,n as g,qc as s,rc as p,v as _,wb as v,xa as r}from"./chunk-MKY54U27.js";var Q=()=>[F,import("./chunk-QD4DKI47.js").then(a=>a.AgGridAngular)],X=a=>[a];function Y(a,e){if(a&1){let t=M();n(0,"ag-grid-angular",22),f(1,"async"),f(2,"async"),s("gridReady",function(d){b(t);let K=p();return y(K.gridReady(d))}),i()}if(a&2){let t=p();c("rowData",u(1,7,t.pacientesList))("columnDefs",t.colDefs)("loading",u(2,9,t.isLoading))("localeText",t.localeText)("enableCellTextSelection",!0)("ariaHidden",!0)("pagination",!0)}}function Z(a,e){a&1&&(n(0,"div",23)(1,"div",24)(2,"span",25),m(3,"Loading..."),i()()())}var J=class h{constructor(){this.modal=r(I),this.pacienteService=r(j),this.theme=r(L),this.isLoading=r(z).isLoading,this.localeText=q,this.pacientesList=new g,this.colDefs=[{field:"nombre",headerName:"Nombres",filter:!0},{field:"dni",headerName:"DNI",filter:!0},{field:"genero.nombre",headerName:"G\xE9nero"},{field:"fecha_nacimiento",headerName:"Fecha Nacimiento",filter:"agDateColumnFilter",valueFormatter:e=>w(e.value,"dd/MM/yyyy","en")},{field:"diagnostico",headerName:"Diagn\xF3stico",filter:!0},{field:"user.name",headerName:"Apoderado",filter:!0},{field:"parentesco.nombre",headerName:"Parentesco",filter:!0},{field:"colegio",headerName:"Colegio",filter:!0},{headerName:"Acciones",cellRenderer:W,cellRendererParams:{onEdit:e=>this.openEditModal(e),onDelete:e=>this.openDeleteModal(e)},maxWidth:100,resizable:!1}]}ngOnInit(){this.fetchPacientes()}fetchPacientes(){this.pacientesList=this.pacienteService.getAll().pipe(G(this),x(e=>e.data||[]))}loadTabla(){this.fetchPacientes()}openCreateModal(){this.modal.open(H,{size:"300px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchPacientes()})}gridReady(e){this.gridApi=e.api}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("paciente-search").value)}openEditModal(e){let t=this.modal.open(V,{size:"300px",animation:!0,centered:!0});t.componentInstance.paciente=e,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchPacientes()})}openDeleteModal(e){let t=this.modal.open(U,{size:"300px",animation:!0,centered:!0});t.componentInstance.pacienteId=e.id_paciente,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchPacientes()})}close(){this.modal.dismissAll()}static{this.\u0275fac=function(t){return new(t||h)}}static{this.\u0275cmp=C({type:h,selectors:[["app-pacientes"]],standalone:!0,features:[k],decls:31,vars:3,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","gap-3","justify-content-between"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","paciente-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-stretch","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2","d-none","d-md-block"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],[2,"height","calc(100dvh - 281px)",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","loading","localeText","enableCellTextSelection","ariaHidden","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,o){t&1&&(n(0,"app-header"),T(1,0),n(2,"h1",1)(3,"span",2),m(4,"Pacientes"),i()(),E(),i(),n(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),l(10,"input",8),n(11,"i",9),l(12,"span",10)(13,"span",11),i(),n(14,"input",12),s("input",function(){return o.onFilterTextBoxChanged()}),i()(),n(15,"div",13)(16,"button",14),s("click",function(){return o.loadTabla()}),n(17,"span",15),l(18,"span",16),n(19,"span",17),m(20,"Actualizar"),i()()(),n(21,"button",18),s("click",function(){return o.openCreateModal()}),n(22,"span",15),l(23,"span",19),n(24,"span",20),m(25,"A\xF1adir"),i()()()()(),n(26,"div",21),S(27,Y,3,11)(28,Z,4,0),D(29,27,Q,28),P(),i()()()()),t&2&&(v(26),c("ngClass",A(1,X,o.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[R,N,O]})}};J=_([B()],J);export{J as PacientesComponent};
