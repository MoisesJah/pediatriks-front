import{a as U}from"./chunk-E6U7EDCE.js";import{a as G,b as j,c as H,d as $}from"./chunk-OBFQ6BC5.js";import"./chunk-VQB7VK3Y.js";import{a as q}from"./chunk-QSXVNZMY.js";import"./chunk-C3PJ6G3N.js";import"./chunk-GT4JH6HJ.js";import"./chunk-EBZKSOFQ.js";import{a as W}from"./chunk-U2EAJGNN.js";import{b as V}from"./chunk-ESGQTXWU.js";import{o as L}from"./chunk-SZA4NEXD.js";import{a as O}from"./chunk-5ZMKPZZY.js";import"./chunk-3IC3XWDF.js";import{a as B,b as P}from"./chunk-T3S5D2ZO.js";import{a as N}from"./chunk-H7V4WWIX.js";import"./chunk-GKZUPR7X.js";import"./chunk-DA7F7PFS.js";import{m as F,t as A,v as I}from"./chunk-IVHFDWNE.js";import{Ba as v,Bc as p,C as T,Jc as E,La as u,Lc as k,Ma as f,Mb as w,Qb as S,Qc as g,Rc as _,Sb as D,Vb as h,ec as i,fc as n,gc as s,hc as z,ic as M,kc as R,n as C,qc as d,rc as m,v as b,wb as y,xa as l}from"./chunk-MKY54U27.js";var K=()=>[A,import("./chunk-QD4DKI47.js").then(a=>a.AgGridAngular)],Q=a=>[a];function X(a,e){if(a&1){let t=R();i(0,"ag-grid-angular",22),g(1,"async"),g(2,"async"),d("gridReady",function(o){u(t);let c=m();return f(c.gridReady(o))})("gridReady",function(o){u(t);let c=m();return f(c.gridReady(o))}),n()}if(a&2){let t=m();h("rowData",_(1,7,t.terapiasList))("columnDefs",t.colDefs)("enableCellTextSelection",!0)("localeText",t.localeText)("ariaHidden",!0)("pagination",!0)("loading",_(2,9,t.isLoading))}}function Y(a,e){a&1&&(i(0,"div",23)(1,"div",24)(2,"span",25),p(3,"Loading..."),n()()())}var J=class x{constructor(){this.modal=l(L),this.terapias=l(q),this.theme=l(N),this.isLoading=l(O).isLoading,this.terapiasList=new C,this.localeText=W,this.colDefs=[{headerName:"Color",field:"color",maxWidth:75,filter:!1,cellRenderer:e=>`<div class="h-20px w-20px mt-3 rounded-circle" style="background-color: ${e.value}"></div>`},{field:"nombre",headerName:"Nombre",filter:!0,resizable:!0},{field:"descripcion",headerName:"Descripci\xF3n",filter:!0,resizable:!0},{field:"precio",headerName:"Precio",maxWidth:120,filter:"agNumberColumnFilter",cellClass:"fw-bold",valueFormatter:e=>U(e.value),resizable:!0},{headerName:"Duraci\xF3n",field:"duracion",maxWidth:150,filter:"agNumberColumnFilter",valueFormatter:e=>e.value?`${e.value.substring(0,5)} min`:"",resizable:!0},{headerName:"Acciones",cellRenderer:$,cellRendererParams:{onEdit:e=>this.openEditModal(e),onDelete:e=>this.openDeleteModal(e)},maxWidth:100,resizable:!1}]}ngOnInit(){this.fetchTerapias()}fetchTerapias(){this.terapiasList=this.terapias.getAll().pipe(T(e=>e.data),P(this))}gridReady(e){this.gridApi=e.api,this.sizeColumnsToFit()}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("terapia-search").value)}ngOnDestroy(){}loadTabla(){this.fetchTerapias()}openCreateModal(){this.modal.open(G,{size:"300px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openEditModal(e){let t=this.modal.open(j,{size:"300px",animation:!0,centered:!0});t.componentInstance.terapiaId=e.id_terapia,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openDeleteModal(e){let t=this.modal.open(H,{size:"300px",animation:!0,centered:!0});t.componentInstance.terapiaId=e.id_terapia,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}static{this.\u0275fac=function(t){return new(t||x)}}static{this.\u0275cmp=v({type:x,selectors:[["app-terapias"]],standalone:!0,features:[E],decls:31,vars:3,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","terapia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],[2,"height","calc(100dvh - 281px)",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","enableCellTextSelection","localeText","ariaHidden","pagination","loading"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,r){t&1&&(i(0,"app-header"),z(1,0),i(2,"h1",1)(3,"span",2),p(4,"Terapias"),n()(),M(),n(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),s(10,"input",8),i(11,"i",9),s(12,"span",10)(13,"span",11),n(),i(14,"input",12),d("input",function(){return r.onFilterTextBoxChanged()}),n()(),i(15,"div",13)(16,"button",14),d("click",function(){return r.loadTabla()}),i(17,"span",15),s(18,"span",16),i(19,"span",17),p(20,"Actualizar"),n()()(),i(21,"button",18),d("click",function(){return r.openCreateModal()}),i(22,"span",15),s(23,"span",19),i(24,"span",20),p(25,"A\xF1adir"),n()()()()(),i(26,"div",21),w(27,X,3,11)(28,Y,4,0),S(29,27,K,28),D(),n()()()()),t&2&&(y(26),h("ngClass",k(1,Q,r.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[I,F,V],styles:["table[_ngcontent-%COMP%]   td[id=descripcion][_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}"]})}};J=b([B({checkProperties:!0})],J);export{J as TerapiasComponent};
