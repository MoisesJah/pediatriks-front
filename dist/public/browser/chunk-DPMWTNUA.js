import{a as ne,b as ae,c as se,d as de,e as me,f as F}from"./chunk-B5356M2U.js";import{a as j}from"./chunk-WBDH6UUX.js";import"./chunk-S4MY4NYX.js";import{b as w}from"./chunk-XIUWHSJZ.js";import{ib as x,jb as le,lb as pe}from"./chunk-MAAP3SOV.js";import{a as ce}from"./chunk-X7PO4PNB.js";import"./chunk-EJWSEBOW.js";import{a as ie}from"./chunk-WXQDA2BM.js";import{a as re}from"./chunk-PZER2UBN.js";import"./chunk-4JZDPN5V.js";import"./chunk-Q5L65FNE.js";import{f as oe}from"./chunk-C4F35XIX.js";import"./chunk-XCZLRYQC.js";import"./chunk-GT4JH6HJ.js";import"./chunk-DUBUW4ZU.js";import{a as ee,b as te}from"./chunk-FKRAWMO5.js";import{o as b,v as y}from"./chunk-FWMYVGKL.js";import{a as $}from"./chunk-PQDQNIDX.js";import"./chunk-OIXA5WM3.js";import{A as M,d as J,f as K,i as X,k as Y,v,x as C}from"./chunk-MFZOMSUD.js";import{Ab as m,Ac as f,B as N,Ba as d,Bc as U,C as V,Fa as G,Ga as p,Hc as Z,I as l,Lc as u,Mc as g,Ob as k,Sb as z,Ub as B,Xb as R,a as L,b as O,bd as h,ec as a,fc as s,gc as D,ha as A,hc as H,ic as q,rc as _,t as T,va as c,wc as E,xc as P,yc as I,zb as Q}from"./chunk-JQJUQ5FW.js";var fe=[{id:0,nombre:"Cronograma",tag:"general"},{id:1,nombre:"Psicologia 1",tag:"psicologia-1"},{id:2,nombre:"Psicologia 2",tag:"psicologia-2"},{id:3,nombre:"Lenguaje 1",tag:"lenguaje-1"},{id:4,nombre:"Lenguaje 2",tag:"lenguaje-2"},{id:5,nombre:"Lenguaje 3",tag:"lenguaje-3"},{id:6,nombre:"Ocupacional 1",tag:"ocupacional-1"},{id:7,nombre:"Ocupacional 2",tag:"ocupacional-2"},{id:8,nombre:"Ocupacional 3",tag:"ocupacional-3"},{id:9,nombre:"Fisica 1",tag:"fisica-1"},{id:10,nombre:"Fisica 2",tag:"fisica-2"},{id:11,nombre:"Fisica 3",tag:"fisica-3"},{id:12,nombre:"Neuro",tag:"neuro"},{id:13,nombre:"Pediasuit",tag:"pediasuit"}];var ve=["dropdown"],Ce=()=>[J,K,x,X],be=t=>({"opacity-50":t});function ye(t,e){if(t&1&&(D(0,"full-calendar",12),u(1,"async"),u(2,"async"),u(3,"async")),t&2){let i=_(2);R("ngClass",Z(10,be,g(1,4,i.isLoading)))("loading",g(2,6,i.isLoading))("events",g(3,8,i.citasEvent))("options",i.calendarOptions)}}function xe(t,e){if(t&1&&k(0,ye,4,12,"full-calendar",11),t&2){let i=_();R("ngIf",i.calendarVisible)}}function we(t,e){t&1&&(a(0,"div",13)(1,"div",14)(2,"span",15),f(3,"Loading..."),s()()())}var n,S=(n=class{get bodyParams(){return{startWeek:this.startWeek,endWeek:this.endWeek}}constructor(e,i,o,r){this.changeDetector=e,this.router=i,this.modalService=o,this.route=r,this.citasService=d(ce),this.terapiasService=d(re),this.isLoading=d($).isLoading,this.cronogramas=fe,this.citasEvent=new T,this.terapiasList=[],this.subscriptions=[],this.listLoading=!1,this.startWeek=F().startOfWeek,this.endWeek=F().endOfWeek,this.calendarVisible=!0,this.calendarOptions={plugins:[ne,ae,se,de],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},aspectRatio:1,allDaySlot:!1,expandRows:!0,slotDuration:"00:45:00",slotMinTime:"08:00",slotMaxTime:"20:01:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"narrow"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},initialView:"timeGridWeek",weekends:!0,editable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),locale:me,datesSet:W=>{this.startWeek=W.view.activeStart,this.endWeek=W.view.activeEnd,this.loadFilteredCitas()}},this.currentEvents=[]}ngOnInit(){}ngAfterViewInit(){}loadFilteredCitas(){this.dropdown.selectedItems.subscribe(e=>{e.length>0&&this.loadCitas(O(L({},this.bodyParams),{filter:!0,idsPersonal:e})),e.length===0&&this.loadCitas(this.bodyParams)})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadCitas(e){this.citasEvent=this.citasService.getAll(e).pipe(A(1),l(i=>i.data),te(this))}handleCalendarToggle(){this.calendarVisible=!this.calendarVisible}handleWeekendsToggle(){let{calendarOptions:e}=this;e.weekends=!e.weekends}handleDateSelect(e){this.modalService.open(j,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventForm.patchValue({fecha_inicio:e.startStr.substring(0,10),hora_inicio:e.startStr.substring(11,16),hora_fin:e.endStr.substring(11,16)})}handleEventClick(e){let i=e.event,o=this.modalService.open(pe,{centered:!0,size:"100",scrollable:!0,backdrop:"static"});o.componentInstance.eventId=i.id,o.componentInstance.citaId=i.extendedProps.id_cita,o.componentInstance.eventUpdated.subscribe(()=>{this.loadCitas(this.bodyParams)})}openModal(){this.modalService.open(j,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventSubmitted.subscribe(()=>{this.loadCitas(this.bodyParams)})}},n.\u0275fac=function(i){return new(i||n)(m(h),m(C),m(b),m(v))},n.\u0275cmp=G({type:n,selectors:[["app-reservar-cita"]],viewQuery:function(i,o){if(i&1&&(E(x,5),E(ve,7)),i&2){let r;P(r=I())&&(o.fullCalendarComponent=r.first),P(r=I())&&(o.dropdown=r.first)}},decls:20,vars:1,consts:[["dropdown",""],["header-title",""],[1,"d-flex","flex-column","text-white","fw-bold","my-1"],[1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-header"],[1,"card-title","fw-bold"],[1,"card-toolbar","d-flex"],[1,"card-body",2,"border","none","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)","border-radius","0 0 15px 15px"],[1,"demo-app-main"],[3,"ngClass","loading","events","options",4,"ngIf"],[3,"ngClass","loading","events","options"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,o){i&1&&(a(0,"app-header"),H(1,1),a(2,"h1",2),f(3," Cronograma General "),s(),q(),s(),a(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),f(9),s(),a(10,"div",8)(11,"div"),D(12,"app-dropdown",null,0),s()()(),a(14,"div",9)(15,"div",10),k(16,xe,1,1)(17,we,4,0),z(18,16,Ce,null,17),B(),s()()()()()),i&2&&(Q(9),U(o.cronogramaActual==null?null:o.cronogramaActual.nombre))},dependencies:[y,w]}),n);S=N([ee({checkProperties:!0}),V("design:paramtypes",[h,C,b,v])],S);var ge=(t,e)=>d(ie).getHorarios(t.paramMap.get("terapist")).pipe(l(o=>o.data));var Se=[{path:"",component:S},{path:":tag",loadComponent:()=>import("./chunk-NIPFGN4J.js").then(t=>t.CronogramaComponent)},{path:":tag/:terapist",resolve:{personal:ge},loadComponent:()=>import("./chunk-3KEXMWIE.js").then(t=>t.EspecialistaComponent)}],he=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p({type:e}),e.\u0275inj=c({imports:[M.forChild(Se),M]});let t=e;return t})();var bt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p({type:e}),e.\u0275inj=c({imports:[Y,he,le,y,oe,w]});let t=e;return t})();export{bt as ReservarCitaModule};
