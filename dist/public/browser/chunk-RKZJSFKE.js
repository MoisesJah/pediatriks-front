import{a as j}from"./chunk-4TQV4WQK.js";import{a as Ne,b as Ee,c as De,d as Ae}from"./chunk-A2PIED2A.js";import{b as Te}from"./chunk-JBNC72Z7.js";import"./chunk-QA4O23TC.js";import{o as E,p as he,q as be,r as _e,s as ve,t as xe,u as Ce,v as Se,w as ye}from"./chunk-CUMGWIKM.js";import{A as ge,c as le,d as me,e as pe,f as de,k as ce,o as ue,r as fe,y as R}from"./chunk-OSUEIBEK.js";import{a as U}from"./chunk-UZO5QNZS.js";import{c as ke,d as we}from"./chunk-HU6BYMHG.js";import{a as O}from"./chunk-U2EAJGNN.js";import{a as D}from"./chunk-4TSZW343.js";import{a as A,b as x}from"./chunk-OO4BC6LN.js";import{a as z}from"./chunk-67M5LFVM.js";import{a as se}from"./chunk-GKZUPR7X.js";import{b as re}from"./chunk-QUGPZPJP.js";import{m as y,t as T,v as N}from"./chunk-O2FCGDZ2.js";import{$b as ie,Ac as oe,Ba as f,Bc as r,C as F,Cc as W,Dc as w,Jc as g,La as L,Lc as G,Ma as M,Mb as b,Qb as I,Qc as _,Rc as v,Sb as B,Ua as ee,Vb as p,ec as i,fc as a,gc as l,hc as ne,ic as ae,kc as P,n as C,qa as Y,qc as d,rc as u,v as S,w as X,wa as Z,wb as s,xa as c,xb as te}from"./chunk-H565K2KG.js";var Fe=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${se.apiUrl}/personal-permiso`}getAll(){return this.http.get(`${this.apiUrl}/list`)}getById(e){return this.http.get(`${this.apiUrl}/list/${e}`)}create(e){return this.http.post(`${this.apiUrl}/create`,e)}update(e,o){return this.http.post(`${this.apiUrl}/edit/${e}`,o)}delete(e){return this.http.delete(`${this.apiUrl}/delete/${e}`)}static{this.\u0275fac=function(o){return new(o||t)(Z(re))}}static{this.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var q=(()=>{class t{agInit(e){this.openModal=e.openModal}refresh(e){return!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-update-btn"]],standalone:!0,features:[g],decls:2,vars:0,consts:[["type","button",1,"btn","btn-success","btn-sm",3,"click"]],template:function(o,m){o&1&&(i(0,"button",0),d("click",function(){return m.openModal()}),r(1,"Actualizar"),a())},encapsulation:2})}}return t})();var Ie=()=>[import("./chunk-E54JKWWL.js").then(t=>t.AgGridAngular),T],Be=t=>[t];function Pe(t,n){if(t&1){let e=P();i(0,"ag-grid-angular",18),_(1,"async"),_(2,"async"),d("gridReady",function(m){L(e);let h=u();return M(h.onGridReady(m))}),a()}if(t&2){let e=u();p("rowData",v(1,7,e.permisosList))("columnDefs",e.colDefs)("loading",v(2,9,e.isLoading))("localeText",e.localeText)("enableCellTextSelection",!0)("ariaHidden",!0)("pagination",!0)}}function Ge(t,n){t&1&&(i(0,"div",19)(1,"div",20)(2,"span",21),r(3,"Loading..."),a()()())}var V=class J{constructor(){this.permisoService=c(Fe),this.modal=c(E),this.isLoading=c(D).isLoading,this.theme=c(z),this.localeText=O,this.permisosList=new C,this.colDefs=[{field:"personal.nombre",headerName:"Terapista",filter:!0},{field:"personal.terapia.nombre",headerName:"Terapia",filter:!0},{field:"fecha",headerName:"Fecha",filter:"agDateColumnFilter",valueFormatter:n=>U(n.value)},{field:"status.nombre",headerName:"Tipo de Permiso",filter:!0},{field:"observaciones",headerName:"Notas",filter:!0}]}ngOnInit(){this.loadPermisos()}loadPermisos(){this.permisosList=this.permisoService.getAll().pipe(F(n=>n.data),x(this))}loadTabla(){this.loadPermisos()}onGridReady(n){this.gridApi=n.api}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("asistencia-search").value)}close(){this.modal.dismissAll()}openCreateModal(){this.modal.open(q,{size:"xl"})}static{this.\u0275fac=function(e){return new(e||J)}}static{this.\u0275cmp=f({type:J,selectors:[["app-tabla-permisos"]],standalone:!0,features:[g],decls:25,vars:3,consts:[[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","gap-3","justify-content-between"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","asistencia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-stretch","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2","d-none","d-md-block"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],[2,"height","calc(100dvh - 281px)",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","loading","localeText","enableCellTextSelection","ariaHidden","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),l(4,"input",4),i(5,"i",5),l(6,"span",6)(7,"span",7),a(),i(8,"input",8),d("input",function(){return o.onFilterTextBoxChanged()}),a()(),i(9,"div",9)(10,"button",10),d("click",function(){return o.loadTabla()}),i(11,"span",11),l(12,"span",12),i(13,"span",13),r(14,"Actualizar"),a()()(),i(15,"button",14),d("click",function(){return o.openCreateModal()}),i(16,"span",11),l(17,"span",15),i(18,"span",16),r(19,"A\xF1adir"),a()()()()(),i(20,"div",17),b(21,Pe,3,11)(22,Ge,4,0),I(23,21,Ie,22),B(),a()()()),e&2&&(s(20),p("ngClass",G(1,Be,o.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[N,y],encapsulation:2})}};V=S([A()],V);function Re(t,n){if(t&1&&(i(0,"span",0),r(1),a()),t&2){let e=u();s(),w(" ",e.status," ")}}function ze(t,n){if(t&1&&(i(0,"span",1),r(1),a()),t&2){let e=u();s(),w(" ",e.status," ")}}function Oe(t,n){if(t&1&&(i(0,"span",2),r(1),a()),t&2){let e=u();s(),w(" ",e.status," ")}}function Ue(t,n){if(t&1&&(i(0,"span",3),r(1),a()),t&2){let e=u();s(),w(" ",e.status," ")}}var Me=(()=>{class t{constructor(){this.status=""}agInit(e){this.status=e.data.status.nombre}refresh(e){return!1}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-status-badge"]],standalone:!0,features:[g],decls:4,vars:1,consts:[[1,"badge","text-capitalize","fs-7","badge-light-success","rounded-pill"],[1,"badge","text-capitalize","fs-7","badge-light-danger","rounded-pill"],[1,"badge","text-capitalize","fs-7","badge-light-warning","rounded-pill"],[1,"badge","text-capitalize","fs-7","badge-light-twitter","rounded-pill"]],template:function(o,m){if(o&1&&b(0,Re,2,1,"span",0)(1,ze,2,1,"span",1)(2,Oe,2,1,"span",2)(3,Ue,2,1,"span",3),o&2){let h;ie((h=m.status)==="asisti\xF3"?0:h==="inasistencia"?1:h==="tardanza"?2:h==="justificado"?3:-1)}},encapsulation:2})}}return t})();function je(t,n){if(t&1&&(i(0,"div",19),l(1,"span",20),i(2,"span",21),r(3),a()()),t&2){let e=n.item,o=u();s(),p("ngClass",o.getIcon(e.nombre)),s(2),W(e.nombre)}}function qe(t,n){if(t&1&&(i(0,"div",19),l(1,"span",20),i(2,"span",21),r(3),a()()),t&2){let e=n.item,o=u();s(),p("ngClass",o.getIcon(e.nombre)),s(2),W(e.nombre)}}var $=class K{constructor(n){this.fb=n,this.modal=c(E),this.isLoading=c(D).isLoading,this.asistenciaService=c(j),this.id_asistencia="",this.onSaveComplete=new ee,this.statusList=new C,this.form=this.fb.group({id_status:[null,me.required],observaciones:[""]})}ngAfterViewInit(){this.form.valueChanges.subscribe(n=>console.log(n))}getIcon(n){switch(n){case"asisti\xF3":return"h-10px w-10px bg-success rounded-pill";case"tardanza":return"h-10px w-10px bg-warning rounded-pill";case"inasistencia":return"h-10px w-10px bg-danger rounded-pill";case"justificado":return"h-10px w-10px bg-primary bg-opacity-75 rounded-pill";default:return""}}ngOnInit(){this.getStatusList()}close(){this.modal.dismissAll()}update(){this.form.valid&&this.asistenciaService.update(this.form.value,this.id_asistencia).pipe(x(this)).subscribe({next:n=>{this.onSaveComplete.emit(),this.close()},error:n=>{console.log(n)}})}getStatusList(){this.statusList=this.asistenciaService.getStatusList().pipe(x(this))}static{this.\u0275fac=function(e){return new(e||K)(te(R))}}static{this.\u0275cmp=f({type:K,selectors:[["app-edit-status"]],outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[g],decls:31,vars:11,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","status",1,"form-label","required"],["bindValue","id","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_status",3,"items","loading","loadingText"],["ng-option-tmp",""],["ng-label-tmp",""],["for","observaciones",1,"form-label"],["formControlName","observaciones","id","observaciones","rows","3",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"d-flex","align-items-center","gap-2"],[3,"ngClass"],[1,"fw-medium","text-capitalize"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),l(4,"span",3)(5,"span",4),a()(),r(6," Actualizar Status "),a(),i(7,"button",5),d("click",function(){return o.close()}),i(8,"i",6),l(9,"span",3)(10,"span",4),a()()(),i(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),r(15,"Status"),a(),i(16,"ng-select",11),_(17,"async"),_(18,"async"),b(19,je,4,2,"ng-template",12)(20,qe,4,2,"ng-template",13),a()(),i(21,"div",9)(22,"label",14),r(23,"Notas:"),a(),l(24,"textarea",15),a()()(),i(25,"div",16)(26,"button",17),d("click",function(){return o.close()}),r(27,"Cerrar"),a(),i(28,"button",18),_(29,"async"),d("click",function(){return o.update()}),r(30,"Guardar "),a()()),e&2&&(s(12),p("formGroup",o.form),s(4),p("items",v(17,5,o.statusList))("loading",v(18,7,o.isLoading))("loadingText","Cargando..."),s(12),p("disabled",o.form.invalid||v(29,9,o.isLoading)))},dependencies:[N,y,T,ge,ce,le,pe,de,ue,fe,Ae,De,Ne,Ee],encapsulation:2})}};$=S([A(),X("design:paramtypes",[R])],$);var Ve=()=>[T,ke],$e=t=>[t];function He(t,n){if(t&1){let e=P();i(0,"ag-grid-angular",15),_(1,"async"),_(2,"async"),d("gridReady",function(m){L(e);let h=u();return M(h.onGridReady(m))}),a()}if(t&2){let e=u();p("rowData",v(1,7,e.asistenciaList))("columnDefs",e.colDefs)("loading",v(2,9,e.isLoading))("localeText",e.localeText)("enableCellTextSelection",!0)("ariaHidden",!0)("pagination",!0)}}function We(t,n){t&1&&(i(0,"div",16)(1,"div",17)(2,"span",18),r(3,"Loading..."),a()()())}var H=class Q{constructor(){this.asistenciaService=c(j),this.isLoading=c(D).isLoading,this.theme=c(z),this.modal=c(E),this.localeText=O,this.asistenciaList=new C,this.colDefs=[{field:"personal.nombre",headerName:"Terapista",filter:!0},{field:"personal.terapia.nombre",headerName:"Terapia",filter:!0},{field:"fecha",headerName:"Fecha",filter:"agDateColumnFilter",valueFormatter:n=>U(n.value)},{field:"hora_asistencia",headerName:"Hora de Asistencia",filter:"agDateColumnFilter"},{field:"status.nombre",headerName:"Status",filter:!0,cellRenderer:Me},{field:"observaciones",headerName:"Notas",filter:!0},{headerName:"Acciones",cellRendererParams:n=>({openModal:()=>this.openUpdateModal(n.data.id_asistencia)}),cellRenderer:q,resizable:!1,maxWidth:200}]}ngOnInit(){this.loadAsistencias()}loadAsistencias(){this.asistenciaList=this.asistenciaService.getAll().pipe(F(n=>n.data),x(this))}loadTabla(){this.loadAsistencias()}onGridReady(n){this.gridApi=n.api}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("asistencia-search").value)}openUpdateModal(n){let e=this.modal.open($,{centered:!0,backdrop:"static"});e.componentInstance.id_asistencia=n,e.componentInstance.onSaveComplete.subscribe(()=>{this.loadTabla()})}static{this.\u0275fac=function(e){return new(e||Q)}}static{this.\u0275cmp=f({type:Q,selectors:[["app-asistencia"]],standalone:!0,features:[g],decls:20,vars:3,consts:[[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","gap-3","justify-content-between"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","asistencia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-stretch","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2","d-none","d-md-block"],[2,"height","calc(100dvh - 281px)",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","loading","localeText","enableCellTextSelection","ariaHidden","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),l(4,"input",4),i(5,"i",5),l(6,"span",6)(7,"span",7),a(),i(8,"input",8),d("input",function(){return o.onFilterTextBoxChanged()}),a()(),i(9,"div",9)(10,"button",10),d("click",function(){return o.loadTabla()}),i(11,"span",11),l(12,"span",12),i(13,"span",13),r(14,"Actualizar"),a()()()()(),i(15,"div",14),b(16,He,3,11)(17,We,4,0),I(18,16,Ve,17),B(),a()()()),e&2&&(s(15),p("ngClass",G(1,$e,o.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[N,y,we]})}};H=S([A()],H);function Je(t,n){t&1&&l(0,"app-asistencia")}function Ke(t,n){t&1&&l(0,"app-tabla-permisos")}var Zt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-main-tabs"]],standalone:!0,features:[g],decls:18,vars:3,consts:[["nav","ngbNav"],["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","bg-body","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],["ngbNav","",1,"nav","nav-tabs","fw-medium","nav-line-tabs","nav-line-tabs-2x","fs-6"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"]],template:function(o,m){if(o&1&&(i(0,"app-header"),ne(1,1),i(2,"h1",2)(3,"span",3),r(4,"Asistencias"),a()(),ae(),a(),i(5,"div",4)(6,"div",5)(7,"ul",6,0)(9,"li",7)(10,"a",8),r(11,"Asistencia del Personal"),a(),b(12,Je,1,0,"ng-template",9),a(),i(13,"li",7)(14,"a",8),r(15,"Permisos del Personal"),a(),b(16,Ke,1,0,"ng-template",9),a()()(),l(17,"div",10),a()),o&2){let h=oe(8);s(9),p("ngbNavItem",1),s(4),p("ngbNavItem",2),s(4),p("ngbNavOutlet",h)}},dependencies:[ye,he,ve,_e,be,Ce,xe,Se,V,H,Te]})}}return t})();export{Zt as MainTabsComponent};
