import{a as ne,b as ae,c as se,d as de,e as me,f as F}from"./chunk-MRY44RQF.js";import{a as j}from"./chunk-R4J6MRU5.js";import"./chunk-Q4VFHCA5.js";import{ib as w,jb as le,mb as pe}from"./chunk-DTQJYYMN.js";import{a as ce}from"./chunk-TWOZQJ7G.js";import{c as re}from"./chunk-SGWZHZFB.js";import"./chunk-3LUZQXRF.js";import"./chunk-DUBUW4ZU.js";import"./chunk-U5GNHINA.js";import"./chunk-3YJPJYYE.js";import{d as oe}from"./chunk-VW7FZU7U.js";import"./chunk-WAKZQXFB.js";import"./chunk-GT4JH6HJ.js";import{a as te,b as ie}from"./chunk-73QAVBZN.js";import{a as ee}from"./chunk-C4LB5HPP.js";import{b,g as $,h as y,j as x}from"./chunk-FR665RP3.js";import"./chunk-O36CONK3.js";import{e as J,g as K,j as X,l as Y,t as v,v as C,y as M}from"./chunk-FM6AGUVW.js";import{$c as h,B as N,C as V,Da as G,Ea as p,Gc as Z,I as l,Kb as k,Kc as u,Lc as g,Ob as z,Qb as B,Tb as R,a as L,ac as a,b as O,bc as s,cc as D,dc as H,ec as q,ga as A,nc as _,sc as E,t as T,ta as c,tc as P,uc as I,wb as Q,wc as f,xb as m,xc as U,za as d}from"./chunk-6QDZBSPE.js";var fe=[{id:0,nombre:"Cronograma",tag:"general"},{id:1,nombre:"Psicologia 1",tag:"psicologia-1"},{id:2,nombre:"Psicologia 2",tag:"psicologia-2"},{id:3,nombre:"Lenguaje 1",tag:"lenguaje-1"},{id:4,nombre:"Lenguaje 2",tag:"lenguaje-2"},{id:5,nombre:"Lenguaje 3",tag:"lenguaje-3"},{id:6,nombre:"Ocupacional 1",tag:"ocupacional-1"},{id:7,nombre:"Ocupacional 2",tag:"ocupacional-2"},{id:8,nombre:"Ocupacional 3",tag:"ocupacional-3"},{id:9,nombre:"Fisica 1",tag:"fisica-1"},{id:10,nombre:"Fisica 2",tag:"fisica-2"},{id:11,nombre:"Fisica 3",tag:"fisica-3"},{id:12,nombre:"Neuro",tag:"neuro"},{id:13,nombre:"Pediasuit",tag:"pediasuit"}];var ve=["dropdown"],Ce=()=>[J,K,w,X],be=t=>({"opacity-50":t});function ye(t,e){if(t&1&&(D(0,"full-calendar",12),u(1,"async"),u(2,"async"),u(3,"async")),t&2){let i=_(2);R("ngClass",Z(10,be,g(1,4,i.isLoading)))("loading",g(2,6,i.isLoading))("events",g(3,8,i.citasEvent))("options",i.calendarOptions)}}function xe(t,e){if(t&1&&k(0,ye,4,12,"full-calendar",11),t&2){let i=_();R("ngIf",i.calendarVisible)}}function we(t,e){t&1&&(a(0,"div",13)(1,"div",14)(2,"span",15),f(3,"Loading..."),s()()())}var n,S=(n=class{get bodyParams(){return{startWeek:this.startWeek,endWeek:this.endWeek}}constructor(e,i,o,r){this.changeDetector=e,this.router=i,this.modalService=o,this.route=r,this.citasService=d(ce),this.terapiasService=d($),this.isLoading=d(ee).isLoading,this.cronogramas=fe,this.citasEvent=new T,this.terapiasList=[],this.subscriptions=[],this.listLoading=!1,this.startWeek=F().startOfWeek,this.endWeek=F().endOfWeek,this.calendarVisible=!0,this.calendarOptions={plugins:[ne,ae,se,de],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},allDaySlot:!1,expandRows:!0,slotDuration:"00:45:00",slotMinTime:"08:00",slotMaxTime:"20:01:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"narrow"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},initialView:"timeGridWeek",weekends:!0,editable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),locale:me,datesSet:W=>{this.startWeek=W.view.activeStart,this.endWeek=W.view.activeEnd,this.loadFilteredCitas()}},this.currentEvents=[]}ngOnInit(){}ngAfterViewInit(){}loadFilteredCitas(){this.dropdown.selectedItems.subscribe(e=>{e.length>0&&this.loadCitas(O(L({},this.bodyParams),{filter:!0,idsPersonal:e})),e.length===0&&this.loadCitas(this.bodyParams)})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadCitas(e){this.citasEvent=this.citasService.getAll(e).pipe(A(1),l(i=>i.data),ie(this))}handleCalendarToggle(){this.calendarVisible=!this.calendarVisible}handleWeekendsToggle(){let{calendarOptions:e}=this;e.weekends=!e.weekends}handleDateSelect(e){this.modalService.open(j,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventForm.patchValue({fecha_inicio:e.startStr.substring(0,10),hora_inicio:e.startStr.substring(11,16),hora_fin:e.endStr.substring(11,16)})}handleEventClick(e){let i=e.event,o=this.modalService.open(pe,{centered:!0,size:"100",scrollable:!0,backdrop:"static"});o.componentInstance.eventId=i.id,o.componentInstance.citaId=i.extendedProps.id_cita,o.componentInstance.eventUpdated.subscribe(()=>{this.loadCitas(this.bodyParams)})}openModal(){this.modalService.open(j,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventSubmitted.subscribe(()=>{this.loadCitas(this.bodyParams)})}},n.\u0275fac=function(i){return new(i||n)(m(h),m(C),m(b),m(v))},n.\u0275cmp=G({type:n,selectors:[["app-reservar-cita"]],viewQuery:function(i,o){if(i&1&&(E(w,5),E(ve,7)),i&2){let r;P(r=I())&&(o.fullCalendarComponent=r.first),P(r=I())&&(o.dropdown=r.first)}},decls:20,vars:1,consts:[["dropdown",""],["header-title",""],[1,"d-flex","flex-column","text-white","fw-bold","my-1"],[1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-header"],[1,"card-title","fw-bold"],[1,"card-toolbar","d-flex"],[1,"card-body",2,"border","none","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)","border-radius","0 0 15px 15px"],[1,"demo-app-main"],[3,"ngClass","loading","events","options",4,"ngIf"],[3,"ngClass","loading","events","options"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,o){i&1&&(a(0,"app-header"),H(1,1),a(2,"h1",2),f(3," Cronograma General "),s(),q(),s(),a(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),f(9),s(),a(10,"div",8)(11,"div"),D(12,"app-dropdown",null,0),s()()(),a(14,"div",9)(15,"div",10),k(16,xe,1,1)(17,we,4,0),z(18,16,Ce,null,17),B(),s()()()()()),i&2&&(Q(9),U(o.cronogramaActual==null?null:o.cronogramaActual.nombre))},dependencies:[x,y]}),n);S=N([te({checkProperties:!0}),V("design:paramtypes",[h,C,b,v])],S);var ge=(t,e)=>d(re).getHorarios(t.paramMap.get("terapist")).pipe(l(o=>o.data));var Se=[{path:"",component:S},{path:":tag",loadComponent:()=>import("./chunk-YSOQITBH.js").then(t=>t.CronogramaComponent)},{path:":tag/:terapist",resolve:{personal:ge},loadComponent:()=>import("./chunk-NW5QGCHD.js").then(t=>t.EspecialistaComponent)}],he=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p({type:e}),e.\u0275inj=c({imports:[M.forChild(Se),M]});let t=e;return t})();var bt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p({type:e}),e.\u0275inj=c({imports:[Y,he,le,x,oe,y]});let t=e;return t})();export{bt as ReservarCitaModule};
