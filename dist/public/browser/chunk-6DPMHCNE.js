import{a as z}from"./chunk-ZLUWTMBN.js";import{a as I}from"./chunk-4JZDPN5V.js";import{a as ee}from"./chunk-Q5L65FNE.js";import{a as O}from"./chunk-35XITZXV.js";import{a as H,e as Y}from"./chunk-C4F35XIX.js";import{a as $}from"./chunk-XCZLRYQC.js";import{a as U,b as g}from"./chunk-FKRAWMO5.js";import{n as D}from"./chunk-FWMYVGKL.js";import{a as T}from"./chunk-PQDQNIDX.js";import{a as Q}from"./chunk-OIXA5WM3.js";import{D as w,E as f,F as A,G as P,J as j,M as V,P as G,V as E,f as N,i as F,o as Z}from"./chunk-MFZOMSUD.js";import{Aa as X,Ab as q,Ac as r,B,Ba as a,C as M,Fa as C,I as _,Lc as m,Mc as d,Ob as k,Xb as s,Ya as x,ec as n,f as R,fc as e,gc as o,qc as b,t as y,ua as W,zb as l}from"./chunk-JQJUQ5FW.js";var ne=R(ee());var K=(()=>{let t=class t{constructor(i){this.http=i,this.apiUrl=Q.apiUrl}getAll(){return this.http.get(`${Q.apiUrl}/parentescos/list`)}};t.\u0275fac=function(c){return new(c||t)(X(Z))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"});let u=t;return u})();function me(u,t){u&1&&o(0,"span",35)}var h,te=(h=class{constructor(t){this.fb=t,this.modal=a(D),this.isLoading=a(T).isLoading,this.pacienteService=a(I),this.userService=a(O),this.toast=a(H),this.generoService=a(z),this.parentescoService=a(K),this.userList=new y,this.es=ne.default.es,this.generos=new y,this.parentescos=new y,this.onSaveComplete=new x,this.pacienteForm=this.fb.group({nombre:["",f.required],dni:["",[f.required,f.pattern("^[0-9]*")]],fecha_nacimiento:["",f.required],id:[null,f.required],id_parentesco:[null,f.required],id_genero:[null,f.required],pos_hijo:[""],colegio:[""]})}ngAfterViewInit(){this.userList=this.userService.getPacientes().pipe(g(this),_(t=>t.data)),this.generos=this.generoService.getAll().pipe(g(this),_(t=>t.data)),this.parentescos=this.parentescoService.getAll().pipe(g(this),_(t=>t.data))}ngOnDestroy(){}close(){this.modal.close()}save(){let t=this.pacienteForm.value;this.pacienteForm.valid&&this.pacienteService.create(t).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.close()},error:p=>{if(p.error.errors){let i=Object.values(p.error.errors).join(`
`);this.toast.error(i,"Error")}else this.toast.error("Ocurrio un error al crear el paciente","Error")}})}},h.\u0275fac=function(p){return new(p||h)(q(E))},h.\u0275cmp=C({type:h,selectors:[["app-create-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:62,vars:30,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"d-flex","flex-column","gap-3"],["for","name",1,"required","form-label"],["type","text","id","","formControlName","nombre","placeholder","Ingresar Nombre del Paciente",1,"form-control"],[1,"d-flex","gap-3"],[1,"d-flex","flex-column","gap-1"],["for","lastName",1,"required","form-label"],["type","text","id","lastName","formControlName","dni","placeholder","Ingresar DNI del Paciente",1,"form-control"],["for","email",1,"required","form-label"],["mwlFlatpickr","","placeholder","Seleccionar fecha","formControlName","fecha_nacimiento",1,"form-control",3,"locale","altInput","altFormat"],["for","colegio",1,"form-label"],["type","text","id","colegio","formControlName","colegio","placeholder","Nombre del Colegio",1,"form-control"],[1,"row"],[1,"col-6"],["for","id_genero",1,"required","form-label"],["bindLabel","nombre","bindValue","id_genero","placeholder","Seleccionar","formControlName","id_genero",3,"items","loadingText"],["for","nro_hermano",1,"required","form-label"],["type","text","id","n","formControlName","pos_hijo","placeholder","Ingresar N\xB0 de Hermano",1,"form-control"],[1,"col"],["bindValue","id","placeholder","Seleccionar","bindLabel","name","formControlName","id",3,"items","loading","loadingText","notFoundText"],["bindValue","id_parentesco","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_parentesco",3,"items","loading","loadingText","notFoundText"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(p,i){p&1&&(n(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),o(4,"span",4)(5,"span",5)(6,"span",6),e()(),r(7," Crear Paciente "),e(),n(8,"button",7),b("click",function(){return i.close()}),n(9,"i",8),o(10,"span",4)(11,"span",5),e()()(),n(12,"div",9)(13,"form",10)(14,"div",11)(15,"label",12),r(16,"Nombres"),e(),o(17,"input",13),e(),n(18,"div",14)(19,"div",15)(20,"label",16),r(21,"DNI"),e(),o(22,"input",17),e(),n(23,"div",15)(24,"label",18),r(25,"Fecha Nacimiento"),e(),o(26,"input",19),e()(),n(27,"div",15)(28,"label",20),r(29,"Colegio del Paciente"),e(),o(30,"input",21),e(),n(31,"div",22)(32,"div",23)(33,"label",24),r(34,"Genero"),e(),o(35,"ng-select",25),m(36,"async"),e(),n(37,"div",23)(38,"label",26),r(39,"N\xB0 de Hermano "),e(),o(40,"input",27),e()(),n(41,"div",22)(42,"div",28)(43,"label",18),r(44,"Apoderado"),e(),o(45,"ng-select",29),m(46,"async"),m(47,"async"),e(),n(48,"div",28)(49,"label",18),r(50,"Parentesco"),e(),o(51,"ng-select",30),m(52,"async"),m(53,"async"),e()()()(),n(54,"div",31)(55,"button",32),b("click",function(){return i.close()}),r(56," Cerrar "),e(),n(57,"button",33),m(58,"async"),b("click",function(){return i.save()}),r(59," Guardar "),k(60,me,1,0,"span",34),m(61,"async"),e()()),p&2&&(l(13),s("formGroup",i.pacienteForm),l(13),s("locale",i.es)("altInput",!0)("altFormat","j/n/Y"),l(9),s("items",d(36,16,i.generos))("loadingText","Cargando.."),l(10),s("items",d(46,18,i.userList))("loading",d(47,20,i.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),l(6),s("items",d(52,22,i.parentescos))("loading",d(53,24,i.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),l(6),s("disabled",i.pacienteForm.invalid||d(58,26,i.isLoading)),l(3),s("ngIf",d(61,28,i.isLoading)))},dependencies:[N,j,w,A,P,V,G,Y,$,F]}),h);te=B([U(),M("design:paramtypes",[E])],te);var re=R(ee());function de(u,t){u&1&&o(0,"span",33)}var v,oe=(v=class{constructor(t){this.fb=t,this.modal=a(D),this.isLoading=a(T).isLoading,this.pacienteService=a(I),this.toast=a(H),this.userService=a(O),this.generoService=a(z),this.parentescoService=a(K),this.userList=new y,this.es=re.default.es,this.generos=new y,this.parentescos=new y,this.onSaveComplete=new x,this.pacienteForm=this.fb.group({nombre:["",f.required],dni:["",[f.required,f.pattern("^[0-9]*")]],fecha_nacimiento:["",f.required],id:[null,f.required],id_genero:[null,f.required],id_parentesco:[null,f.required],pos_hijo:[""],colegio:[""]})}ngOnInit(){this.pacienteService.getById(this.paciente?.id_paciente).pipe(g(this)).subscribe(t=>{this.pacienteForm.patchValue(t.data)})}ngAfterViewInit(){this.userList=this.userService.getPacientes().pipe(g(this),_(t=>t.data)),this.generos=this.generoService.getAll().pipe(g(this),_(t=>t.data)),this.parentescos=this.parentescoService.getAll().pipe(g(this),_(t=>t.data))}ngOnDestroy(){}close(){this.modal.close()}edit(){let t=this.pacienteForm.value,p=this.paciente?.id_paciente;this.pacienteForm.valid&&this.pacienteService.update(t,p).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.close()},error:i=>{if(i.error.errors){let c=Object.values(i.error.errors).join(`
`);this.toast.error(c,"Error")}else this.toast.error("Ocurrio un error al crear el paciente","Error")}})}},v.\u0275fac=function(p){return new(p||v)(q(E))},v.\u0275cmp=C({type:v,selectors:[["app-edit-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:61,vars:29,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"d-flex","flex-column","gap-3"],["for","name",1,"required","form-label"],["type","text","id","","formControlName","nombre",1,"form-control"],[1,"d-flex","gap-3"],["for","lastName",1,"required","form-label"],["type","text","id","lastName","formControlName","dni",1,"form-control"],["for","email",1,"required","form-label"],["mwlFlatpickr","","placeholder","Seleccionar fecha","formControlName","fecha_nacimiento",1,"form-control",3,"locale","altInput","altFormat"],["for","colegio",1,"required","form-label"],["type","text","id","colegio","formControlName","colegio",1,"form-control"],[1,"row"],[1,"col-6"],["for","id_genero",1,"required","form-label"],["bindLabel","nombre","bindValue","id_genero","placeholder","Seleccionar","formControlName","id_genero",3,"items"],["for","nro_hermano",1,"required","form-label"],["type","text","id","n","formControlName","pos_hijo",1,"form-control"],[1,"col-7"],["bindValue","id","placeholder","Seleccionar","bindLabel","name","formControlName","id",3,"items","loading","loadingText","notFoundText"],[1,"col-5"],["bindValue","id_parentesco","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_parentesco",3,"items","loading","loadingText","notFoundText"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(p,i){p&1&&(n(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),o(4,"span",3)(5,"span",4),e()(),r(6," Editar Paciente "),e(),n(7,"button",5),b("click",function(){return i.close()}),n(8,"i",6),o(9,"span",3)(10,"span",4),e()()(),n(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),r(15,"Nombres"),e(),o(16,"input",11),e(),n(17,"div",12)(18,"div",9)(19,"label",13),r(20,"DNI"),e(),o(21,"input",14),e(),n(22,"div",9)(23,"label",15),r(24,"Fecha Nacimiento"),e(),o(25,"input",16),e()(),n(26,"div",9)(27,"label",17),r(28,"Colegio"),e(),o(29,"input",18),e(),n(30,"div",19)(31,"div",20)(32,"label",21),r(33,"G\xE9nero"),e(),o(34,"ng-select",22),m(35,"async"),e(),n(36,"div",20)(37,"label",23),r(38,"N\xB0 de Hermano "),e(),o(39,"input",24),e()(),n(40,"div",19)(41,"div",25)(42,"label",15),r(43,"Apoderado"),e(),o(44,"ng-select",26),m(45,"async"),m(46,"async"),e(),n(47,"div",27)(48,"label",15),r(49,"Parentesco"),e(),o(50,"ng-select",28),m(51,"async"),m(52,"async"),e()()()(),n(53,"div",29)(54,"button",30),b("click",function(){return i.close()}),r(55," Cerrar "),e(),n(56,"button",31),m(57,"async"),b("click",function(){return i.edit()}),r(58," Guardar "),k(59,de,1,0,"span",32),m(60,"async"),e()()),p&2&&(l(12),s("formGroup",i.pacienteForm),l(13),s("locale",i.es)("altInput",!0)("altFormat","j/n/Y"),l(9),s("items",d(35,15,i.generos)),l(10),s("items",d(45,17,i.userList))("loading",d(46,19,i.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),l(6),s("items",d(51,21,i.parentescos))("loading",d(52,23,i.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),l(6),s("disabled",i.pacienteForm.invalid||d(57,25,i.isLoading)),l(3),s("ngIf",d(60,27,i.isLoading)))},dependencies:[N,j,w,A,P,V,G,Y,$,F]}),v);oe=B([U({checkProperties:!0}),M("design:paramtypes",[E])],oe);function pe(u,t){u&1&&o(0,"span",13)}var We=(()=>{let t=class t{constructor(){this.modal=a(D),this.pacienteService=a(I),this.isLoading=a(T).isLoading,this.onSaveComplete=new x}close(){this.modal.dismiss()}delete(){this.pacienteService.delete(this.pacienteId).subscribe(()=>{this.onSaveComplete.emit(),this.modal.close()})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=C({type:t,selectors:[["app-pacientes-delete-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(c,S){c&1&&(n(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),o(4,"span",3)(5,"span",4)(6,"span",5),e()(),r(7," Eliminar Paciente "),e(),n(8,"button",6),b("click",function(){return S.close()}),n(9,"i",7),o(10,"span",3)(11,"span",4),e()()(),n(12,"div",8)(13,"p"),r(14,"\xBFEst\xE1s seguro de eliminar este Paciente?"),e(),n(15,"p"),r(16,"Toda la informaci\xF3n relacionada con este paciente se perder\xE1."),e()(),n(17,"div",9)(18,"button",10),b("click",function(){return S.close()}),r(19," Cancelar "),e(),n(20,"button",11),m(21,"async"),b("click",function(){return S.delete()}),r(22," Eliminar "),k(23,pe,1,0,"span",12),m(24,"async"),e()()),c&2&&(l(20),s("disabled",d(21,2,S.isLoading)),l(3),s("ngIf",d(24,4,S.isLoading)))},dependencies:[N,F]});let u=t;return u})();var Ze=(()=>{let t=class t{ngOnInit(){}agInit(i){this.params=i}openEdit(){this.params?.onEdit(this.params.data)}openDelete(){this.params?.onDelete(this.params.data)}refresh(i){return!0}};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=C({type:t,selectors:[["app-pacientes-action-buttons"]],decls:5,vars:0,consts:[[1,"d-flex","align-items-center","gap-2",2,"padding-block","0.15rem"],["type","button",1,"btn","btn-icon","btn-sm","bg-success",3,"click"],[1,"ki-solid","ki-pencil","text-white"],["type","button",1,"btn","btn-icon","btn-sm","btn-danger",3,"click"],[1,"ki-solid","ki-trash","text-white"]],template:function(c,S){c&1&&(n(0,"div",0)(1,"button",1),b("click",function(){return S.openEdit()}),o(2,"span",2),e(),n(3,"button",3),b("click",function(){return S.openDelete()}),o(4,"span",4),e()())}});let u=t;return u})();export{te as a,oe as b,We as c,Ze as d};
