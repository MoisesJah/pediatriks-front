import{b as B,c as G,d as V,e as P}from"./chunk-IQ567SB6.js";import{a as O}from"./chunk-W54JGCTE.js";import{a as W}from"./chunk-MYRVSVX3.js";import{a as q,b as j}from"./chunk-V5XXOWMS.js";import{a as N}from"./chunk-6AI7ETL6.js";import{b as I,h as F,i as L}from"./chunk-R5RWQE6G.js";import"./chunk-7DDO5UV4.js";import{d as A,i as M,k as R}from"./chunk-BZQHEDDQ.js";import{$b as z,B as x,Ba as _,Bb as i,Cb as n,Db as l,Eb as U,Fb as w,Hb as E,I as C,Ka as b,La as y,Lb as m,Mb as u,Vb as d,_b as k,ab as v,dc as f,ec as h,mb as S,qb as T,sb as D,t as g,ub as c,xa as s}from"./chunk-LN7CUKCY.js";var K=()=>[M,import("./chunk-6NGAYFQR.js").then(r=>r.AgGridAngular)],Q=r=>[r];function X(r,e){if(r&1){let t=E();i(0,"ag-grid-angular",22),f(1,"async"),f(2,"async"),m("gridReady",function(p){b(t);let J=u();return y(J.gridReady(p))}),n()}if(r&2){let t=u();c("rowData",h(1,6,t.userList))("loading",h(2,8,t.isLoading))("columnDefs",t.colDefs)("enableCellTextSelection",!0)("localeText",t.localeText)("pagination",!0)}}function Y(r,e){r&1&&(i(0,"div",23)(1,"div",24)(2,"span",25),d(3,"Loading..."),n()()())}var o,H=(o=class{constructor(){this.users=s(O),this.isLoading=s(N).isLoading,this.theme=s(F),this.modal=s(I),this.localeText=W,this.userList=new g,this.colDefs=[{field:"name",headerName:"Nombre",filter:!0},{field:"dni",headerName:"DNI",filter:!0},{field:"telefono",headerName:"Tel\xE9fono",filter:!0},{field:"email",headerName:"Correo",filter:!0},{headerName:"Acciones",cellRenderer:P,cellRendererParams:{onEdit:e=>this.openEditModal(e),onDelete:e=>this.openDeleteModal(e)},maxWidth:100,resizable:!1}]}ngOnInit(){this.fetchUsers()}gridReady(e){this.gridApi=e.api,this.sizeColumnsToFit()}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}fetchUsers(){this.userList=this.users.getAll().pipe(C(e=>e.data),j(this))}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("user-search").value)}ngOnDestroy(){}loadTabla(){this.fetchUsers()}openCreateModal(){this.modal.open(B,{size:"300px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchUsers()})}openEditModal(e){let t=this.modal.open(G,{size:"300px",animation:!0,centered:!0});t.componentInstance.userId=e.id,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchUsers()})}openDeleteModal(e){let t=this.modal.open(V,{size:"300px",animation:!0,centered:!0});t.componentInstance.userId=e.id,t.componentInstance.onSaveComplete.subscribe(()=>{this.fetchUsers()})}},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=_({type:o,selectors:[["app-users"]],standalone:!0,features:[k],decls:31,vars:3,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","gap-3","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","user-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],["id","myGrid",2,"height","calc(100dvh - 235px)",3,"ngClass"],[2,"width","100%","height","100%",3,"gridReady","rowData","loading","columnDefs","enableCellTextSelection","localeText","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,a){t&1&&(i(0,"app-header"),U(1,0),i(2,"h1",1)(3,"span",2),d(4,"Usuarios"),n()(),w(),n(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),l(10,"input",8),i(11,"i",9),l(12,"span",10)(13,"span",11),n(),i(14,"input",12),m("input",function(){return a.onFilterTextBoxChanged()}),n()(),i(15,"div",13)(16,"button",14),m("click",function(){return a.loadTabla()}),i(17,"span",15),l(18,"span",16),i(19,"span",17),d(20,"Actualizar"),n()()(),i(21,"button",18),m("click",function(){return a.openCreateModal()}),i(22,"span",15),l(23,"span",19),i(24,"span",20),d(25,"An\u0303adir"),n()()()()(),i(26,"div",21),S(27,X,3,10)(28,Y,4,0),T(29,27,K,28),D(),n()()()()),t&2&&(v(26),c("ngClass",z(1,Q,a.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[R,A,L]}),o);H=x([q()],H);export{H as UsersComponent};
