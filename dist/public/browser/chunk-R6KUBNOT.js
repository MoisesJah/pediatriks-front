import{a as H}from"./chunk-OLF4U65X.js";import{a as S}from"./chunk-GT4JH6HJ.js";import{b as L}from"./chunk-AQJAMIXE.js";import{e as T,f as a,g as F,h as w,l as I,m as V,o as P,r as D,s as M,u as A}from"./chunk-YR44ZVP5.js";import{g as q}from"./chunk-EITZOAMY.js";import{Da as C,Fb as b,Ma as c,Na as p,Ob as i,Pb as e,Qb as r,Ua as k,Ub as N,Zb as v,dc as h,ec as E,fc as g,hc as o,jb as u,kb as f,r as y,wb as x}from"./chunk-LYSYPXVF.js";var Q=["startTimePicker"],G=["endTimePicker"];function j(s,m){s&1&&r(0,"span",41)}var ne=(()=>{let m=class m{constructor(l,t,n){this.fb=l,this.sedeService=t,this.modalService=n,this.isLoading=!1,this.subscriptions=new y,this.onSaveComplete=new k,this.sedeForm=this.fb.group({nombre:["",a.required],direccion:["",a.required],distrito:["",a.required],provincia:["",a.required],departamento:["",a.required],telefono:["",[a.required,a.pattern("^[0-9]+$")]],email:["",[a.required,a.email]],horarioapertura:[""],horariocierre:[""],capacidadpacientes:[1,[a.required,a.min(1)]],numeroconsultorios:[1,[a.required,a.min(1)]]})}ngOnInit(){this.sedeId?this.loadSedeData():console.error("sedeId no est\xE1 definido")}ngAfterViewInit(){this.startTimePicker&&this.startTimePicker.nativeElement&&S(this.startTimePicker.nativeElement,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:this.sedeForm?.get("horarioapertura")?.value}),this.endTimePicker&&this.endTimePicker.nativeElement&&S(this.endTimePicker.nativeElement,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:this.sedeForm?.get("horariocierre")?.value})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadSedeData(){this.isLoading=!0;let l=this.sedeService.getById(this.sedeId).subscribe({next:t=>{t.status==="success"&&t.data?(this.sedeForm.patchValue(t.data),this.isLoading=!1,this.ngAfterViewInit()):(console.error("Error en la respuesta:",t),this.isLoading=!1)},error:t=>{console.error("Error al cargar los datos de la sede:",t),this.isLoading=!1}});this.subscriptions.add(l)}close(){this.modalService.dismissAll()}save(){if(this.sedeForm.valid){this.isLoading=!0;let l=this.sedeForm.value,t=this.sedeService.update(l,this.sedeId).subscribe({next:()=>{this.onSaveComplete.emit(),this.modalService.dismissAll()},error:n=>{console.error("Error al guardar la sede:",n),this.isLoading=!1}});this.subscriptions.add(t)}}};m.\u0275fac=function(t){return new(t||m)(f(A),f(H),f(L))},m.\u0275cmp=C({type:m,selectors:[["app-editar-modal"]],viewQuery:function(t,n){if(t&1&&(h(Q,5),h(G,5)),t&2){let d;E(d=g())&&(n.startTimePicker=d.first),E(d=g())&&(n.endTimePicker=d.first)}},inputs:{sedeId:"sedeId"},outputs:{onSaveComplete:"onSaveComplete"},decls:70,vars:3,consts:[["startTimePicker",""],["endTimePicker",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"row"],[1,"form-group","col-6"],["for","nombre",1,"required","form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","direccion",1,"required","form-label"],["type","text","id","direccion","formControlName","direccion",1,"form-control"],["for","distrito",1,"required","form-label"],["type","text","id","distrito","formControlName","distrito",1,"form-control"],["for","provincia",1,"required","form-label"],["type","text","id","provincia","formControlName","provincia",1,"form-control"],["for","departamento",1,"required","form-label"],["type","text","id","departamento","formControlName","departamento",1,"form-control"],["for","telefono",1,"required","form-label"],["type","text","id","telefono","formControlName","telefono",1,"form-control"],[1,"form-group"],["for","email",1,"required","form-label"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"form-group","col-6","mb-3"],["for","kt_calendar_datepicker_start_time"],["type","text","id","kt_calendar_datepicker_start_time","formControlName","horarioapertura","placeholder","Seleccionar Hora de Apertura",1,"form-control"],["for","kt_calendar_datepicker_end_time"],["type","text","id","kt_calendar_datepicker_end_time","formControlName","horariocierre","placeholder","Seleccionar Hora de Cierre",1,"form-control"],["for","capacidadpacientes",1,"required","form-label"],["type","number","id","capacidadpacientes","formControlName","capacidadpacientes","min","1",1,"form-control"],["for","numeroconsultorios",1,"required","form-label"],["type","number","id","numeroconsultorios","formControlName","numeroconsultorios","min","1",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,n){if(t&1){let d=N();i(0,"div",2)(1,"h4",3)(2,"span")(3,"i",4),r(4,"span",5)(5,"span",6),e()(),o(6," Editar Sede "),e(),i(7,"button",7),v("click",function(){return c(d),p(n.close())}),i(8,"i",8),r(9,"span",5)(10,"span",6),e()()(),i(11,"div",9)(12,"form",10)(13,"div",11)(14,"div",12)(15,"label",13),o(16,"Nombre"),e(),r(17,"input",14),e(),i(18,"div",12)(19,"label",15),o(20,"Direcci\xF3n"),e(),r(21,"input",16),e()(),i(22,"div",11)(23,"div",12)(24,"label",17),o(25,"Distrito"),e(),r(26,"input",18),e(),i(27,"div",12)(28,"label",19),o(29,"Provincia"),e(),r(30,"input",20),e()(),i(31,"div",11)(32,"div",12)(33,"label",21),o(34,"Departamento"),e(),r(35,"input",22),e(),i(36,"div",12)(37,"label",23),o(38,"Tel\xE9fono"),e(),r(39,"input",24),e()(),i(40,"div",25)(41,"label",26),o(42,"Correo Electr\xF3nico"),e(),r(43,"input",27),e(),i(44,"div",11)(45,"div",28)(46,"label",29),o(47,"Hora de Apertura"),e(),r(48,"input",30,0),e(),i(50,"div",28)(51,"label",31),o(52,"Hora de Cierre"),e(),r(53,"input",32,1),e()(),i(55,"div",11)(56,"div",12)(57,"label",33),o(58,"Capacidad de Pacientes"),e(),r(59,"input",34),e(),i(60,"div",12)(61,"label",35),o(62,"N\xFAmero de Consultorios"),e(),r(63,"input",36),e()()()(),i(64,"div",37)(65,"button",38),v("click",function(){return c(d),p(n.close())}),o(66," Cancelar "),e(),i(67,"button",39),v("click",function(){return c(d),p(n.save())}),o(68," Guardar "),x(69,j,1,0,"span",40),e()()}t&2&&(u(12),b("formGroup",n.sedeForm),u(55),b("disabled",n.sedeForm.invalid||n.isLoading),u(2),b("ngIf",n.isLoading))},dependencies:[q,I,T,V,F,w,M,P,D]});let s=m;return s})();export{ne as a};
