import{a as F}from"./chunk-QOPFTOZL.js";import{a as U}from"./chunk-DB5RMVZ7.js";import{a as Z}from"./chunk-UXZ2VA4W.js";import{a as V}from"./chunk-QB37QMMN.js";import{a as G}from"./chunk-TS646TIG.js";import{c as A}from"./chunk-4FIJZXK5.js";import{a as O}from"./chunk-TJFBSUUK.js";import{n as N}from"./chunk-KLLKZ3UM.js";import{c as M,d as u,e as I,f as q,k as B,o as P,r as w,y as S}from"./chunk-MGQU4BYR.js";import{a as k}from"./chunk-RQ4VGEOD.js";import{a as j,b as g}from"./chunk-PIACHCSP.js";import{a as W}from"./chunk-GKZUPR7X.js";import{b as X}from"./chunk-APQUY7ND.js";import{o as E,t as x}from"./chunk-JS4ZJV2L.js";import{Ba as y,C as h,Fc as n,Mb as _,Ua as C,Vb as s,Vc as d,Wc as p,f as K,fc as i,gc as e,hc as o,n as v,qa as Q,uc as b,v as D,w as T,wa as R,wb as m,xa as l,xb as L}from"./chunk-B762IU3Y.js";var ie=K(Z());var H=(()=>{class c{constructor(a){this.http=a,this.apiUrl=W.apiUrl}getAll(){return this.http.get(`${W.apiUrl}/parentescos/list`)}static{this.\u0275fac=function(t){return new(t||c)(R(X))}}static{this.\u0275prov=Q({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();function me(c,r){c&1&&o(0,"span",36)}var ee=class ${constructor(r){this.fb=r,this.modal=l(N),this.isLoading=l(k).isLoading,this.pacienteService=l(F),this.userService=l(V),this.toast=l(G),this.generoService=l(U),this.parentescoService=l(H),this.userList=new v,this.es=ie.default.es,this.generos=new v,this.parentescos=new v,this.onSaveComplete=new C,this.pacienteForm=this.fb.group({nombre:["",u.required],dni:["",[u.required,u.pattern("^[0-9]*")]],fecha_nacimiento:["",u.required],id:[null,u.required],id_parentesco:[null,u.required],id_genero:[null,u.required],pos_hijo:[""],diagnostico:[""],colegio:[""]})}ngAfterViewInit(){this.userList=this.userService.getUsersWithPacienteType().pipe(g(this),h(r=>r.data)),this.generos=this.generoService.getAll().pipe(g(this),h(r=>r.data)),this.parentescos=this.parentescoService.getAll().pipe(g(this),h(r=>r.data))}ngOnDestroy(){}close(){this.modal.close()}save(){let r=this.pacienteForm.value;this.pacienteForm.valid&&this.pacienteService.create(r).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.close()},error:a=>{if(a.error.errors){let t=Object.values(a.error.errors).join(`
`);this.toast.error(t,"Error")}else this.toast.error("Ocurrio un error al crear el paciente","Error")}})}static{this.\u0275fac=function(a){return new(a||$)(L(S))}}static{this.\u0275cmp=y({type:$,selectors:[["app-create-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:66,vars:30,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"d-flex","flex-column","gap-1"],["for","name",1,"required","form-label"],["type","text","id","","formControlName","nombre","placeholder","Ingresar Nombre del Paciente",1,"form-control"],[1,"d-flex","gap-3"],["for","lastName",1,"required","form-label"],["type","text","id","lastName","formControlName","dni","placeholder","Ingresar DNI del Paciente",1,"form-control"],["for","email",1,"required","form-label"],["mwlFlatpickr","","placeholder","Seleccionar fecha","formControlName","fecha_nacimiento",1,"form-control",3,"locale","altInput","altFormat"],["for","colegio",1,"form-label"],["type","text","id","colegio","formControlName","colegio","placeholder","Nombre del Colegio",1,"form-control"],[1,"row"],[1,"col-6"],["for","id_genero",1,"required","form-label"],["bindLabel","nombre","bindValue","id_genero","placeholder","Seleccionar","formControlName","id_genero",3,"items","loadingText"],["for","nro_hermano",1,"required","form-label"],["type","text","id","n","formControlName","pos_hijo","placeholder","Ingresar N\xB0 de Hermano",1,"form-control"],["for","name",1,"form-label"],["type","text","id","","formControlName","diagnostico",1,"form-control"],[1,"col"],["bindValue","id","placeholder","Seleccionar","bindLabel","name","formControlName","id",3,"items","loading","loadingText","notFoundText"],["bindValue","id_parentesco","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_parentesco",3,"items","loading","loadingText","notFoundText"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),o(4,"span",4)(5,"span",5)(6,"span",6),e()(),n(7," Crear Paciente "),e(),i(8,"button",7),b("click",function(){return t.close()}),i(9,"i",8),o(10,"span",4)(11,"span",5),e()()(),i(12,"div",9)(13,"form",10)(14,"div",11)(15,"label",12),n(16,"Nombres"),e(),o(17,"input",13),e(),i(18,"div",14)(19,"div",11)(20,"label",15),n(21,"DNI"),e(),o(22,"input",16),e(),i(23,"div",11)(24,"label",17),n(25,"Fecha Nacimiento"),e(),o(26,"input",18),e()(),i(27,"div",11)(28,"label",19),n(29,"Colegio del Paciente"),e(),o(30,"input",20),e(),i(31,"div",21)(32,"div",22)(33,"label",23),n(34,"Genero"),e(),o(35,"ng-select",24),d(36,"async"),e(),i(37,"div",22)(38,"label",25),n(39,"N\xB0 de Hermano "),e(),o(40,"input",26),e()(),i(41,"div",11)(42,"label",27),n(43,"Diagno\u0301stico"),e(),o(44,"input",28),e(),i(45,"div",21)(46,"div",29)(47,"label",17),n(48,"Apoderado"),e(),o(49,"ng-select",30),d(50,"async"),d(51,"async"),e(),i(52,"div",29)(53,"label",17),n(54,"Parentesco"),e(),o(55,"ng-select",31),d(56,"async"),d(57,"async"),e()()()(),i(58,"div",32)(59,"button",33),b("click",function(){return t.close()}),n(60," Cerrar "),e(),i(61,"button",34),d(62,"async"),b("click",function(){return t.save()}),n(63," Guardar "),_(64,me,1,0,"span",35),d(65,"async"),e()()),a&2&&(m(13),s("formGroup",t.pacienteForm),m(13),s("locale",t.es)("altInput",!0)("altFormat","j/n/Y"),m(9),s("items",p(36,16,t.generos))("loadingText","Cargando.."),m(14),s("items",p(50,18,t.userList))("loading",p(51,20,t.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),m(6),s("items",p(56,22,t.parentescos))("loading",p(57,24,t.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),m(6),s("disabled",t.pacienteForm.invalid||p(62,26,t.isLoading)),m(3),s("ngIf",p(65,28,t.isLoading)))},dependencies:[E,B,M,I,q,P,w,A,O,x]})}};ee=D([j(),T("design:paramtypes",[S])],ee);var oe=K(Z());function se(c,r){c&1&&o(0,"span",36)}var ne=class z{constructor(r){this.fb=r,this.modal=l(N),this.isLoading=l(k).isLoading,this.pacienteService=l(F),this.toast=l(G),this.userService=l(V),this.generoService=l(U),this.parentescoService=l(H),this.userList=new v,this.es=oe.default.es,this.generos=new v,this.parentescos=new v,this.onSaveComplete=new C,this.pacienteForm=this.fb.group({nombre:["",u.required],dni:["",[u.required,u.pattern("^[0-9]*")]],fecha_nacimiento:["",u.required],id:[null,u.required],id_genero:[null,u.required],id_parentesco:[null,u.required],pos_hijo:[""],diagnostico:[""],colegio:[""]})}ngOnInit(){this.pacienteService.getById(this.paciente?.id_paciente).pipe(g(this)).subscribe(r=>{this.pacienteForm.patchValue(r.data)})}ngAfterViewInit(){this.userList=this.userService.getUsersWithPacienteType().pipe(g(this),h(r=>r.data)),this.generos=this.generoService.getAll().pipe(g(this),h(r=>r.data)),this.parentescos=this.parentescoService.getAll().pipe(g(this),h(r=>r.data))}ngOnDestroy(){}close(){this.modal.close()}edit(){let r=this.pacienteForm.value,a=this.paciente?.id_paciente;this.pacienteForm.valid&&this.pacienteService.update(r,a).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.close()},error:t=>{if(t.error.errors){let f=Object.values(t.error.errors).join(`
`);this.toast.error(f,"Error")}else this.toast.error("Ocurrio un error al crear el paciente","Error")}})}static{this.\u0275fac=function(a){return new(a||z)(L(S))}}static{this.\u0275cmp=y({type:z,selectors:[["app-edit-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:65,vars:29,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"d-flex","flex-column","gap-3"],["for","name",1,"required","form-label"],["type","text","id","","formControlName","nombre",1,"form-control"],[1,"d-flex","gap-3"],["for","lastName",1,"required","form-label"],["type","text","id","lastName","formControlName","dni",1,"form-control"],["for","email",1,"required","form-label"],["mwlFlatpickr","","placeholder","Seleccionar fecha","formControlName","fecha_nacimiento",1,"form-control",3,"locale","altInput","altFormat"],["for","colegio",1,"required","form-label"],["type","text","id","colegio","formControlName","colegio",1,"form-control"],[1,"row"],[1,"col-6"],["for","id_genero",1,"required","form-label"],["bindLabel","nombre","bindValue","id_genero","placeholder","Seleccionar","formControlName","id_genero",3,"items"],["for","nro_hermano",1,"required","form-label"],["type","text","id","n","formControlName","pos_hijo",1,"form-control"],[1,"d-flex","flex-column","gap-1"],["for","name",1,"form-label"],["type","text","id","","formControlName","diagnostico",1,"form-control"],[1,"col-7"],["bindValue","id","placeholder","Seleccionar","bindLabel","name","formControlName","id",3,"items","loading","loadingText","notFoundText"],[1,"col-5"],["bindValue","id_parentesco","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_parentesco",3,"items","loading","loadingText","notFoundText"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),o(4,"span",3)(5,"span",4),e()(),n(6," Editar Paciente "),e(),i(7,"button",5),b("click",function(){return t.close()}),i(8,"i",6),o(9,"span",3)(10,"span",4),e()()(),i(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),n(15,"Nombres"),e(),o(16,"input",11),e(),i(17,"div",12)(18,"div",9)(19,"label",13),n(20,"DNI"),e(),o(21,"input",14),e(),i(22,"div",9)(23,"label",15),n(24,"Fecha Nacimiento"),e(),o(25,"input",16),e()(),i(26,"div",9)(27,"label",17),n(28,"Colegio"),e(),o(29,"input",18),e(),i(30,"div",19)(31,"div",20)(32,"label",21),n(33,"G\xE9nero"),e(),o(34,"ng-select",22),d(35,"async"),e(),i(36,"div",20)(37,"label",23),n(38,"N\xB0 de Hermano "),e(),o(39,"input",24),e()(),i(40,"div",25)(41,"label",26),n(42,"Diagno\u0301stico"),e(),o(43,"input",27),e(),i(44,"div",19)(45,"div",28)(46,"label",15),n(47,"Apoderado"),e(),o(48,"ng-select",29),d(49,"async"),d(50,"async"),e(),i(51,"div",30)(52,"label",15),n(53,"Parentesco"),e(),o(54,"ng-select",31),d(55,"async"),d(56,"async"),e()()()(),i(57,"div",32)(58,"button",33),b("click",function(){return t.close()}),n(59," Cerrar "),e(),i(60,"button",34),d(61,"async"),b("click",function(){return t.edit()}),n(62," Guardar "),_(63,se,1,0,"span",35),d(64,"async"),e()()),a&2&&(m(12),s("formGroup",t.pacienteForm),m(13),s("locale",t.es)("altInput",!0)("altFormat","j/n/Y"),m(9),s("items",p(35,15,t.generos)),m(14),s("items",p(49,17,t.userList))("loading",p(50,19,t.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),m(6),s("items",p(55,21,t.parentescos))("loading",p(56,23,t.isLoading))("loadingText","Cargando..")("notFoundText","Sin resultados"),m(6),s("disabled",t.pacienteForm.invalid||p(61,25,t.isLoading)),m(3),s("ngIf",p(64,27,t.isLoading)))},dependencies:[E,B,M,I,q,P,w,A,O,x]})}};ne=D([j({checkProperties:!0}),T("design:paramtypes",[S])],ne);function de(c,r){c&1&&o(0,"span",13)}var Qe=(()=>{class c{constructor(){this.modal=l(N),this.pacienteService=l(F),this.isLoading=l(k).isLoading,this.onSaveComplete=new C}close(){this.modal.dismiss()}delete(){this.pacienteService.delete(this.pacienteId).subscribe(()=>{this.onSaveComplete.emit(),this.modal.close()})}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275cmp=y({type:c,selectors:[["app-pacientes-delete-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,f){t&1&&(i(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),o(4,"span",3)(5,"span",4)(6,"span",5),e()(),n(7," Eliminar Paciente "),e(),i(8,"button",6),b("click",function(){return f.close()}),i(9,"i",7),o(10,"span",3)(11,"span",4),e()()(),i(12,"div",8)(13,"p"),n(14,"\xBFEst\xE1s seguro de eliminar este Paciente?"),e(),i(15,"p"),n(16,"Toda la informaci\xF3n relacionada con este paciente se perder\xE1."),e()(),i(17,"div",9)(18,"button",10),b("click",function(){return f.close()}),n(19," Cancelar "),e(),i(20,"button",11),d(21,"async"),b("click",function(){return f.delete()}),n(22," Eliminar "),_(23,de,1,0,"span",12),d(24,"async"),e()()),t&2&&(m(20),s("disabled",p(21,2,f.isLoading)),m(3),s("ngIf",p(24,4,f.isLoading)))},dependencies:[E,x]})}}return c})();export{ee as a,ne as b,Qe as c};
