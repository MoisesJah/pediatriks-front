import{a as k}from"./chunk-HRZTQ3WS.js";import{a as z}from"./chunk-NMGGHNE5.js";import{a as M}from"./chunk-A3C2G7L3.js";import"./chunk-GKZUPR7X.js";import{C as T,F as P,O as G,l as _,m as E,o as x,r as j,s as d,t as A,u as D,v as O,x as v,z as R}from"./chunk-R7YU5FNY.js";import{B as F,o as N,t as L,v as I}from"./chunk-DP3M2V7L.js";import{Aa as y,Ba as u,Lb as f,Nc as b,Oc as h,Ub as l,bc as i,cc as o,dc as s,nc as S,oc as C,qa as p,vb as m,wa as c,yc as n,zc as w}from"./chunk-B7JMKZ3I.js";function J(e,q){if(e&1&&(i(0,"div",24),n(1),o()),e&2){let t=C();m(),w(t.errors.error)}}function Z(e,q){e&1&&s(0,"span",25)}var g=(()=>{class e{constructor(){this.authService=c(M),this.isLoading=c(z).isLoading,this.router=c(_),this.errors={error:""},this.loginForm=new O({email:new v("",{nonNullable:!0,validators:[d.email,d.required]}),password:new v("",{nonNullable:!0,validators:[d.required,d.minLength(8)]})})}storeCredentials(t,r){localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(r))}redirectToDashboard(t){switch(this.storeCredentials(t.token,t.user),t.user.tipo_user){case"administrador":this.router.navigate(["/admin/dashboard"]);break;case"paciente":this.router.navigate(["/dashboard"]);break;case"terapista":this.router.navigate(["/terapista/dashboard"]);break;default:break}}handleSubmit(){this.errors={},this.authService.login({email:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:t=>{this.redirectToDashboard(t)},error:t=>{this.errors=t.error}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-login"]],decls:31,vars:8,consts:[["id","body",1,"min-vh-100","d-flex","align-items-center","auth-bg","bgi-size-cover","bgi-attachment-fixed","bgi-position-center","bgi-no-repeat"],[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-column","flex-column-fluid","flex-lg-row"],[1,"d-flex","flex-center","w-lg-50","pt-15","pt-lg-0","px-10"],[1,"d-flex","flex-center","flex-lg-center","flex-column"],["alt","Logo","height","771","width","1600","ngSrc","assets/media/logos/file.png","priority","",2,"width","350px","height","auto","display","flex","align-items","center"],[1,"text","text-center",2,"color","white","text-wrap","balance"],[1,"d-flex","flex-column-fluid","flex-lg-row-auto","justify-content-center","justify-content-lg-end","p-12"],[1,"bg-body","d-flex","flex-column","align-items-stretch","flex-center","rounded-4","w-md-600px","p-20"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","px-lg-10"],[1,"form","w-100",3,"ngSubmit","formGroup"],[1,"text-center","mb-11"],[1,"text-gray-900","fw-bolder","mb-3"],[1,"fv-row","mb-8"],["type","text","formControlName","email","placeholder","Correo","autocomplete","off",1,"form-control","bg-transparent"],[1,"fv-row","mb-3"],["type","password","formControlName","password","placeholder","Contrase\xF1a","name","password","autocomplete","off",1,"form-control","bg-transparent"],["class","text-danger mx-1",4,"ngIf"],[1,"d-grid","my-10"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-primary",3,"disabled"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-gray-700","text-center","fw-semibold","fs-6"],["routerLink","/registrate",1,"link-primary"],[1,"text-danger","mx-1"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s(5,"img",5),i(6,"h2",6),n(7,"CENTRO ESPECIALIZADO EN TERAPIAS INFANTILES"),o()()(),i(8,"div",7)(9,"div",8)(10,"div",9)(11,"form",10),S("ngSubmit",function(){return a.handleSubmit()}),i(12,"div",11)(13,"h1",12),n(14,"Iniciar Sesi\xF3n"),o()(),i(15,"div",13),s(16,"input",14),o(),i(17,"div",15),s(18,"input",16),o(),f(19,J,2,1,"div",17),i(20,"div",18)(21,"button",19),b(22,"async"),i(23,"span",20),n(24,"Iniciar Sesi\xF3n"),o(),f(25,Z,1,0,"span",21),b(26,"async"),o()(),i(27,"div",22),n(28,"\xBFNo eres un miembro todav\xEDa? "),i(29,"a",23),n(30,"Reg\xEDstrate"),o()()()()()()()()()),r&2&&(m(11),l("formGroup",a.loginForm),m(8),l("ngIf",a.errors.error),m(2),l("disabled",!a.loginForm.valid||h(22,4,a.isLoading)),m(4),l("ngIf",h(26,6,a.isLoading)))},dependencies:[N,E,R,j,A,D,T,P,F,L],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]:not(form){border:1.25px solid #a94442}",`#body[_ngcontent-%COMP%] { background-image: url('assets/media/auth/bg4.jpg'); } [data-bs-theme="dark"][_ngcontent-%COMP%]   #body[_ngcontent-%COMP%] { background-image: url('assets/media/auth/bg4-dark.jpg'); }`]})}}return e})();var H=[{path:"",component:g,canActivate:[k]}],V=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=p({imports:[x.forChild(H),x]})}}return e})();var ue=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=u({type:e,bootstrap:[g]})}static{this.\u0275inj=p({imports:[I,V,G]})}}return e})();export{ue as LoginModule};
