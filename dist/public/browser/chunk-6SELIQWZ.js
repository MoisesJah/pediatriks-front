import{a as N}from"./chunk-7QSZXZSX.js";import{c as K}from"./chunk-VW7FZU7U.js";import{a as R,b as Z}from"./chunk-73QAVBZN.js";import{a as F}from"./chunk-C4LB5HPP.js";import{b as I,c as H}from"./chunk-FR665RP3.js";import{a as re,e as O,f as m,g as U,h as q,l as P,o as G,r as V,t as $,u as E}from"./chunk-O36CONK3.js";import{b as ne,g as T,j as x,m as oe}from"./chunk-FM6AGUVW.js";import{B as M,C as L,Da as C,Ea as ee,Fa as te,I as A,Kb as S,Kc as b,Lc as h,Tb as u,Wa as _,Xa as ie,ac as o,bc as i,cc as r,mc as d,sa as B,t as w,ta as W,va as X,wb as c,wc as l,xb as k,ya as j,za as f}from"./chunk-6QDZBSPE.js";var Y=(()=>{let e=class e{constructor(t){this.http=t,this.apiUrl=re.apiUrl}getAll(){return this.http.get(`${this.apiUrl}/tipo-user/list`)}getPacientes(){return this.http.get(`${this.apiUrl}/usuario/list/paciente`)}getById(t){return this.http.get(`${this.apiUrl}/tipo-user/list/${t}`)}create(t){return this.http.post(`${this.apiUrl}/tipo-user/add`,t)}update(t,n){return this.http.put(`${this.apiUrl}/tipouser/edit/${n}`,t)}delete(t){return this.http.delete(`${this.apiUrl}/tipouser/delete/${t}`)}};e.\u0275fac=function(n){return new(n||e)(j(oe))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();var J=class{constructor(e,p){this._document=p;let t=this._textarea=this._document.createElement("textarea"),n=t.style;n.position="fixed",n.top=n.opacity="0",n.left="-999em",t.setAttribute("aria-hidden","true"),t.value=e,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let e=this._textarea,p=!1;try{if(e){let t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),p=this._document.execCommand("copy"),t&&t.focus()}}catch{}return p}destroy(){let e=this._textarea;e&&(e.remove(),this._textarea=void 0)}},pe=(()=>{let e=class e{constructor(t){this._document=t}copy(t){let n=this.beginCopy(t),s=n.copy();return n.destroy(),s}beginCopy(t){return new J(t,this._document)}};e.\u0275fac=function(n){return new(n||e)(j(ne))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})(),de=new X("CDK_COPY_TO_CLIPBOARD_CONFIG"),z=(()=>{let e=class e{constructor(t,n,s){this._clipboard=t,this._ngZone=n,this.text="",this.attempts=1,this.copied=new _,this._pending=new Set,s&&s.attempts!=null&&(this.attempts=s.attempts)}copy(t=this.attempts){if(t>1){let n=t,s=this._clipboard.beginCopy(this.text);this._pending.add(s);let v=()=>{let Q=s.copy();!Q&&--n&&!this._destroyed?this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(v,1)):(this._currentTimeout=null,this._pending.delete(s),s.destroy(),this.copied.emit(Q))};v()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}};e.\u0275fac=function(n){return new(n||e)(k(pe),k(ie),k(de,8))},e.\u0275dir=te({type:e,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(n,s){n&1&&d("click",function(){return s.copy()})},inputs:{text:[0,"cdkCopyToClipboard","text"],attempts:[0,"cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"},standalone:!0});let a=e;return a})(),De=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=W({});let a=e;return a})();function be(a,e){a&1&&r(0,"span",35)}var g,le=(g=class{constructor(e){this.fb=e,this.modal=f(I),this.userService=f(N),this.tipouserService=f(Y),this.isLoading=f(F).isLoading,this.tipoUserList=new w,this.onSaveComplete=new _,this.userForm=this.fb.group({name:["",m.required],email:["",[m.required,m.email]],dni:["",[m.required,m.minLength(8),m.pattern("^[0-9]*")]],id_tipousers:[null,m.required],telefono:["",[m.required,m.pattern("^[0-9]*")]],password:["",[m.required,m.minLength(8)]],direccion:[""]})}ngOnInit(){this.loadTipousers()}generatePassword(){let p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let n=0;n<12;n++){let s=Math.floor(Math.random()*p.length);t+=p[s]}this.userForm.get("password")?.patchValue(t)}close(){this.modal.dismissAll()}loadTipousers(){this.tipoUserList=this.tipouserService.getAll().pipe(A(e=>e.data),Z(this))}save(){this.userForm.valid&&this.userService.create(this.userForm.value).subscribe(()=>{this.onSaveComplete.emit(),this.modal.dismissAll()})}},g.\u0275fac=function(p){return new(p||g)(k(E))},g.\u0275cmp=C({type:g,selectors:[["app-create-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:61,vars:15,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","exampleFormControlInput1",1,"required","form-label"],["type","text","formControlName","name","placeholder","Ingresa tu Nombre",1,"form-control"],[1,"row"],[1,"form-group","col-6"],["type","text","pattern","[0-9]*","formControlName","dni","placeholder","Ingresa tu DNI",1,"form-control"],["type","email","formControlName","telefono","placeholder","Ingresa tu Tel\xE9fono",1,"form-control"],["type","email","formControlName","email","placeholder","Ingresa tu Correo",1,"form-control"],["for","exampleFormControlInput1",1,"form-label"],["type","email","formControlName","direccion","placeholder","Ingresa tu Direcci\xF3n",1,"form-control"],["bindValue","id_tipousers","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_tipousers",3,"items","loading","loadingText"],[1,"d-flex","align-items-center","justify-content-between",2,"margin-bottom","0.75rem"],["for","password",1,"required","form-label","d-flex","align-items-center","justify-content-between"],["ngbTooltip","Guarde la contrasen\u0303a en un lugar seguro para no perderla",2,"margin-left","0.15rem"],[1,"ki-solid","ki-information-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"position-relative"],["formControlName","password","type","password","placeholder","Ingresa tu Contrase\xF1a",1,"form-control","pe-8"],["type","button","ngbTooltip","Copiar","placement","bottom",1,"btn","btn-icon","copy-icon","btn-sm","copy-icon","btn-active-color-primary","btn-color-gray-800","position-absolute",3,"cdkCopyToClipboard"],[1,"ki-solid","ki-copy","fs-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(p,t){if(p&1&&(o(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),r(4,"span",4)(5,"span",5)(6,"span",6),i()(),l(7," A\xF1adir Usuario "),i(),o(8,"button",7),d("click",function(){return t.close()}),o(9,"i",8),r(10,"span",4)(11,"span",5),i()()(),o(12,"div",9)(13,"form",10)(14,"div",11)(15,"label",12),l(16,"Nombres"),i(),r(17,"input",13),i(),o(18,"div",14)(19,"div",15)(20,"label",12),l(21,"DNI"),i(),r(22,"input",16),i(),o(23,"div",15)(24,"label",12),l(25," Tel\xE9fono "),i(),r(26,"input",17),i()(),o(27,"div",11)(28,"label",12),l(29," Correo "),i(),r(30,"input",18),i(),o(31,"div",11)(32,"label",19),l(33," Direcci\xF3n "),i(),r(34,"input",20),i(),o(35,"div",11)(36,"label",12),l(37," Tipo de usuario "),i(),r(38,"ng-select",21),b(39,"async"),b(40,"async"),i(),o(41,"div",11)(42,"div",22)(43,"label",23),l(44," Contrasen\u0303a "),o(45,"span",24),r(46,"i",25),i()(),o(47,"button",26),d("click",function(){return t.generatePassword()}),l(48," autogenerar "),i()(),o(49,"div",27),r(50,"input",28),o(51,"button",29),r(52,"span",30),i()()()()(),o(53,"div",31)(54,"button",32),d("click",function(){return t.close()}),l(55," Cancelar "),i(),o(56,"button",33),b(57,"async"),d("click",function(){return t.save()}),l(58," Guardar "),S(59,be,1,0,"span",34),b(60,"async"),i()()),p&2){let n;c(13),u("formGroup",t.userForm),c(25),u("items",h(39,7,t.tipoUserList))("loading",h(40,9,t.isLoading))("loadingText","Cargando..."),c(13),u("cdkCopyToClipboard",(n=t.userForm.get("password"))==null?null:n.value),c(5),u("disabled",t.userForm.invalid||h(57,11,t.isLoading)),c(3),u("ngIf",h(60,13,t.isLoading))}},dependencies:[T,P,O,U,q,$,H,z,K,G,V,x]}),g);le=M([R({checkProperties:!0}),L("design:paramtypes",[E])],le);function he(a,e){a&1&&r(0,"span",34)}var y,me=(y=class{constructor(e){this.fb=e,this.modal=f(I),this.userService=f(N),this.tipouserService=f(Y),this.isLoading=f(F).isLoading,this.tipoUserList=new w,this.onSaveComplete=new _,this.userForm=this.fb.group({name:["",m.required],email:["",[m.required,m.email]],dni:["",[m.required,m.minLength(8),m.pattern("^[0-9]*")]],id_tipousers:[null,m.required],telefono:["",[m.required,m.pattern("^[0-9]*")]],password:["",[m.required,m.minLength(8)]],direccion:[""]})}ngOnInit(){this.userService.getById(this.userId).subscribe(e=>{this.userForm.patchValue(e.data)}),this.loadTipousers()}loadTipousers(){this.tipoUserList=this.tipouserService.getAll().pipe(A(e=>e.data),Z(this))}generatePassword(){let p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+={}[]|;:<>?,./`~",t="";for(let n=0;n<12;n++){let s=Math.floor(Math.random()*p.length);t+=p[s]}this.userForm.get("password")?.patchValue(t)}close(){this.modal.dismissAll()}edit(e,p){this.userService.update(e,p).subscribe(()=>{this.onSaveComplete.emit(),this.modal.dismissAll()})}},y.\u0275fac=function(p){return new(p||y)(k(E))},y.\u0275cmp=C({type:y,selectors:[["app-edit-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:63,vars:15,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","top"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","exampleFormControlInput1",1,"required","form-label"],["type","text","formControlName","name",1,"form-control"],[1,"row"],[1,"form-group","col-6"],["type","text","pattern","[0-9]*","formControlName","dni",1,"form-control"],["type","email","formControlName","telefono",1,"form-control"],["type","email","formControlName","email",1,"form-control"],["for","exampleFormControlInput1",1,"form-label"],["type","email","formControlName","direccion","placeholder","Ingresa tu Direcci\xF3n",1,"form-control"],["bindValue","id_tipousers","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_tipousers",3,"items","loading","loadingText"],[1,"d-flex","align-items-center","justify-content-between",2,"margin-bottom","0.75rem"],["for","password",1,"required","form-label","d-flex","align-items-center","justify-content-between"],["ngbTooltip","Guarde la contrasen\u0303a en un lugar seguro para no perderla",2,"margin-left","0.15rem"],[1,"ki-solid","ki-information-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"ki-duotone","ki-note"],[1,"position-relative"],["formControlName","password","type","password",1,"form-control","pe-8"],["type","button","ngbTooltip","Copiar",1,"btn","btn-icon","btn-sm","top-0","copy-icon","end-0","btn-active-color-primary","btn-color-gray-800","position-absolute",3,"cdkCopyToClipboard"],[1,"ki-solid","ki-copy","fs-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(p,t){if(p&1&&(o(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),r(4,"span",3)(5,"span",4),i()(),l(6," Editar Informaci\xF3n "),i(),o(7,"button",5),d("click",function(){return t.close()}),o(8,"i",6),r(9,"span",3)(10,"span",4),i()()(),o(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),l(15,"Nombres"),i(),r(16,"input",11),i(),o(17,"div",12)(18,"div",13)(19,"label",10),l(20,"DNI"),i(),r(21,"input",14),i(),o(22,"div",13)(23,"label",10),l(24," Tel\xE9fono "),i(),r(25,"input",15),i()(),o(26,"div",9)(27,"label",10),l(28," Correo "),i(),r(29,"input",16),i(),o(30,"div",9)(31,"label",17),l(32," Direcci\xF3n "),i(),r(33,"input",18),i(),o(34,"div",9)(35,"label",10),l(36," Tipo de usuario "),i(),r(37,"ng-select",19),b(38,"async"),b(39,"async"),i(),o(40,"div",9)(41,"div",20)(42,"label",21),l(43," Contrasen\u0303a "),o(44,"span",22),r(45,"i",23),i()(),o(46,"button",24),d("click",function(){return t.generatePassword()}),o(47,"i",25),r(48,"span",3)(49,"span",4),i(),l(50," autogenerar "),i()(),o(51,"div",26),r(52,"input",27),o(53,"button",28),r(54,"span",29),i()()()()(),o(55,"div",30)(56,"button",31),d("click",function(){return t.close()}),l(57," Cancelar "),i(),o(58,"button",32),b(59,"async"),d("click",function(){return t.edit(t.userForm.value,t.userId)}),l(60," Actualizar "),S(61,he,1,0,"span",33),b(62,"async"),i()()),p&2){let n;c(12),u("formGroup",t.userForm),c(25),u("items",h(38,7,t.tipoUserList))("loading",h(39,9,t.isLoading))("loadingText","Cargando..."),c(16),u("cdkCopyToClipboard",(n=t.userForm.get("password"))==null?null:n.value),c(5),u("disabled",t.userForm.invalid||h(59,11,t.isLoading)),c(3),u("ngIf",h(62,13,t.isLoading))}},dependencies:[T,P,O,U,q,$,H,z,K,G,V,x]}),y);me=M([R({checkProperties:!0}),L("design:paramtypes",[E])],me);function ge(a,e){a&1&&r(0,"span",13)}var lt=(()=>{let e=class e{constructor(){this.modal=f(I),this.users=f(N),this.isLoading=f(F).isLoading,this.onSaveComplete=new _}close(){this.modal.dismissAll()}delete(){this.users.delete(this.userId).subscribe(()=>{this.onSaveComplete.emit(),this.modal.dismissAll()})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-delete-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),r(4,"span",3)(5,"span",4)(6,"span",5),i()(),l(7," Eliminar Usuario "),i(),o(8,"button",6),d("click",function(){return s.close()}),o(9,"i",7),r(10,"span",3)(11,"span",4),i()()(),o(12,"div",8)(13,"p"),l(14,"\xBFEst\xE1s seguro de eliminar este usuario?"),i(),o(15,"p"),l(16,"Toda la informaci\xF3n relacionada con este usuario se perder\xE1."),i()(),o(17,"div",9)(18,"button",10),d("click",function(){return s.close()}),l(19," Cancelar "),i(),o(20,"button",11),b(21,"async"),d("click",function(){return s.delete()}),l(22," Eliminar "),S(23,ge,1,0,"span",12),b(24,"async"),i()()),n&2&&(c(20),u("disabled",h(21,2,s.isLoading)),c(3),u("ngIf",h(24,4,s.isLoading)))},dependencies:[T,x]});let a=e;return a})();var mt=(()=>{let e=class e{ngOnInit(){}agInit(t){this.params=t}openEdit(){this.params?.onEdit(this.params.data)}openDelete(){this.params?.onDelete(this.params.data)}refresh(t){return!0}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-action-buttons"]],decls:5,vars:0,consts:[[1,"d-flex","align-items-center","gap-2",2,"padding-block","0.15rem"],["type","button",1,"btn","btn-icon","btn-sm","bg-success",3,"click"],[1,"ki-solid","ki-pencil","text-white"],["type","button",1,"btn","btn-icon","btn-sm","btn-danger",3,"click"],[1,"ki-solid","ki-trash","text-white"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"button",1),d("click",function(){return s.openEdit()}),r(2,"span",2),i(),o(3,"button",3),d("click",function(){return s.openDelete()}),r(4,"span",4),i()())}});let a=e;return a})();export{De as a,le as b,me as c,lt as d,mt as e};
