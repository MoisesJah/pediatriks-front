import{a as W}from"./chunk-UZO5QNZS.js";import{a as z}from"./chunk-J3AUZB2X.js";import{c as O,d as q}from"./chunk-NZWSPJLI.js";import{a as I,b as j}from"./chunk-KG3B2A6X.js";import{a as H}from"./chunk-U2EAJGNN.js";import{u as G}from"./chunk-CZPC3FHQ.js";import{a as V}from"./chunk-NMGGHNE5.js";import{a as B}from"./chunk-A3C2G7L3.js";import{a as M}from"./chunk-KNEUCQQI.js";import"./chunk-GKZUPR7X.js";import"./chunk-R7YU5FNY.js";import{m as L,t as R,v as N}from"./chunk-DP3M2V7L.js";import{Aa as F,C as v,Gc as A,Ic as E,Ka as f,La as h,Lb as b,Nc as g,Oc as _,Pb as T,Rb as D,Ub as u,bc as i,cc as n,dc as c,ec as w,fc as P,hc as k,n as C,nc as s,oc as d,v as y,vb as S,wa as l,yc as m}from"./chunk-B7JMKZ3I.js";var U=()=>[O,R],J=a=>[a];function K(a,t){if(a&1){let e=k();i(0,"ag-grid-angular",19),g(1,"async"),g(2,"async"),s("gridReady",function(o){f(e);let p=d();return h(p.gridReady(o))})("gridReady",function(o){f(e);let p=d();return h(p.gridReady(o))}),n()}if(a&2){let e=d();u("rowData",_(1,7,e.fichasList))("columnDefs",e.colDefs)("enableCellTextSelection",!0)("localeText",e.localeText)("ariaHidden",!0)("pagination",!0)("loading",_(2,9,e.isLoading))}}function Q(a,t){a&1&&(i(0,"div",20)(1,"div",21)(2,"span",22),m(3,"Loading..."),n()()())}var $=class x{constructor(){this.authService=l(B),this.fichaService=l(z),this.fichasList=new C,this.theme=l(M),this.isLoading=l(V).isLoading,this.localeText=H,this.colDefs=[{headerName:"Nombre",field:"nombre",cellClass:"fw-bold",filter:"agTextColumnFilter",minWidth:250},{headerName:"Paciente",field:"paciente",filter:!0,minWidth:200},{headerName:"Personal",field:"personal",filter:!0},{headerName:"Terapia",field:"terapia",filter:!0},{headerName:"Fecha",field:"fecha_sesion",filter:"agDateColumnFilter",valueFormatter:t=>W(t.value)},{headerName:"Acciones",filter:!1,field:"id_resultado",autoHeight:!0,cellRenderer:t=>{let e=`/ficha-result/${t.data.id_resultado}`;if(t.value)return`<a href="${e}" target="_blank" class="btn btn-light-info btn-sm btn-active-icon-white rounded-pill"><i class="ki-outline ki-eye fs-4"></i>Ver Contenido</a>`}}]}ngOnInit(){this.getFichas()}gridReady(t){this.gridApi=t.api}loadTabla(){this.getFichas()}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("terapia-search").value)}getFichas(){this.fichasList=this.fichaService.getByPacientes(this.authService.user()?.id).pipe(v(t=>t.data),j(this))}static{this.\u0275fac=function(e){return new(e||x)}}static{this.\u0275cmp=F({type:x,selectors:[["app-ficha-paciente"]],standalone:!0,features:[A],decls:26,vars:3,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","terapia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],[2,"height","calc(100dvh - 281px)",3,"ngClass"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","enableCellTextSelection","localeText","ariaHidden","pagination","loading"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(e,r){e&1&&(i(0,"app-header"),w(1,0),i(2,"h1",1)(3,"span",2),m(4,"Fichas"),n()(),P(),n(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),c(10,"input",8),i(11,"i",9),c(12,"span",10)(13,"span",11),n(),i(14,"input",12),s("input",function(){return r.onFilterTextBoxChanged()}),n()(),i(15,"div",13)(16,"button",14),s("click",function(){return r.loadTabla()}),i(17,"span",15),c(18,"span",16),i(19,"span",17),m(20,"Actualizar"),n()()()()(),i(21,"div",18),b(22,K,3,11)(23,Q,4,0),T(24,22,U,23),D(),n()()()()),e&2&&(S(21),u("ngClass",E(1,J,r.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[q,N,L,G]})}};$=y([I()],$);export{$ as FichaPacienteComponent};
