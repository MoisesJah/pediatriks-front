import{y as H}from"./chunk-KLLKZ3UM.js";import{w as F}from"./chunk-JS4ZJV2L.js";import{Ba as y,Fc as T,Gc as P,La as v,Ma as k,Oc as N,Ua as b,bc as C,dc as w,ec as $,fc as _,gc as M,lc as I,uc as x,vc as D,wb as E}from"./chunk-B762IU3Y.js";function V(s,d){if(s&1){let o=I();_(0,"li")(1,"button",4),x("click",function(){let c=v(o).$implicit,m=D();return k(m.selectTime(c))}),T(2),M()()}if(s&2){let o=d.$implicit;E(2),P(o)}}var J=(()=>{class s{constructor(){this.selectedSlot=new b,this.deleselected=new b,this.slotTimes=[]}selectTime(o){this.selectedSlot.emit(o)}onDeselect(){this.deleselected.emit()}static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275cmp=y({type:s,selectors:[["app-slot-time-picker"]],inputs:{slotTimes:"slotTimes"},outputs:{selectedSlot:"selectedSlot",deleselected:"deleselected"},standalone:!0,features:[N],decls:9,vars:0,consts:[[1,"d-flex","flex-column","gap-3","px-4","py-2",2,"min-width","200px"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"d-flex","flex-column","h-175px","scroll-y","list-unstyled","gap-2"],[1,"btn","btn-sm","btn-outline-primary","w-100",3,"click"]],template:function(l,c){l&1&&(_(0,"div",0)(1,"div",1)(2,"h5"),T(3,"Horarios"),M(),_(4,"button",2),x("click",function(){return c.onDeselect()}),T(5,"Borrar"),M()(),_(6,"ul",3),w(7,V,3,1,"li",null,C),M()()),l&2&&(E(7),$(c.slotTimes))},dependencies:[H,F],changeDetection:0})}}return s})();function L(s,d){let o="08:00:00",[l,c]=d.split(":").map(Number),m=l*60+c,u=t=>{let[n,e,S="00"]=t.split(":").map(String);return parseInt(n)*60+parseInt(e)},p=t=>{let n=Math.floor(t/60),e=t%60;return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`},f=[],r=u(o);for(;r<24*60;){let t=r+m;f.push({startMinutes:r,endMinutes:t,start:p(r),end:p(t>=24*60?t-24*60:t)}),r+=m}let a=[];return s.forEach(t=>{let n=t.dia_semana,e=a.find(i=>i.dia_semana===n);e||(e={dia_semana:n,time_slots:[]},a.push(e));let S=u(t.hora_inicio),g=u(t.hora_fin);f.forEach(i=>{if(i.startMinutes>=S&&i.endMinutes<=g){let h=`${i.start} - ${i.end}`;e.time_slots.includes(h)||e.time_slots.push(h)}})}),a.forEach(t=>{t.time_slots.sort()}),a}function Q(s,d){let o="08:00:00",[l,c]=d.split(":").map(Number),m=l*60+c,u=t=>{let[n,e,S="00"]=t.split(":").map(String);return parseInt(n)*60+parseInt(e)},p=t=>{let n=Math.floor(t/60),e=t%60;return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`},f=[],r=u(o);for(;r<24*60;){let t=r+m;f.push({startMinutes:r,endMinutes:t,start:p(r),end:p(t>=24*60?t-24*60:t)}),r+=m}let a=[];return s.forEach(t=>{let n=t.daysOfWeek[0],e=a.find(i=>i.dia_semana===n);e||(e={dia_semana:n,time_slots:[]},a.push(e));let S=u(t.startTime),g=u(t.endTime);f.forEach(i=>{if(i.startMinutes>=S&&i.endMinutes<=g){let h=`${i.start} - ${i.end}`;e.time_slots.includes(h)||e.time_slots.push(h)}})}),a.forEach(t=>{t.time_slots.sort()}),a}export{J as a,L as b,Q as c};
