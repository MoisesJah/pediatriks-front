import{a as E}from"./chunk-B5OQQ6JI.js";import{c as _e,d as ye}from"./chunk-NZWSPJLI.js";import{a as A,b as Ce}from"./chunk-KG3B2A6X.js";import{a as Y}from"./chunk-U2EAJGNN.js";import{o as I,t as be,u as he}from"./chunk-TEKV2OXA.js";import{a as k}from"./chunk-NMGGHNE5.js";import"./chunk-BIMAMPZW.js";import{a as X}from"./chunk-KNEUCQQI.js";import"./chunk-GKZUPR7X.js";import{B as R,E as j,L as S,N as D,q as V,r as C,s as q,t as G,y as O,z as W}from"./chunk-ZM3MROS5.js";import{m as ve,n as ge,o as x,t as _,v as y}from"./chunk-DP3M2V7L.js";import{Aa as b,Ac as ue,C as U,Gc as h,Ic as fe,Ka as N,La as L,Lb as g,Nc as f,Oc as v,Pb as me,Rb as de,Ta as M,Ub as p,bc as i,cc as n,dc as s,ec as ce,fc as pe,hc as $,n as Q,nc as m,oc as T,pb as se,rc as ie,uc as H,v as F,vb as d,vc as J,w,wa as c,wb as B,wc as K,yc as a,zc as ne}from"./chunk-B7JMKZ3I.js";var Ee=["fileInput"];function Fe(l,o){l&1&&(i(0,"div")(1,"small",25),a(2,"El stock debe ser mayor que 0."),n()())}function Me(l,o){l&1&&s(0,"span",26)}var Z=class oe{constructor(o){this.fb=o,this.modal=c(I),this.inventarioService=c(E),this.loadingService=c(k),this.isLoading=this.loadingService.isLoading,this.onSaveComplete=new M,this.inventarioForm=this.fb.group({nombre:["",C.required],descripcion:[""],stock:["",[C.required,C.min(1)]],banner_url:[""]})}evtSelectFile(o){let e=o.target.files;this.inventarioForm.get("banner_url")?.setValue(e?.item(0))}ngOnInit(){}close(){this.modal.dismissAll()}save(){let o=new FormData;Object.keys(this.inventarioForm.value).forEach(e=>{let t=this.inventarioForm.get(e);Array.isArray(t?.value)?o.append(e,JSON.stringify(t?.value)):o.append(e,t?.value)}),this.inventarioService.create(o).subscribe({next:()=>{this.modal.dismissAll(),this.onSaveComplete.emit()},error:e=>{console.log(e)}})}static{this.\u0275fac=function(e){return new(e||oe)(B(S))}}static{this.\u0275cmp=b({type:oe,selectors:[["app-crear-modal"]],viewQuery:function(e,t){if(e&1&&H(Ee,5),e&2){let r;J(r=K())&&(t.fileInput=r.first)}},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:39,vars:8,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre",1,"required","form-label"],["type","text","id","nombre","formControlName","nombre","placeholder","Ingresa Nombre del Item",1,"form-control"],["for","",1,"required","form-label"],["type","file","id","imagen","accept","image/*",1,"form-control",3,"change"],["for","descripcion",1,"form-label"],["cols","3","rows","2","id","descripcion","formControlName","descripcion","placeholder","Ingresa Descripci\xF3n del Paquete",1,"form-control"],["for","stock",1,"form-label"],["id","stock","formControlName","stock","type","number","placeholder","Ingresa el stock",1,"form-control"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),s(4,"span",4)(5,"span",5)(6,"span",6),n()(),a(7," A\xF1adir Inventario "),n(),i(8,"button",7),m("click",function(){return t.close()}),i(9,"i",8),s(10,"span",4)(11,"span",5),n()()(),i(12,"div",9)(13,"form",10),m("ngSubmit",function(){return t.save()}),i(14,"div",11)(15,"label",12),a(16,"Nombre del Item"),n(),s(17,"input",13),n(),i(18,"div",11)(19,"label",14),a(20,"Imagen"),n(),i(21,"input",15),m("change",function(u){return t.evtSelectFile(u)}),n()(),i(22,"div",11)(23,"label",16),a(24,"Descripci\xF3n"),n(),s(25,"textarea",17),n(),i(26,"div",11)(27,"label",18),a(28,"Stock"),n(),s(29,"input",19),g(30,Fe,3,0,"div",20),n()()(),i(31,"div",21)(32,"button",22),m("click",function(){return t.close()}),a(33,"Cancelar"),n(),i(34,"button",23),f(35,"async"),m("click",function(){return t.save()}),a(36," Guardar "),g(37,Me,1,0,"span",24),f(38,"async"),n()()),e&2){let r;d(13),p("formGroup",t.inventarioForm),d(17),p("ngIf",((r=t.inventarioForm.get("stock"))==null?null:r.invalid)&&(((r=t.inventarioForm.get("stock"))==null?null:r.touched)||((r=t.inventarioForm.get("stock"))==null?null:r.dirty))),d(4),p("disabled",t.inventarioForm.invalid||v(35,4,t.isLoading)),d(3),p("ngIf",v(38,6,t.isLoading))}},dependencies:[D,O,V,W,q,G,R,j,y,x,_]})}};Z=F([A({checkProperties:!0}),w("design:paramtypes",[S])],Z);function Te(l,o){l&1&&s(0,"span",13)}var Ie=(()=>{class l{constructor(){this.modal=c(I),this.inventarioService=c(E),this.isLoading=c(k).isLoading,this.inventarioId="",this.onSaveComplete=new M}close(){this.modal.dismissAll()}delete(){let e=typeof this.inventarioId=="string"?this.inventarioId:this.inventarioId.id;e?this.inventarioService.delete(e).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.dismissAll()},error:t=>{console.error("Error al eliminar inventario:",t)}}):console.error("ID del inventario no proporcionado o en formato incorrecto")}static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275cmp=b({type:l,selectors:[["app-borrar-modal"]],inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),s(4,"span",3)(5,"span",4)(6,"span",5),n()(),a(7," Eliminar Inventario "),n(),i(8,"button",6),m("click",function(){return r.close()}),i(9,"i",7),s(10,"span",3)(11,"span",4),n()()(),i(12,"div",8)(13,"p"),a(14,"\xBFEst\xE1s seguro de eliminar este registro de inventario?"),n(),i(15,"p"),a(16,"Toda la informaci\xF3n relacionada con este \xEDtem se perder\xE1."),n()(),i(17,"div",9)(18,"button",10),m("click",function(){return r.close()}),a(19," Cancelar "),n(),i(20,"button",11),f(21,"async"),m("click",function(){return r.delete()}),a(22," Eliminar "),g(23,Te,1,0,"span",12),f(24,"async"),n()()),t&2&&(d(20),p("disabled",v(21,2,r.isLoading)),d(3),p("ngIf",v(24,4,r.isLoading)))},dependencies:[D,y,x,_]})}}return l})();var De=["fileInput"];function Ae(l,o){l&1&&s(0,"span",20)}var ee=class re{constructor(o){this.fb=o,this.modal=c(I),this.inventarioService=c(E),this.isLoading=c(k).isLoading,this.inventarioId="",this.onSaveComplete=new M,this.inventarioForm=this.fb.group({nombre:["",C.required],descripcion:["",C.required],banner_url:[""]})}ngOnInit(){typeof this.inventarioId=="string"?this.loadInventarioData():typeof this.inventarioId=="object"&&this.inventarioId.id?this.loadInventarioData(this.inventarioId.id):console.error("ID del inventario no proporcionado o no es una cadena",this.inventarioId)}close(){this.modal.dismissAll()}save(){if(this.inventarioForm.valid){let o=new FormData;o.append("nombre",this.inventarioForm.get("nombre")?.value||""),o.append("descripcion",this.inventarioForm.get("descripcion")?.value||"");let e=this.inventarioForm.get("banner_url")?.value;e&&o.append("banner_url",e),console.log("Datos enviados:",o.get("nombre"),o.get("descripcion"),o.get("banner_url"));let t=typeof this.inventarioId=="string"?this.inventarioId:this.inventarioId.id;t&&this.inventarioService.update(t,o).subscribe({next:()=>{this.onSaveComplete.emit(),this.modal.dismissAll()},error:r=>{console.error("Error al actualizar inventario:",r.message),alert("No se pudo actualizar el inventario. Intenta nuevamente.")}})}}loadInventarioData(o){let e=o||(typeof this.inventarioId=="object"?this.inventarioId.id:this.inventarioId);e?this.inventarioService.getById(e).subscribe({next:t=>{this.inventarioForm.patchValue(t.data)},error:t=>{console.error("Error al cargar datos del inventario:",t)}}):console.error("ID del inventario no proporcionado")}evtSelectFile(o){let e=o.target.files?.[0];e&&this.inventarioForm.get("banner_url")?.setValue(e)}static{this.\u0275fac=function(e){return new(e||re)(B(S))}}static{this.\u0275cmp=b({type:re,selectors:[["app-editar-modal"]],viewQuery:function(e,t){if(e&1&&H(De,5),e&2){let r;J(r=K())&&(t.fileInput=r.first)}},inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:33,vars:7,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","top"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","imagen",1,"required","form-label"],["type","file","id","imagen","accept","image/*",1,"form-control",3,"change"],["for","nombre",1,"required","form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","descripcion",1,"required","form-label"],["rows","2","id","descripcion","formControlName","descripcion",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),s(4,"span",3)(5,"span",4),n()(),a(6," Editar Inventario "),n(),i(7,"button",5),m("click",function(){return t.close()}),i(8,"i",6),s(9,"span",3)(10,"span",4),n()()(),i(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),a(15,"Imagen"),n(),i(16,"input",11),m("change",function(u){return t.evtSelectFile(u)}),n()(),i(17,"div",9)(18,"label",12),a(19,"Nombre del Inventario"),n(),s(20,"input",13),n(),i(21,"div",9)(22,"label",14),a(23,"Descripci\xF3n"),n(),s(24,"textarea",15),n()()(),i(25,"div",16)(26,"button",17),m("click",function(){return t.close()}),a(27," Cancelar "),n(),i(28,"button",18),f(29,"async"),m("click",function(){return t.save()}),a(30," Guardar "),g(31,Ae,1,0,"span",19),f(32,"async"),n()()),e&2&&(d(12),p("formGroup",t.inventarioForm),d(16),p("disabled",t.inventarioForm.invalid||v(29,3,t.isLoading)),d(3),p("ngIf",v(32,5,t.isLoading)))},dependencies:[D,O,V,q,G,R,j,y,x,_]})}};ee=F([A({checkProperties:!0}),w("design:paramtypes",[S])],ee);function we(l,o){l&1&&(i(0,"div")(1,"small",21),a(2,"El stock debe ser mayor que 0."),n()())}function Ne(l,o){l&1&&(i(0,"div")(1,"small",21),a(2,"El costo del stock debe ser un n\xFAmero."),n()())}function Le(l,o){l&1&&s(0,"span",22)}var te=class ae{constructor(o){this.fb=o,this.modal=c(I),this.inventarioService=c(E),this.loadingService=c(k),this.isLoading=this.loadingService.isLoading,this.inventarioId="",this.onSaveComplete=new M,this.inventarioForm=this.fb.group({stock:["",[C.required,C.min(1)]],costo_stock:["",[C.required,C.min(0)]]})}ngOnInit(){typeof this.inventarioId=="string"?this.loadInventarioData():typeof this.inventarioId=="object"&&this.inventarioId.id?this.loadInventarioData(this.inventarioId.id):console.error("ID del inventario no proporcionado o no es una cadena",this.inventarioId)}loadInventarioData(o){let e=o||(typeof this.inventarioId=="object"?this.inventarioId.id:this.inventarioId);e?this.inventarioService.getById(e).subscribe({next:t=>{this.inventarioForm.patchValue({costo_stock:"",stock:""})},error:t=>{console.error("Error al cargar datos del inventario:",t)}}):console.error("ID del inventario no proporcionado")}close(){this.modal.dismissAll()}save(){if(!this.inventarioId){console.error("El inventario no tiene un ID v\xE1lido.");return}if(this.inventarioForm.invalid){console.error("El formulario no es v\xE1lido.");return}let o={id:this.inventarioId.toString(),stock:this.inventarioForm.get("stock")?.value,costo_stock:this.inventarioForm.get("costo_stock")?.value};this.inventarioService.addStock(o).subscribe({next:e=>{console.log("Stock agregado exitosamente:",e),this.close(),this.onSaveComplete.emit()},error:e=>{console.error("Error al agregar stock:",e)}})}static{this.\u0275fac=function(e){return new(e||ae)(B(S))}}static{this.\u0275cmp=b({type:ae,selectors:[["app-agregar-modal"]],inputs:{inventarioId:"inventarioId"},outputs:{onSaveComplete:"onSaveComplete"},standalone:!0,features:[h],decls:32,vars:9,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],[1,"form-group"],["for","stock",1,"form-label"],["id","stock","formControlName","stock","type","number","placeholder","Ingresa el stock",1,"form-control"],[4,"ngIf"],["for","costo_stock",1,"required","form-label"],["id","costo_stock","formControlName","costo_stock","type","number","step","0.01","placeholder","Ingresa el costo del stock",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),s(4,"span",4)(5,"span",5)(6,"span",6),n()(),a(7," A\xF1adir Stock "),n(),i(8,"button",7),m("click",function(){return t.close()}),i(9,"i",8),s(10,"span",4)(11,"span",5),n()()(),i(12,"div",9)(13,"form",10),m("ngSubmit",function(){return t.save()}),i(14,"div",11)(15,"label",12),a(16,"Stock"),n(),s(17,"input",13),g(18,we,3,0,"div",14),n(),i(19,"div",11)(20,"label",15),a(21,"Costo del Stock"),n(),s(22,"input",16),g(23,Ne,3,0,"div",14),n()()(),i(24,"div",17)(25,"button",18),m("click",function(){return t.close()}),a(26,"Cancelar"),n(),i(27,"button",19),f(28,"async"),m("click",function(){return t.save()}),a(29," Guardar "),g(30,Le,1,0,"span",20),f(31,"async"),n()()),e&2){let r,u;d(13),p("formGroup",t.inventarioForm),d(5),p("ngIf",((r=t.inventarioForm.get("stock"))==null?null:r.invalid)&&(((r=t.inventarioForm.get("stock"))==null?null:r.touched)||((r=t.inventarioForm.get("stock"))==null?null:r.dirty))),d(5),p("ngIf",((u=t.inventarioForm.get("costo_stock"))==null?null:u.invalid)&&(((u=t.inventarioForm.get("costo_stock"))==null?null:u.touched)||((u=t.inventarioForm.get("costo_stock"))==null?null:u.dirty))),d(4),p("disabled",t.inventarioForm.invalid||v(28,5,t.isLoading)),d(3),p("ngIf",v(31,7,t.isLoading))}},dependencies:[D,O,V,W,q,G,R,j,y,x,_]})}};te=F([A({checkProperties:!0}),w("design:paramtypes",[S])],te);var Be=()=>[_,_e],Ve=l=>[l];function qe(l,o){if(l&1){let e=$();i(0,"ag-grid-angular",13),f(1,"async"),m("gridReady",function(r){N(e);let u=T();return L(u.gridReady(r))}),n()}if(l&2){let e=T();p("rowData",v(1,6,e.solicitudesList))("loading",e.isLoading)("columnDefs",e.colDefs)("enableCellTextSelection",!0)("localeText",e.localeText)("pagination",!0)}}function Ge(l,o){l&1&&(i(0,"div",14)(1,"div",15)(2,"span",16),a(3,"Loading..."),n()()())}var ke=(()=>{class l{constructor(){this.solicitudInventarioService=c(be),this.isLoading=c(k).isLoading,this.theme=c(X),this.modal=c(I),this.localeText=Y,this.solicitudesList=new Q,this.colDefs=[{field:"personal_solicita.nombre",headerName:"Terapista",filter:!0},{field:"terapia.nombre",headerName:"Terapia",filter:!0},{field:"item.nombre",headerName:"Item",filter:!0},{field:"cantidad",headerName:"Cantidad",filter:!0},{field:"fecha_solicitud",headerName:"Fecha",filter:!0,valueFormatter:e=>new Date(e.value).toLocaleDateString("es-ES")},{field:"estado.nombre",headerName:"Estado",filter:!0}]}ngOnInit(){this.loadTabla()}fetchSolicitudes(){this.solicitudesList=this.solicitudInventarioService.cargarTodasLasSolicitudes().pipe(U(e=>e.data))}loadTabla(){this.fetchSolicitudes()}close(){this.modal.dismissAll()}gridReady(e){this.gridApi=e.api}ngOnDestroy(){}static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275cmp=b({type:l,selectors:[["app-tabla-inventario"]],standalone:!0,features:[h],decls:18,vars:3,consts:[[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"path1"],[1,"path2"],["id","myGrid",2,"height","calc(100dvh - 281px)",3,"ngClass"],[2,"width","100%","height","100%",3,"gridReady","rowData","loading","columnDefs","enableCellTextSelection","localeText","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),m("click",function(){return r.loadTabla()}),i(5,"span",5),s(6,"span",6),i(7,"span",7),a(8,"Actualizar"),n()()()(),i(9,"button",8),m("click",function(){return r.close()}),i(10,"i",9),s(11,"span",10)(12,"span",11),n()()(),i(13,"div",12),g(14,qe,2,8)(15,Ge,4,0),me(16,14,Be,15),de(),n()()()),t&2&&(d(13),p("ngClass",fe(1,Ve,r.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[y,ve,ye]})}}return l})();function Oe(l,o){l&1&&(i(0,"div",24)(1,"div",25)(2,"span",26),a(3,"Cargando..."),n()()())}function Re(l,o){if(l&1){let e=$();i(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"button",31),m("click",function(){let r=N(e).$implicit,u=T();return L(u.openEditarModal(r))}),s(5,"span",32),n(),i(6,"button",33),m("click",function(){let r=N(e).$implicit,u=T();return L(u.openBorrarModal(r))}),s(7,"span",34),n()(),i(8,"div",35),s(9,"img",36),n()(),i(10,"div",37)(11,"h5",38),a(12),n(),i(13,"p",39),a(14),n(),i(15,"p",39)(16,"strong"),a(17,"Stock:"),n(),a(18),n(),i(19,"button",40),m("click",function(){let r=N(e).$implicit,u=T();return L(u.openAgregarModal(r))}),s(20,"span",19),a(21," Agregar "),n()()()()}if(l&2){let e,t=o.$implicit,r=T();d(9),ie("src",(e=t.banner_url)!==null&&e!==void 0?e:r.banner_url,se),ie("alt",t.nombre),d(3),ne(t.nombre),d(2),ne(t.descripcion),d(4),ue(" ",t.stock,"")}}var xe=class le{constructor(){this.inventarioService=c(E),this.isLoading=c(k).isLoading,this.theme=c(X),this.modal=c(I),this.banner_url="https://cdn-icons-png.flaticon.com/512/9573/9573235.png",this.inventarioList=new Q,this.localeText=Y}ngOnInit(){this.fetchInventario()}fetchInventario(){this.inventarioList=this.inventarioService.getAll().pipe(U(o=>(console.log("Inventario recibido:",o.data),o.data)),Ce(this))}loadTabla(){this.fetchInventario()}gridReady(o){this.gridApi=o.api}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("item-search").value)}openCrearModal(){this.modal.open(Z,{size:"350px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchInventario()})}openEditarModal(o){let e=this.modal.open(ee);e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.fetchInventario()})}openBorrarModal(o){if(!o.id){console.error("El art\xEDculo no tiene un id_inventario definido.");return}let e=this.modal.open(Ie,{size:"300px",animation:!0,centered:!0});e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.fetchInventario()})}openAgregarModal(o){if(!o.id){console.error("El art\xEDculo no tiene un id_inventario definido.");return}let e=this.modal.open(te,{size:"300px",animation:!0,centered:!0});e.componentInstance.inventarioId=o.id,e.componentInstance.onSaveComplete.subscribe(()=>{this.fetchInventario()})}openTablaInventarioModal(){this.modal.open(ke,{size:"xl",animation:!0,centered:!0})}ngOnDestroy(){}static{this.\u0275fac=function(e){return new(e||le)}}static{this.\u0275cmp=b({type:le,selectors:[["app-inventario"]],standalone:!0,features:[h],decls:32,vars:6,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"d-flex","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","item-search","name","search","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],[1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],["class","loading-container d-flex justify-content-center align-items-center",4,"ngIf"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"loading-container","d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-md-4"],[1,"card","mb-4",2,"width","18rem","padding","5px"],[1,"position-relative",2,"padding-top","40px"],[1,"action-buttons",2,"position","absolute","top","0","right","10px","z-index","1"],["type","button",1,"btn","btn-icon","btn-sm","bg-success",2,"margin-right","5px",3,"click"],[1,"ki-solid","ki-pencil","text-white"],["type","button",1,"btn","btn-icon","btn-sm","btn-danger",3,"click"],[1,"ki-solid","ki-trash","text-white"],[1,"image-container","img-inventory",2,"border-radius","8px","overflow","hidden"],[1,"card-img-top",2,"width","100%","height","auto",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button",1,"btn","btn-primary","btn-lg","w-100","d-flex","justify-content-center","align-items-center",3,"click"]],template:function(e,t){e&1&&(i(0,"app-header"),ce(1,0),i(2,"h1",1)(3,"span",2),a(4,"Inventario"),n()(),pe(),n(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"form",6),s(9,"input",7),i(10,"i",8),s(11,"span",9)(12,"span",10),n(),i(13,"input",11),m("input",function(){return t.onFilterTextBoxChanged()}),n()(),i(14,"div",12)(15,"button",13),m("click",function(){return t.loadTabla()}),i(16,"span",14),s(17,"span",15),i(18,"span",16),a(19,"Actualizar"),n()()(),i(20,"button",17),m("click",function(){return t.openTablaInventarioModal()}),a(21,"Tabla Inventario"),n(),i(22,"button",18),m("click",function(){return t.openCrearModal()}),i(23,"span",14),s(24,"span",19),i(25,"span",20),a(26,"A\xF1adir"),n()()()()(),g(27,Oe,4,0,"div",21),f(28,"async"),i(29,"div",22),g(30,Re,22,5,"div",23),f(31,"async"),n()()()),e&2&&(d(27),p("ngIf",v(28,2,t.isLoading)),d(3),p("ngForOf",v(31,4,t.inventarioList)))},dependencies:[y,ge,x,_,he]})}};xe=F([A()],xe);export{xe as InventarioComponent};
