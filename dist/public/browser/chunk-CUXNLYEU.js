import{a as ne,b as ae,c as se,d as de,e as le,f as j}from"./chunk-SBHJJORO.js";import{a as I}from"./chunk-4NRGEHWP.js";import"./chunk-WR5UTYWW.js";import{b as x}from"./chunk-MZ5GG2VU.js";import{ib as y,jb as me,lb as pe}from"./chunk-OSQG6LRP.js";import"./chunk-QJRD3SBW.js";import{a as ce}from"./chunk-L4ZHC2S3.js";import"./chunk-T5EURV5D.js";import"./chunk-ZK2D5MUY.js";import{a as ie}from"./chunk-I5IYTPG5.js";import{a as re}from"./chunk-UU7FDT6A.js";import"./chunk-UAJD3ZHR.js";import"./chunk-K7PIUIFR.js";import{f as oe}from"./chunk-6DZXAK53.js";import"./chunk-JKPBS6JL.js";import"./chunk-GT4JH6HJ.js";import"./chunk-EBZKSOFQ.js";import{a as ee,b as te}from"./chunk-KG3B2A6X.js";import{o as C,u as b}from"./chunk-CZPC3FHQ.js";import{a as $}from"./chunk-NMGGHNE5.js";import"./chunk-A3C2G7L3.js";import"./chunk-KNEUCQQI.js";import"./chunk-GKZUPR7X.js";import{j as h,l as v,o as P}from"./chunk-R7YU5FNY.js";import{m as J,o as K,t as X,v as Y}from"./chunk-DP3M2V7L.js";import{Aa as G,Ba as c,C as l,Ic as Z,Lb as w,Nc as u,Oc as f,Pb as z,Rb as B,Ub as _,a as L,b as O,bc as r,ca as A,cc as n,dc as S,dd as g,ec as H,fc as q,n as T,oc as k,qa as m,uc as M,v as N,vb as Q,vc as D,w as V,wa as s,wb as d,wc as E,yc as p,zc as U}from"./chunk-B7JMKZ3I.js";var ue=[{id:0,nombre:"Cronograma",tag:"general"},{id:1,nombre:"Psicologia 1",tag:"psicologia-1"},{id:2,nombre:"Psicologia 2",tag:"psicologia-2"},{id:3,nombre:"Lenguaje 1",tag:"lenguaje-1"},{id:4,nombre:"Lenguaje 2",tag:"lenguaje-2"},{id:5,nombre:"Lenguaje 3",tag:"lenguaje-3"},{id:6,nombre:"Ocupacional 1",tag:"ocupacional-1"},{id:7,nombre:"Ocupacional 2",tag:"ocupacional-2"},{id:8,nombre:"Ocupacional 3",tag:"ocupacional-3"},{id:9,nombre:"Fisica 1",tag:"fisica-1"},{id:10,nombre:"Fisica 2",tag:"fisica-2"},{id:11,nombre:"Fisica 3",tag:"fisica-3"},{id:12,nombre:"Neuro",tag:"neuro"},{id:13,nombre:"Pediasuit",tag:"pediasuit"}];var ve=["dropdown"],Ce=()=>[J,K,y,X],be=t=>({"opacity-50":t});function ye(t,e){if(t&1&&(S(0,"full-calendar",12),u(1,"async"),u(2,"async"),u(3,"async")),t&2){let i=k(2);_("ngClass",Z(10,be,f(1,4,i.isLoading)))("loading",f(2,6,i.isLoading))("events",f(3,8,i.citasEvent))("options",i.calendarOptions)}}function xe(t,e){if(t&1&&w(0,ye,4,12,"full-calendar",11),t&2){let i=k();_("ngIf",i.calendarVisible)}}function Re(t,e){t&1&&(r(0,"div",13)(1,"div",14)(2,"span",15),p(3,"Loading..."),n()()())}var R=class F{get bodyParams(){return{startWeek:this.startWeek,endWeek:this.endWeek}}constructor(e,i,o,a){this.changeDetector=e,this.router=i,this.modalService=o,this.route=a,this.citasService=s(ce),this.terapiasService=s(re),this.isLoading=s($).isLoading,this.cronogramas=ue,this.citasEvent=new T,this.terapiasList=[],this.subscriptions=[],this.listLoading=!1,this.startWeek=j().startOfWeek,this.endWeek=j().endOfWeek,this.calendarVisible=!0,this.calendarOptions={plugins:[ne,ae,se,de],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},aspectRatio:1,allDaySlot:!1,expandRows:!0,slotDuration:"00:45:00",slotMinTime:"08:00",slotMaxTime:"20:01:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"narrow"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},initialView:"timeGridWeek",weekends:!0,editable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),locale:le,datesSet:W=>{this.startWeek=W.view.activeStart,this.endWeek=W.view.activeEnd,this.loadFilteredCitas()}},this.currentEvents=[]}ngOnInit(){}ngAfterViewInit(){}loadFilteredCitas(){this.dropdown.selectedItems.subscribe(e=>{e.length>0&&this.loadCitas(O(L({},this.bodyParams),{filter:!0,idsPersonal:e})),e.length===0&&this.loadCitas(this.bodyParams)})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadCitas(e){this.citasEvent=this.citasService.getAll(e).pipe(A(1),l(i=>i.data),te(this))}handleCalendarToggle(){this.calendarVisible=!this.calendarVisible}handleWeekendsToggle(){let{calendarOptions:e}=this;e.weekends=!e.weekends}handleDateSelect(e){this.modalService.open(I,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventForm.patchValue({fecha_inicio:e.startStr.substring(0,10),hora_inicio:e.startStr.substring(11,16),hora_fin:e.endStr.substring(11,16)})}handleEventClick(e){let i=e.event,o=this.modalService.open(pe,{centered:!0,size:"100",scrollable:!0,backdrop:"static"});o.componentInstance.eventId=i.id,o.componentInstance.citaId=i.extendedProps.id_cita,o.componentInstance.eventUpdated.subscribe(()=>{this.loadCitas(this.bodyParams)})}openModal(){this.modalService.open(I,{centered:!0,size:"lg",backdrop:"static"}).componentInstance.eventSubmitted.subscribe(()=>{this.loadCitas(this.bodyParams)})}static{this.\u0275fac=function(i){return new(i||F)(d(g),d(v),d(C),d(h))}}static{this.\u0275cmp=G({type:F,selectors:[["app-reservar-cita"]],viewQuery:function(i,o){if(i&1&&(M(y,5),M(ve,7)),i&2){let a;D(a=E())&&(o.fullCalendarComponent=a.first),D(a=E())&&(o.dropdown=a.first)}},decls:20,vars:1,consts:[["dropdown",""],["header-title",""],[1,"d-flex","flex-column","text-white","fw-bold","my-1"],[1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-header"],[1,"card-title","fw-bold"],[1,"card-toolbar","d-flex"],[1,"card-body",2,"border","none","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)","border-radius","0 0 15px 15px"],[1,"demo-app-main"],[3,"ngClass","loading","events","options",4,"ngIf"],[3,"ngClass","loading","events","options"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,o){i&1&&(r(0,"app-header"),H(1,1),r(2,"h1",2),p(3," Cronograma General "),n(),q(),n(),r(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),p(9),n(),r(10,"div",8)(11,"div"),S(12,"app-dropdown",null,0),n()()(),r(14,"div",9)(15,"div",10),w(16,xe,1,1)(17,Re,4,0),z(18,16,Ce,null,17),B(),n()()()()()),i&2&&(Q(9),U(o.cronogramaActual==null?null:o.cronogramaActual.nombre))},dependencies:[b,x]})}};R=N([ee({checkProperties:!0}),V("design:paramtypes",[g,v,C,h])],R);var ge=(t,e)=>s(ie).getHorarios(t.paramMap.get("terapist")).pipe(l(o=>o.data));var we=[{path:"",component:R},{path:":tag",loadComponent:()=>import("./chunk-52LIX42J.js").then(t=>t.CronogramaComponent)},{path:":tag/:terapist",resolve:{personal:ge},loadComponent:()=>import("./chunk-I7VU5CXX.js").then(t=>t.EspecialistaComponent)}],he=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=m({imports:[P.forChild(we),P]})}}return t})();var bt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=m({imports:[Y,he,me,b,oe,x]})}}return t})();export{bt as ReservarCitaModule};
