import{a as c}from"./chunk-GKZUPR7X.js";import{b as u}from"./chunk-ZM3MROS5.js";import{S as s,ja as n,pa as l,va as p,z as i}from"./chunk-B7JMKZ3I.js";var d=(()=>{class e{constructor(t){this.http=t,this.apiUrl=c.apiUrl}register({name:t,email:o,dni:r,password:m}){return this.http.post(`${this.apiUrl}/register`,{name:t,email:o,dni:r,password:m}).pipe(s(a=>(console.error("Error en el registro",a),i(a))))}login({email:t,password:o}){return this.http.post(`${this.apiUrl}/login`,{email:t,password:o}).pipe(n(r=>{localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user))}),s(r=>(console.error("Error en el login",r),i(r))))}logout(){return this.http.post(`${this.apiUrl}/logout`,{}).pipe(n(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}),s(t=>(console.error("Error en el logout",t),i(t))))}user(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}isAuthenticated(){return!!localStorage.getItem("token")}isAdmin(){let t=this.user();return t?t.tipo_user==="administrador":!1}isPaciente(){let t=this.user();return t?t.tipo_user==="paciente":!1}isTerapista(){let t=this.user();return t?t.tipo_user==="terapista":!1}getToken(){return localStorage.getItem("token")}static{this.\u0275fac=function(o){return new(o||e)(p(u))}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{d as a};
