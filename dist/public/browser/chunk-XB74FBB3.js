import{a as b}from"./chunk-TWOZQJ7G.js";import{a as Y}from"./chunk-3YJPJYYE.js";import{a as X}from"./chunk-MYRVSVX3.js";import{a as Q,b as T}from"./chunk-73QAVBZN.js";import{a as K}from"./chunk-C4LB5HPP.js";import{i as W,j as J}from"./chunk-FR665RP3.js";import{b as q}from"./chunk-O36CONK3.js";import{e as V,j as k,l as g,t as C,v,y as l}from"./chunk-FM6AGUVW.js";import{$c as u,B as N,C as E,Da as j,Ea as h,Ec as G,Gc as U,I as x,Kb as I,Kc as _,Lc as R,Na as A,Oa as M,Ob as L,Qb as P,Tb as S,ac as a,bc as r,cc as D,dc as z,ec as O,gc as H,mc as B,nc as w,t as y,ta as p,wb as F,wc as f,xb as c,za as m}from"./chunk-6QDZBSPE.js";var te=()=>[k,import("./chunk-CY3GPE7K.js").then(t=>t.AgGridAngular)],ie=t=>[t];function re(t,e){if(t&1){let i=H();a(0,"ag-grid-angular",12),_(1,"async"),_(2,"async"),B("gridReady",function(n){A(i);let ee=w();return M(ee.gridReady(n))}),r()}if(t&2){let i=w();S("rowData",R(1,7,i.citasPaciente))("columnDefs",i.colDefs)("loading",R(2,9,i.isLoading))("localeText",i.localeText)("enableCellTextSelection",!0)("ariaHidden",!0)("pagination",!0)}}function oe(t,e){t&1&&(a(0,"div",13)(1,"div",14)(2,"span",15),f(3,"Loading..."),r()()())}var o,d=(o=class{constructor(e,i,s,n){this.route=e,this.changeDetector=i,this.router=s,this.citaService=n,this.localeText=X,this.isLoading=m(K).isLoading,this.theme=m(W),this.authService=m(q),this.pacienteService=m(Y),this.pacientesList=new y,this.citasPaciente=new y,this.user=this.authService.user(),this.colDefs=[{field:"paciente.nombre",headerName:"Paciente",filter:!0},{field:"tipocita.nombre",headerName:"Terapia",filter:!0},{field:"sede.nombre",headerName:"Sede",filter:!0},{field:"fecha",headerName:"Fecha de Cita",filter:!0},{field:"hora",headerName:"Hora de Cita",filter:!0},{field:"terapias.sesiones[0].status",headerName:"Estado de Sesi\xF3n",filter:!0},{field:"terapias.sesiones[0].personal.nombre",headerName:"Terapista",filter:!0},{field:"estado",headerName:"Estado",filter:!0}]}ngOnInit(){if(this.user){console.log("Usuario autenticado:",this.user);let e=this.user.id.toString();this.loadCitasPaciente(e)}else console.error("No se ha encontrado un usuario autenticado")}loadPacientes(){this.pacientesList=this.pacienteService.getAll().pipe(x(e=>e.data),T(this))}loadCitasPaciente(e){this.citasPaciente=this.citaService.getCitasByUser(e).pipe(x(i=>(console.log("Datos de citas recibidos:",i.data),i.data)),T(this))}gridReady(e){this.gridApi=e.api,this.sizeColumnsToFit()}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}},o.\u0275fac=function(i){return new(i||o)(c(C),c(u),c(v),c(b))},o.\u0275cmp=j({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[G],decls:19,vars:3,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"d-flex","justify-content-center","mt-4"],[1,"card","w-75","shadow-sm"],[1,"card-header","bg-none","border-bottom-2"],[1,"card-title","fs-4","m-0","text-start"],[1,"card-body"],[2,"height","350px",3,"ngClass"],[1,"my-3"],[1,"card-footer","bg-none","border-top-2"],[1,"dropdown"],["loadingMessage","Cargando...",2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","loading","localeText","enableCellTextSelection","ariaHidden","pagination"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,s){i&1&&(a(0,"app-header"),z(1,0),a(2,"h1",1)(3,"span",2),f(4,"Dashboard"),r()(),O(),r(),a(5,"div",3)(6,"div",4)(7,"div",5)(8,"h2",6),f(9,"Mis Citas"),r()(),a(10,"div",7)(11,"div",8),I(12,re,3,11)(13,oe,4,0),L(14,12,te,13),P(),r(),D(16,"hr",9),r(),a(17,"div",10),D(18,"div",11),r()()()),i&2&&(F(11),S("ngClass",U(1,ie,s.theme.getThemeMode()==="light"?"ag-theme-quartz":"ag-theme-quartz-dark")))},dependencies:[g,V,J]}),o);d=N([Q({checkProperties:!0}),E("design:paramtypes",[C,u,v,b])],d);var ae=[{path:"",component:d},{path:"reservar-cita/:tag",loadChildren:()=>import("./chunk-Y5X72H3K.js").then(t=>t.ReservarCitaModule)}],$=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=h({type:e}),e.\u0275inj=p({imports:[l.forChild(ae),l]});let t=e;return t})();var ne=[{path:"",component:d}],Le=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=h({type:e}),e.\u0275inj=p({imports:[g,$,l.forChild(ne)]});let t=e;return t})();export{Le as DashboardModule};
