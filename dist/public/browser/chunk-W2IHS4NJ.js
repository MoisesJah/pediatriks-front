import{a as G,b as $,c as q,d as H}from"./chunk-W7EFOQVA.js";import"./chunk-ZMD5T4OP.js";import{a as W}from"./chunk-QS4OO5UP.js";import{a as P}from"./chunk-E6U7EDCE.js";import"./chunk-7APDJY62.js";import"./chunk-GT4JH6HJ.js";import"./chunk-EBZKSOFQ.js";import{b as j}from"./chunk-JBNC72Z7.js";import"./chunk-QA4O23TC.js";import{o as D}from"./chunk-CUMGWIKM.js";import"./chunk-OSUEIBEK.js";import"./chunk-HU6BYMHG.js";import{a as B}from"./chunk-U2EAJGNN.js";import{a as O}from"./chunk-4TSZW343.js";import{a as R,b as L}from"./chunk-OO4BC6LN.js";import{a as N}from"./chunk-67M5LFVM.js";import"./chunk-GKZUPR7X.js";import"./chunk-QUGPZPJP.js";import{n as w,o as I,r as z,t as M,v as A}from"./chunk-O2FCGDZ2.js";import{Ba as _,Bc as a,C as T,Cc as h,Dc as u,Jc as k,Lc as d,Mb as f,Qc as g,Rc as v,Vb as s,ec as t,fc as n,gc as r,hc as E,ic as F,n as S,qc as c,v as C,wb as o,xa as m}from"./chunk-H565K2KG.js";var J=l=>({"background-color":l}),x=l=>({color:l});function K(l,e){l&1&&(t(0,"div",24)(1,"div",25)(2,"span",26),a(3,"Loading..."),n()()())}function Q(l,e){if(l&1&&(t(0,"div",27)(1,"div",28),r(2,"div",29),t(3,"div",30)(4,"h3"),a(5),n(),t(6,"p"),a(7),n(),t(8,"div",31)(9,"div",32)(10,"i",33),r(11,"span",10)(12,"span",11)(13,"span",34),n(),a(14),t(15,"span"),a(16,"precio"),n()(),t(17,"div",35)(18,"i",36),r(19,"span",10)(20,"span",11)(21,"span",34)(22,"span",37)(23,"span",38),n(),a(24),t(25,"span"),a(26,"Pacientes"),n()(),t(27,"div",35)(28,"i",39),r(29,"span",10)(30,"span",11),n(),t(31,"span",40),a(32),n(),t(33,"span"),a(34,"Duraci\xF3n"),n()()()()()()),l&2){let i=e.$implicit;o(2),s("ngStyle",d(9,J,i.color)),o(3),h(i.nombre),o(2),h(i.descripcion),o(3),s("ngStyle",d(11,x,i.color)),o(4),u(" S/",i.precio," "),o(4),s("ngStyle",d(13,x,i.color)),o(6),u(" ",i.pacientes," "),o(4),s("ngStyle",d(15,x,i.color)),o(4),u("",i.duracion.split(":")[1]," min")}}var U=class y{constructor(){this.modal=m(D),this.terapias=m(W),this.theme=m(N),this.isLoading=m(O).isLoading,this.terapiasList=new S,this.localeText=B,this.colDefs=[{headerName:"Color",field:"color",maxWidth:75,filter:!1,cellRenderer:e=>`<div class="h-20px w-20px mt-3 rounded-circle" style="background-color: ${e.value}"></div>`},{field:"nombre",headerName:"Nombre",filter:!0,resizable:!0},{field:"descripcion",headerName:"Descripci\xF3n",filter:!0,resizable:!0},{field:"precio",headerName:"Precio",maxWidth:120,filter:"agNumberColumnFilter",cellClass:"fw-bold",valueFormatter:e=>P(e.value),resizable:!0},{headerName:"Duraci\xF3n",field:"duracion",maxWidth:150,filter:"agNumberColumnFilter",valueFormatter:e=>e.value?`${e.value.substring(0,5)} min`:"",resizable:!0},{headerName:"Acciones",cellRenderer:H,cellRendererParams:{onEdit:e=>this.openEditModal(e),onDelete:e=>this.openDeleteModal(e)},maxWidth:100,resizable:!1}]}ngOnInit(){this.fetchTerapias()}fetchTerapias(){this.terapiasList=this.terapias.getAll().pipe(T(e=>e.data),L(this))}gridReady(e){this.gridApi=e.api,this.sizeColumnsToFit()}sizeColumnsToFit(){let e=()=>this.gridApi.sizeColumnsToFit();new ResizeObserver(()=>{window.innerWidth>=768&&e()}).observe(document.body),e()}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("terapia-search").value)}ngOnDestroy(){}loadTabla(){this.fetchTerapias()}openCreateModal(){this.modal.open(G,{size:"300px",animation:!0,centered:!0}).componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openEditModal(e){let i=this.modal.open($,{size:"300px",animation:!0,centered:!0});i.componentInstance.terapiaId=e.id_terapia,i.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}openDeleteModal(e){let i=this.modal.open(q,{size:"300px",animation:!0,centered:!0});i.componentInstance.terapiaId=e.id_terapia,i.componentInstance.onSaveComplete.subscribe(()=>{this.fetchTerapias()})}static{this.\u0275fac=function(i){return new(i||y)}}static{this.\u0275cmp=_({type:y,selectors:[["app-terapias"]],standalone:!0,features:[k],decls:31,vars:6,consts:[["header-title",""],[1,"d-flex","flex-column","text-gray-900","fw-bold","my-1"],[1,"",2,"color","white"],[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"container-xxl"],[1,"card","shadow","p-2","px-4"],[1,"d-flex","py-4","justify-content-between","align-items-center"],["data-kt-search-element","form","autocomplete","off",1,"position-relative"],["type","hidden"],[1,"ki-duotone","ki-magnifier","fs-2","search-icon","position-absolute","top-50","translate-middle-y","ms-4"],[1,"path1"],[1,"path2"],["type","search","id","terapia-search","name","search","value","","placeholder","B\xFAsqueda","data-kt-search-element","input",1,"form-control","custom-form-control","ps-13",3,"input"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-rotate-right"],[1,"ms-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ki-solid","ki-plus","text-white","fs-1"],[1,"text-white","ms-2"],["class","d-flex justify-content-center align-items-center","style","height: 100%",4,"ngIf"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-md-4"],[1,"card"],[1,"h-10px","rounded-top-3",3,"ngStyle"],[1,"card-body"],[1,"d-flex","my-3","justify-content-between","align-items-center","gap-2"],[1,"rounded-2","p-2","bg-gray-200","d-flex","gap-1","flex-column","justify-content-center","align-items-center"],[1,"ki-duotone","ki-tag","fs-1",3,"ngStyle"],[1,"path3"],[1,"rounded-2","p-2","bg-gray-200","gap-1","d-flex","flex-column","justify-content-center","align-items-center"],[1,"ki-duotone","ki-people","fs-1",3,"ngStyle"],[1,"path4"],[1,"path5"],[1,"ki-duotone","ki-time","fs-1",3,"ngStyle"],[1,"fw-bold"]],template:function(i,p){i&1&&(t(0,"app-header"),E(1,0),t(2,"h1",1)(3,"span",2),a(4,"Terapias"),n()(),F(),n(),t(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7),r(10,"input",8),t(11,"i",9),r(12,"span",10)(13,"span",11),n(),t(14,"input",12),c("input",function(){return p.onFilterTextBoxChanged()}),n()(),t(15,"div",13)(16,"button",14),c("click",function(){return p.loadTabla()}),t(17,"span",15),r(18,"span",16),t(19,"span",17),a(20,"Actualizar"),n()()(),t(21,"button",18),c("click",function(){return p.openCreateModal()}),t(22,"span",15),r(23,"span",19),t(24,"span",20),a(25,"A\xF1adir"),n()()()()(),f(26,K,4,0,"div",21),g(27,"async"),t(28,"div",22),f(29,Q,35,17,"div",23),g(30,"async"),n()()()()),i&2&&(o(26),s("ngIf",v(27,2,p.isLoading)),o(3),s("ngForOf",v(30,4,p.terapiasList)))},dependencies:[A,w,I,z,M,j],styles:["table[_ngcontent-%COMP%]   td[id=descripcion][_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}"]})}};U=C([R({checkProperties:!0})],U);export{U as TerapiasComponent};
