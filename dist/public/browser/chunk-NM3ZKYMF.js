import{a as de}from"./chunk-WXQDA2BM.js";import{a as w}from"./chunk-35XITZXV.js";import{a as z}from"./chunk-IWNHHSHM.js";import{c as K}from"./chunk-ZUYGAZX4.js";import{a as Z,b as N}from"./chunk-FKRAWMO5.js";import{b as I,c as R}from"./chunk-XWWCT2EB.js";import{a as F}from"./chunk-PQDQNIDX.js";import{a as me}from"./chunk-OIXA5WM3.js";import{D as U,E as m,F as V,G as q,J as P,M as G,P as $,U as H,V as E,a as le,f as T,i as x,o as pe}from"./chunk-MFZOMSUD.js";import{Aa as A,Ab as S,Ac as s,B as j,Ba as c,C as B,Fa as C,Ga as ie,Ha as ne,I as M,Lc as h,Mc as b,Ob as k,Pa as oe,Qa as re,Xb as f,Ya as _,Za as ae,ec as o,fc as n,gc as a,kc as se,qc as d,rc as Q,t as D,ua as O,va as ee,xa as te,zb as u}from"./chunk-JQJUQ5FW.js";var Y=(()=>{let e=class e{constructor(t){this.http=t,this.apiUrl=me.apiUrl}getAll(){return this.http.get(`${this.apiUrl}/tipo-user/list`)}getPacientes(){return this.http.get(`${this.apiUrl}/usuario/list/paciente`)}getById(t){return this.http.get(`${this.apiUrl}/tipo-user/list/${t}`)}create(t){return this.http.post(`${this.apiUrl}/tipo-user/add`,t)}update(t,i){return this.http.put(`${this.apiUrl}/tipouser/edit/${i}`,t)}delete(t){return this.http.delete(`${this.apiUrl}/tipouser/delete/${t}`)}};e.\u0275fac=function(i){return new(i||e)(A(pe))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var W=class{constructor(e,l){this._document=l;let t=this._textarea=this._document.createElement("textarea"),i=t.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",t.setAttribute("aria-hidden","true"),t.value=e,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let e=this._textarea,l=!1;try{if(e){let t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),l=this._document.execCommand("copy"),t&&t.focus()}}catch{}return l}destroy(){let e=this._textarea;e&&(e.remove(),this._textarea=void 0)}},be=(()=>{let e=class e{constructor(t){this._document=t}copy(t){let i=this.beginCopy(t),p=i.copy();return i.destroy(),p}beginCopy(t){return new W(t,this._document)}};e.\u0275fac=function(i){return new(i||e)(A(le))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),ge=new te("CDK_COPY_TO_CLIPBOARD_CONFIG"),J=(()=>{let e=class e{constructor(t,i,p){this._clipboard=t,this._ngZone=i,this.text="",this.attempts=1,this.copied=new _,this._pending=new Set,p&&p.attempts!=null&&(this.attempts=p.attempts)}copy(t=this.attempts){if(t>1){let i=t,p=this._clipboard.beginCopy(this.text);this._pending.add(p);let v=()=>{let X=p.copy();!X&&--i&&!this._destroyed?this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(v,1)):(this._currentTimeout=null,this._pending.delete(p),p.destroy(),this.copied.emit(X))};v()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}};e.\u0275fac=function(i){return new(i||e)(S(be),S(ae),S(ge,8))},e.\u0275dir=ne({type:e,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(i,p){i&1&&d("click",function(){return p.copy()})},inputs:{text:[0,"cdkCopyToClipboard","text"],attempts:[0,"cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"},standalone:!0});let r=e;return r})(),Ae=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ee({});let r=e;return r})();function _e(r,e){if(r&1){let l=se();o(0,"div",11)(1,"label",12),s(2," Seleccionar Terapista "),n(),o(3,"ng-select",36),h(4,"async"),h(5,"async"),d("change",function(i){oe(l);let p=Q();return re(p.changePersonal(i))}),n()()}if(r&2){let l=Q();u(3),f("items",b(4,3,l.personalList))("loading",b(5,5,l.isLoading))("loadingText","Cargando...")}}function Se(r,e){r&1&&a(0,"span",37)}var g,ue=(g=class{constructor(e){this.fb=e,this.modal=c(I),this.userService=c(w),this.toast=c(z),this.personalService=c(de),this.tipouserService=c(Y),this.isLoading=c(F).isLoading,this.tipoUserList=new D,this.personalList=new D,this.isTipoTerapista=!1,this.onSaveComplete=new _,this.userForm=this.fb.group({name:["",m.required],email:["",[m.required,m.email]],dni:["",[m.required,m.minLength(8),m.pattern("^[0-9]*")]],id_tipousers:[null,m.required],telefono:["",[m.required,m.pattern("^[0-9]*")]],password:["",[m.required,m.minLength(8)]],direccion:[""],id_personal:[null]})}ngOnInit(){this.loadTipousers(),this.loadPersonal()}changeTipoUser(e){this.isTipoTerapista=e&&e?.nombre==="terapista",this.isTipoTerapista?(this.userForm.get("id_personal")?.setValidators(m.required),this.userForm.get("id_personal")?.updateValueAndValidity()):(this.userForm.get("id_personal")?.clearValidators(),this.userForm.get("id_personal")?.updateValueAndValidity())}changePersonal(e){e?this.userForm.patchValue({name:e.nombre,email:e.correo,dni:e.dni,telefono:e.telefono}):this.userForm.reset({name:"",email:"",dni:"",telefono:""})}generatePassword(){let l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let i=0;i<12;i++){let p=Math.floor(Math.random()*l.length);t+=l[p]}this.userForm.get("password")?.patchValue(t)}close(){this.modal.dismissAll()}loadTipousers(){this.tipoUserList=this.tipouserService.getAll().pipe(M(e=>e.data),N(this))}loadPersonal(){this.personalList=this.personalService.getAll().pipe(M(e=>e.data),N(this))}save(){this.userForm.valid&&this.userService.create(this.userForm.value).subscribe({next:()=>{this.close(),this.onSaveComplete.emit()},error:e=>{if(e.error.errors){let l=Object.values(e.error.errors).join(`
`);this.toast.error(l,"Error")}else this.toast.error("Ocurrio un error al crear el usuario","Error")}})}},g.\u0275fac=function(l){return new(l||g)(S(E))},g.\u0275cmp=C({type:g,selectors:[["app-create-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:62,vars:16,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"text-primary"],[1,"ki-duotone","ki-add-files","text-gray-900","fs-1",2,"vertical-align","text-top"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","exampleFormControlInput1",1,"required","form-label"],["type","text","formControlName","name","placeholder","Ingresa tu Nombre",1,"form-control"],[1,"row"],[1,"form-group","col-6"],["type","text","pattern","[0-9]*","formControlName","dni","placeholder","Ingresa tu DNI",1,"form-control"],["type","email","formControlName","telefono","placeholder","Ingresa tu Tel\xE9fono",1,"form-control"],["type","email","formControlName","email","placeholder","Ingresa tu Correo",1,"form-control"],["for","exampleFormControlInput1",1,"form-label"],["type","email","formControlName","direccion","placeholder","Ingresa tu Direcci\xF3n",1,"form-control"],["bindValue","id_tipousers","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_tipousers",3,"change","items","loading","loadingText"],["class","form-group",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between",2,"margin-bottom","0.75rem"],["for","password",1,"required","form-label","d-flex","align-items-center","justify-content-between"],["ngbTooltip","Guarde la contrasen\u0303a en un lugar seguro para no perderla",2,"margin-left","0.15rem"],[1,"ki-solid","ki-information-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"position-relative"],["formControlName","password","type","password","placeholder","Ingresa tu Contrase\xF1a",1,"form-control","pe-8"],["type","button","ngbTooltip","Copiar","placement","bottom",1,"btn","btn-icon","copy-icon","btn-sm","copy-icon","btn-active-color-primary","btn-color-gray-800","position-absolute",3,"cdkCopyToClipboard"],[1,"ki-solid","ki-copy","fs-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],["bindValue","id_personal","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_personal",3,"change","items","loading","loadingText"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(l,t){if(l&1&&(o(0,"div",0)(1,"h4",1)(2,"span",2)(3,"i",3),a(4,"span",4)(5,"span",5)(6,"span",6),n()(),s(7," A\xF1adir Usuario "),n(),o(8,"button",7),d("click",function(){return t.close()}),o(9,"i",8),a(10,"span",4)(11,"span",5),n()()(),o(12,"div",9)(13,"form",10)(14,"div",11)(15,"label",12),s(16,"Nombres"),n(),a(17,"input",13),n(),o(18,"div",14)(19,"div",15)(20,"label",12),s(21,"DNI"),n(),a(22,"input",16),n(),o(23,"div",15)(24,"label",12),s(25," Tel\xE9fono "),n(),a(26,"input",17),n()(),o(27,"div",11)(28,"label",12),s(29," Correo "),n(),a(30,"input",18),n(),o(31,"div",11)(32,"label",19),s(33," Direcci\xF3n "),n(),a(34,"input",20),n(),o(35,"div",11)(36,"label",12),s(37," Tipo de usuario "),n(),o(38,"ng-select",21),h(39,"async"),h(40,"async"),d("change",function(p){return t.changeTipoUser(p)}),n()(),k(41,_e,6,7,"div",22),o(42,"div",11)(43,"div",23)(44,"label",24),s(45," Contrasen\u0303a "),o(46,"span",25),a(47,"i",26),n()(),o(48,"button",27),d("click",function(){return t.generatePassword()}),s(49," autogenerar "),n()(),o(50,"div",28),a(51,"input",29),o(52,"button",30),a(53,"span",31),n()()()()(),o(54,"div",32)(55,"button",33),d("click",function(){return t.close()}),s(56," Cancelar "),n(),o(57,"button",34),h(58,"async"),d("click",function(){return t.save()}),s(59," Guardar "),k(60,Se,1,0,"span",35),h(61,"async"),n()()),l&2){let i;u(13),f("formGroup",t.userForm),u(25),f("items",b(39,8,t.tipoUserList))("loading",b(40,10,t.isLoading))("loadingText","Cargando..."),u(3),f("ngIf",t.isTipoTerapista),u(11),f("cdkCopyToClipboard",(i=t.userForm.get("password"))==null?null:i.value),u(5),f("disabled",t.userForm.invalid||b(58,12,t.isLoading)),u(3),f("ngIf",b(61,14,t.isLoading))}},dependencies:[T,P,U,V,q,H,R,J,K,G,$,x]}),g);ue=j([Z({checkProperties:!0}),B("design:paramtypes",[E])],ue);function Ee(r,e){r&1&&a(0,"span",34)}var y,he=(y=class{constructor(e){this.fb=e,this.modal=c(I),this.userService=c(w),this.tipouserService=c(Y),this.toast=c(z),this.isLoading=c(F).isLoading,this.tipoUserList=new D,this.onSaveComplete=new _,this.userForm=this.fb.group({name:["",m.required],email:["",[m.required,m.email]],dni:["",[m.required,m.minLength(8),m.pattern("^[0-9]*")]],id_tipousers:[null,m.required],telefono:["",[m.required,m.pattern("^[0-9]*")]],password:["",[m.required,m.minLength(8)]],direccion:[""]})}ngOnInit(){this.userService.getById(this.userId).pipe(N(this)).subscribe(e=>{this.userForm.patchValue(e.data)}),this.loadTipousers()}loadTipousers(){this.tipoUserList=this.tipouserService.getAll().pipe(M(e=>e.data),N(this))}generatePassword(){let l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+={}[]|;:<>?,./`~",t="";for(let i=0;i<12;i++){let p=Math.floor(Math.random()*l.length);t+=l[p]}this.userForm.get("password")?.patchValue(t)}close(){this.modal.dismissAll()}edit(e,l){this.userService.update(e,l).subscribe({next:()=>{this.onSaveComplete.emit(),this.close()},error:t=>{if(t.error.errors){let i=Object.values(t.error.errors).join(`
`);this.toast.error(i,"Error")}else this.toast.error("Ocurrio un error al actualizar el usuario","Error")}})}},y.\u0275fac=function(l){return new(l||y)(S(E))},y.\u0275cmp=C({type:y,selectors:[["app-edit-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:63,vars:15,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-notepad-edit","text-gray-900","fs-1",2,"vertical-align","top"],[1,"path1"],[1,"path2"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body"],[1,"form","d-flex","flex-column","gap-4",3,"formGroup"],[1,"form-group"],["for","exampleFormControlInput1",1,"required","form-label"],["type","text","formControlName","name",1,"form-control"],[1,"row"],[1,"form-group","col-6"],["type","text","pattern","[0-9]*","formControlName","dni",1,"form-control"],["type","email","formControlName","telefono",1,"form-control"],["type","email","formControlName","email",1,"form-control"],["for","exampleFormControlInput1",1,"form-label"],["type","email","formControlName","direccion","placeholder","Ingresa tu Direcci\xF3n",1,"form-control"],["bindValue","id_tipousers","placeholder","Seleccionar","bindLabel","nombre","formControlName","id_tipousers",3,"items","loading","loadingText"],[1,"d-flex","align-items-center","justify-content-between",2,"margin-bottom","0.75rem"],["for","password",1,"required","form-label","d-flex","align-items-center","justify-content-between"],["ngbTooltip","Guarde la contrasen\u0303a en un lugar seguro para no perderla",2,"margin-left","0.15rem"],[1,"ki-solid","ki-information-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"ki-duotone","ki-note"],[1,"position-relative"],["formControlName","password","type","password",1,"form-control","pe-8"],["type","button","ngbTooltip","Copiar",1,"btn","btn-icon","btn-sm","top-0","copy-icon","end-0","btn-active-color-primary","btn-color-gray-800","position-absolute",3,"cdkCopyToClipboard"],[1,"ki-solid","ki-copy","fs-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(l,t){if(l&1&&(o(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),a(4,"span",3)(5,"span",4),n()(),s(6," Editar Informaci\xF3n "),n(),o(7,"button",5),d("click",function(){return t.close()}),o(8,"i",6),a(9,"span",3)(10,"span",4),n()()(),o(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),s(15,"Nombres"),n(),a(16,"input",11),n(),o(17,"div",12)(18,"div",13)(19,"label",10),s(20,"DNI"),n(),a(21,"input",14),n(),o(22,"div",13)(23,"label",10),s(24," Tel\xE9fono "),n(),a(25,"input",15),n()(),o(26,"div",9)(27,"label",10),s(28," Correo "),n(),a(29,"input",16),n(),o(30,"div",9)(31,"label",17),s(32," Direcci\xF3n "),n(),a(33,"input",18),n(),o(34,"div",9)(35,"label",10),s(36," Tipo de usuario "),n(),a(37,"ng-select",19),h(38,"async"),h(39,"async"),n(),o(40,"div",9)(41,"div",20)(42,"label",21),s(43," Contrasen\u0303a "),o(44,"span",22),a(45,"i",23),n()(),o(46,"button",24),d("click",function(){return t.generatePassword()}),o(47,"i",25),a(48,"span",3)(49,"span",4),n(),s(50," autogenerar "),n()(),o(51,"div",26),a(52,"input",27),o(53,"button",28),a(54,"span",29),n()()()()(),o(55,"div",30)(56,"button",31),d("click",function(){return t.close()}),s(57," Cancelar "),n(),o(58,"button",32),h(59,"async"),d("click",function(){return t.edit(t.userForm.value,t.userId)}),s(60," Actualizar "),k(61,Ee,1,0,"span",33),h(62,"async"),n()()),l&2){let i;u(12),f("formGroup",t.userForm),u(25),f("items",b(38,7,t.tipoUserList))("loading",b(39,9,t.isLoading))("loadingText","Cargando..."),u(16),f("cdkCopyToClipboard",(i=t.userForm.get("password"))==null?null:i.value),u(5),f("disabled",t.userForm.invalid||b(59,11,t.isLoading)),u(3),f("ngIf",b(62,13,t.isLoading))}},dependencies:[T,P,U,V,q,H,R,J,K,G,$,x]}),y);he=j([Z({checkProperties:!0}),B("design:paramtypes",[E])],he);function ke(r,e){r&1&&a(0,"span",13)}var gt=(()=>{let e=class e{constructor(){this.modal=c(I),this.users=c(w),this.isLoading=c(F).isLoading,this.onSaveComplete=new _}close(){this.modal.dismissAll()}delete(){this.users.delete(this.userId).subscribe(()=>{this.onSaveComplete.emit(),this.modal.dismissAll()})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=C({type:e,selectors:[["app-delete-modal"]],outputs:{onSaveComplete:"onSaveComplete"},decls:25,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title","d-flex","align-items-center","gap-1"],[1,"ki-duotone","ki-information","text-danger","fs-2hx",2,"vertical-align","middle"],[1,"path1"],[1,"path2"],[1,"path3"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-icon","btn-active-color-primary","btn-color-gray-800",3,"click"],[1,"ki-duotone","ki-cross-square","fs-1"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,p){i&1&&(o(0,"div",0)(1,"h4",1)(2,"span")(3,"i",2),a(4,"span",3)(5,"span",4)(6,"span",5),n()(),s(7," Eliminar Usuario "),n(),o(8,"button",6),d("click",function(){return p.close()}),o(9,"i",7),a(10,"span",3)(11,"span",4),n()()(),o(12,"div",8)(13,"p"),s(14,"\xBFEst\xE1s seguro de eliminar este usuario?"),n(),o(15,"p"),s(16,"Toda la informaci\xF3n relacionada con este usuario se perder\xE1."),n()(),o(17,"div",9)(18,"button",10),d("click",function(){return p.close()}),s(19," Cancelar "),n(),o(20,"button",11),h(21,"async"),d("click",function(){return p.delete()}),s(22," Eliminar "),k(23,ke,1,0,"span",12),h(24,"async"),n()()),i&2&&(u(20),f("disabled",b(21,2,p.isLoading)),u(3),f("ngIf",b(24,4,p.isLoading)))},dependencies:[T,x]});let r=e;return r})();var vt=(()=>{let e=class e{ngOnInit(){}agInit(t){this.params=t}openEdit(){this.params?.onEdit(this.params.data)}openDelete(){this.params?.onDelete(this.params.data)}refresh(t){return!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=C({type:e,selectors:[["app-action-buttons"]],decls:5,vars:0,consts:[[1,"d-flex","align-items-center","gap-2",2,"padding-block","0.15rem"],["type","button",1,"btn","btn-icon","btn-sm","bg-success",3,"click"],[1,"ki-solid","ki-pencil","text-white"],["type","button",1,"btn","btn-icon","btn-sm","btn-danger",3,"click"],[1,"ki-solid","ki-trash","text-white"]],template:function(i,p){i&1&&(o(0,"div",0)(1,"button",1),d("click",function(){return p.openEdit()}),a(2,"span",2),n(),o(3,"button",3),d("click",function(){return p.openDelete()}),a(4,"span",4),n()())}});let r=e;return r})();export{Ae as a,ue as b,he as c,gt as d,vt as e};
